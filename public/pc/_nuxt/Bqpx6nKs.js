import{E as s}from"./7KO-WwAc.js";import{_ as e}from"./C5Pr72SQ.js";import{E as a,a as r}from"./CSNhwhPs.js";import{E as o}from"./BYBCH-HF.js";import{e as t,aA as l,z as d,I as p,h as i,r as u,ai as n,n as w,o as m,w as v,b as f,a as g,t as c,d as E,j as y,dB as b,cB as $,_ as h}from"./BoLQ9Xhu.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./k79prmI0.js";import"./C_oH9tmG.js";import"./BmDvg8bE.js";import"./nqCHxoJt.js";const _={class:"label"},j={class:"label"},V=h(t({__name:"StepTow",props:{step:{},stepModifiers:{},modelValue:{type:String},modelModifiers:{}},emits:["update:step","update:modelValue"],setup(t){const h=l(t,"step"),V=l(t,"modelValue"),{t:T}=d(),z=p(),A=(s,e,a)=>{x.value.tigTips[s]=e?{type:"valid",message:a}:{type:"error",message:a}},Z=s=>{x.value.tigTips[s]={type:"info",message:k[s]}},k=i({password:T("6-20个大小写英文字母、符号或数字的组合"),password2:T("请输入和上次相同的密码")}),q=i({password:[{validator:(s,e,a)=>e?e.length>20||e.length<6?a(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?a(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?a(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?void a():a(new Error(T("密码不能全为相同字符或数字"))):a(new Error(T("密码不能全为符号"))):a(new Error(T("密码不能全为字母"))):a(new Error(T("密码不能为空"))),trigger:"blur",required:!0}],password2:[{validator:(s,e,a)=>e?e.length>20||e.length<6?a(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?a(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?a(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?e!=x.value.password?a(new Error(T("两次输入密码不一致"))):void a():a(new Error(T("密码不能全为相同字符或数字"))):a(new Error(T("密码不能全为符号"))):a(new Error(T("密码不能全为字母"))):a(new Error(T("密码不能为空"))),trigger:"blur",required:!0}]}),W=u(!1),x=u({tigTips:{},password:"",password2:""}),B=n(),F=async()=>{await z.value.validate();try{W.value=!0;await b({mobileKey:V.value,password:x.value.password});$.success(T("重置密码成功")),B.push("/member/login")}catch(s){$.error(s.message),h.value=1,V.value="",x.value.password="",x.value.password2=""}finally{W.value=!1}};return(t,l)=>{const d=s,p=e,i=a,u=o,n=r;return m(),w(n,{ref_key:"formRef",ref:z,"hide-required-asterisk":!0,model:x.value,rules:y(q),"show-message":!1,class:"form-body","label-width":"auto",onValidate:A},{default:v(()=>[f(i,{prop:"password"},{default:v(()=>[g("div",_,c(t.$t("新密码")),1),f(d,{modelValue:x.value.password,"onUpdate:modelValue":l[0]||(l[0]=s=>x.value.password=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[1]||(l[1]=s=>Z("password"))},null,8,["modelValue"]),f(p,{info:x.value.tigTips.password},null,8,["info"])]),_:1}),f(i,{prop:"password2"},{default:v(()=>[g("div",j,c(t.$t("确认新密码")),1),f(d,{modelValue:x.value.password2,"onUpdate:modelValue":l[2]||(l[2]=s=>x.value.password2=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[3]||(l[3]=s=>Z("password2"))},null,8,["modelValue"]),f(p,{info:x.value.tigTips.password2},null,8,["info"])]),_:1}),f(i,{label:"",prop:"firstWord"},{default:v(()=>[f(u,{loading:W.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:F},{default:v(()=>[E(c(t.$t("确 认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-52a2c7d0"]]);export{V as default};
