import{_ as e}from"./BDziKWme.js";import{_ as a}from"./CUjxzVkc.js";import{_ as s}from"./CACs9nxh.js";import{e as l,r as t,h as i,y as o,c as n,o as d,F as u,a as c,i as p,a6 as r,b as v,w as m,d as y,t as f,ad as g,as as h,j as I,p as x,_ as k,z as b,f as _,g as V,G as $,v as w,at as T,n as j,m as C,x as U,k as N,s as D,E as A,au as P,l as S,av as L,ah as E}from"./BoLQ9Xhu.js";import{E as F}from"./7KO-WwAc.js";import{E as O}from"./CqjQ_mIo.js";import{E as R}from"./7ACzQoE5.js";import{_ as z}from"./DJvLo_GQ.js";import{_ as B}from"./Bk7c1JMx.js";import{E as q}from"./BYBCH-HF.js";import{_ as M}from"./DFo55n29.js";/* empty css        */import"./D3Ou390f.js";import W from"./C03Ywz0X.js";import G from"./CsPdmXcm.js";/* empty css        */import{E as H}from"./mHIovD83.js";import"./DwsKuIG7.js";import{S as J}from"./DIKWJnCq.js";import{g as K,u as Q,a as X,s as Y}from"./DOca54Ap.js";import{I as Z,u as ee,a as ae,o as se,g as le,b as te,c as ie,d as oe}from"./DoAQlB-k.js";import{_ as ne}from"./D6NayHVT.js";import{_ as de}from"./CETs2ebm.js";import{E as ue}from"./C6OBWpTT.js";import"./oOeuh3JC.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./k79prmI0.js";import"./C_oH9tmG.js";import"./nqCHxoJt.js";import"./MzbMzCCn.js";import"./BSss4uk8.js";import"./DCawybvr.js";import"./BmDvg8bE.js";import"./D5wp6cRH.js";import"./Y9Rb4YJs.js";/* empty css        */import"./C4BNlK69.js";import"./CSNhwhPs.js";import"./DglJjdLb.js";import"./gI-rYgo8.js";import"./LV9keNGJ.js";import"./C-LthTfX.js";const ce={key:0,class:"modal_region_box"},pe={key:0,class:"address_from"},re={class:"from_item"},ve={class:"tit"},me={class:"inp"},ye={class:"from_item"},fe={class:"tit"},ge={class:"inp"},he={class:"from_item"},Ie={class:"tit"},xe={class:"from_item"},ke={class:"tit"},be={class:"inp"},_e={class:"from_item"},Ve={class:"tit"},$e={class:"inp"},we={class:"from_item"},Te={class:"btn_box"},je=k(l({__name:"ModalRegion",props:{addressId:{type:Number,default:0}},emits:["change"],setup(e,{emit:a}){const s=a,l=e,k=t(!1),b=t(!1),_={consignee:"",regionIds:[]},V=i({..._}),$=t(!0),w=()=>{b.value=!0,k.value=!0,l.addressId>0?j():$.value=!1};o(()=>{});const T=()=>{Object.assign(V,{..._})},j=async()=>{try{const e=await K(l.addressId);Object.assign(V,e)}catch(e){x.error(e.message)}finally{$.value=!1}};return(a,l)=>{const t=H;return d(),n(u,null,[c("div",{onClick:w,style:{display:"inline-flex",cursor:"pointer"}},[r(a.$slots,"default",{},void 0,!0)]),k.value?(d(),n("div",ce,[v(t,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),title:0==e.addressId?a.$t("添加收货地址"):a.$t("修改收货地址"),footer:null,top:"15vh",width:"830px","destroy-on-close":!0,onClosed:T},{default:m(()=>[$.value?p("",!0):(d(),n("div",pe,[c("div",re,[c("div",ve,[l[5]||(l[5]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("收货人"))+"：",1)]),c("div",me,[g(c("input",{class:"tig-input","onUpdate:modelValue":l[0]||(l[0]=e=>V.consignee=e),type:"text",style:{width:"170px"}},null,512),[[h,V.consignee]])])]),c("div",ye,[c("div",fe,[l[6]||(l[6]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("所在地区"))+"：",1)]),c("div",ge,[v(I(J),{modelValue:V.regionIds,"onUpdate:modelValue":l[1]||(l[1]=e=>V.regionIds=e)},null,8,["modelValue"])])]),c("div",he,[c("div",Ie,[l[7]||(l[7]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("详细地址"))+"：",1)]),l[8]||(l[8]=c("div",{class:"inp"},[c("input",{class:"tig-input",type:"text",style:{width:"270px"}})],-1))]),c("div",xe,[c("div",ke,[l[9]||(l[9]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("联系电话"))+"：",1)]),c("div",be,[l[10]||(l[10]=c("input",{class:"tig-input",type:"text",style:{width:"170px"}},null,-1)),c("span",null,f(a.$t("推荐手机，座机需加区号和“-”符号")),1)])]),c("div",_e,[c("div",Ve,f(a.$t("电子邮箱"))+"：",1),c("div",$e,[l[11]||(l[11]=c("input",{class:"tig-input",type:"text",style:{width:"270px"}},null,-1)),c("span",null,f(a.$t("用来接收订单提醒邮件")),1)])]),c("div",we,[l[12]||(l[12]=c("div",{class:"tit"},null,-1)),c("div",Te,[c("div",{class:"btn",onClick:l[2]||(l[2]=e=>(async()=>{try{const e=await Q(V);s("change",e.addressId),b.value=!1}catch(e){x.error(e.message)}})())},f(a.$t("确认修改地址")),1),c("div",{class:"btn info",onClick:l[3]||(l[3]=e=>b.value=!1)},f(a.$t("取消")),1)])])]))]),_:1},8,["modelValue","title"])])):p("",!0)],64)}}}),[["__scopeId","data-v-525f93ed"]]),Ce={class:"container"},Ue={class:"orderConfirmCon"},Ne={class:"form_item"},De={class:"top_row flex justify-between"},Ae={class:"tit"},Pe={class:"delivery"},Se={class:"tit"},Le={key:0,class:"delivery_tags flex flex-wrap"},Ee={key:1,class:"delivery_tags flex flex-wrap"},Fe=["onClick"],Oe={key:2,class:"no_delivery"},Re={class:"errInfo red",style:{display:"inline",margin:"0"}},ze={class:"detail"},Be={class:"shop_name"},qe={class:"list flex align-start"},Me={class:"flex align-start"},We={class:"pic"},Ge=["src"],He={class:"describe flex flex-column"},Je=["title"],Ke={class:"mt10 sku-name-box"},Qe={class:"sku-name-item"},Xe={class:"sku-name"},Ye={key:0,class:"extraskudata"},Ze={class:"title"},ea={class:"content"},aa={class:"content-text"},sa={key:1,class:"activity-box"},la={class:"ticket-content"},ta={class:"money"},ia={class:"quantity"},oa={key:0,class:"gift-box"},na={class:"gift-title"},da={class:"gift-content"},ua={class:"gift-content-item"},ca={class:"gift-item-left"},pa={class:"gift-item-right"},ra={class:"gift-item-name"},va={key:0,class:"sku-card"},ma={class:"gift-item-num"},ya={class:"add_remark"},fa={class:"a_rmk_tit"},ga={class:"a_rmk_con"},ha={key:1,class:"form_item"},Ia={class:"top_row"},xa={class:"tit"},ka={key:1,class:"from"},ba={class:"check-box flex align-center"},_a={class:"tit"},Va={style:{"margin-left":"10px"}},$a={class:"font-color"},wa={key:2,class:"from_list"},Ta={class:"integral flex"},ja={class:"tit"},Ca={class:"inp_box"},Ua={class:"inp"},Na={key:0,class:"points_amount"},Da={class:"tips"},Aa={href:"/article/issue/info?articleId=7",target:"_blank"},Pa={class:"font-color"},Sa={key:3,class:"from"},La={class:"check-box flex align-center"},Ea={class:"tit"},Fa={style:{"margin-left":"10px"}},Oa={class:"font-color"},Ra={key:2,class:"form_item"},za={class:"top_row flex align-end"},Ba={class:"tit"},qa={class:"tips"},Ma={class:"from"},Wa={class:"flex align-center invoice-box"},Ga={class:"title flex align-center"},Ha={key:0,class:"type"},Ja={key:0},Ka={key:1},Qa={class:"type"},Xa={class:"btn hand-pointer"},Ya={class:"money_info"},Za={class:"total_list"},es={class:"item"},as={key:0,class:"item"},ss={key:1,class:"item",style:{display:"flex","align-items":"center"}},ls={style:{"margin-left":"4px"}},ts={key:2,class:"item",style:{display:"flex","align-items":"center"}},is={style:{"margin-left":"4px"}},os={class:"item"},ns={class:"tip-item"},ds={class:"ui-tips"},us={class:"ui-tips-main"},cs={class:"tit"},ps={class:"goods_list"},rs={class:"goods_col"},vs={class:"shop_name"},ms={class:"list"},ys={class:"txt"},fs={class:"item",style:{padding:"10px 0"}},gs={class:"img_box",style:{width:"65px"}},hs=["src"],Is={key:3,class:"item"},xs={class:"discount"},ks={class:"discount-title"},bs={class:"title-text"},_s={class:"discount-content"},Vs={key:0,class:"discount-item-box"},$s={class:"item-label"},ws={class:"item-value"},Ts={class:"discount-item-box hassub"},js={key:0,class:"flex justify-between",style:{"align-items":"center"}},Cs={class:"item-label"},Us={class:"item-value discounts-value",style:{color:"var(--general)",display:"flex","align-items":"center"}},Ns={key:1,class:"sub-item-box",style:{"align-items":"center"}},Ds={class:"sub-item-label"},As={class:"sub-item-value discounts-value",style:{display:"flex","align-items":"center"}},Ps={key:2,class:"sub-item-box",style:{"align-items":"center"}},Ss={class:"sub-item-label"},Ls={class:"sub-item-value discounts-value",style:{display:"flex","align-items":"center"}},Es={key:1,class:"discount-item-box"},Fs={class:"item-label"},Os={class:"item-value"},Rs={key:0,class:"complete"},zs={class:"total_fee flex justify-end"},Bs={class:"unpaidamount-label"},qs={key:0,class:"points-box"},Ms={class:"points-value"},Ws={class:"points-text"},Gs={class:"submit flex justify-end"},Hs=k(l({__name:"check",setup(l){const{t:o}=b(),r=_(),g=V(),h=$(),k=w(()=>h.query.flowType?Number(h.query.flowType):1),H=i({addressId:0,shippingType:{},payTypeId:0,usePoint:0,useBalance:0,useCouponIds:[],selectUserCouponIds:[],buyerNote:"",invoiceData:{}}),J=t([]),K=T("addressRef"),Q=async()=>new Promise((e,a)=>{X({page:1,size:99}).then(s=>{0==s.records.length&&(K.value?.show(),a("没有地址")),H.addressId=s.records[0].addressId,J.value=s.records,e(void 0)}).catch(e=>{console.log(e),a(e)})}),ce=t([]),pe=async()=>{try{const e=await le();H.payTypeId=e[0].typeId,ce.value=e}catch(e){console.log(e)}},re=t({}),ve=async()=>{try{const e=await te({flowType:k.value});re.value=e;for(const a in e)e[a]&&e[a].length>0&&(H.shippingType[a]={typeId:e[a][0].shippingTypeId,shopId:e[a][0].shopId,typeName:e[a][0].shippingTypeName});console.log("getShippingTypeData",H.shippingType)}catch(e){console.log(e)}},me=t(!0),ye=t(!0),fe=t(!1),ge=t(0),he=t(!1),Ie=w(()=>{const e=[1==r.useCoupon&&"优惠券",1==r.usePoints&&r.integralName,1==r.useSurplus&&"余额"].filter(Boolean);return e.length?`使用${e.join("/")}`:""}),xe=t([]),ke=t({}),be=t({disableCoupons:[],enableCoupons:[]}),_e=t(0),Ve=t();(async()=>{try{Ve.value=ue.service({lock:!1,text:o("请求加载中"),customClass:"tig-normal-loading"}),me.value=!0,await Q(),await Promise.all([pe(),ve(),g.getUserInfo()]),await(async()=>{ye.value=!0;try{const e=await ie({flowType:k.value,...H});Object.assign(H,e.item),xe.value=e.cartList,ke.value=e.total,be.value=e.couponList,_e.value=e.availablePoints,e.useCouponIds&&e.useCouponIds?.length>0&&(fe.value=!0,H.useCouponIds=e.useCouponIds,H.selectUserCouponIds=e.selectUserCouponIds),me.value=!1}catch(e){x.error(e.message)}finally{ye.value=!1}})()}catch(e){console.log(e)}finally{me.value=!1,Ve.value?.close()}})();const $e=async()=>{try{const e=await ee({flowType:k.value,...H});return Object.assign(H,e.item),xe.value=e.cartList,ke.value=e.total,_e.value=e.availablePoints,e}catch(e){x.error(e.message)}finally{ye.value=!1}},we=t({autoplay:!1,navigation:!0,pagination:!1,effect:"slide",loop:!1,slidesPerView:4,slidesPerGroup:1}),Te=async e=>{try{ye.value=!0,H.addressId=e.addressId,await(async a=>{try{await Y(a)}catch(e){console.log(e)}})(e.addressId),he.value=!1,await Q(),await ve(),await pe(),await $e(),(async()=>{try{const e=await oe({...H.invoiceData});if(e)delete e.id,delete e.userId,delete e.orderId,delete e.status,delete e.applyReply,delete e.invoiceNo,delete e.addTime,1==e.titleType&&(e.companyUserName=e.companyName),2==e.titleType&&(e.companyEnterpriseName=e.companyName),H.invoiceData=e;else{let e=J.value.find(e=>H.addressId==e.addressId);if(e){let a={companyUserName:e.consignee,mobile:e.mobile,email:e.email,amount:ke.value.unpaidAmount};Object.assign(H.invoiceData,a)}}}catch(e){x.error(e.message)}})()}catch(a){}},Hs=e=>{H.payTypeId!==e&&(H.payTypeId=e,$e())},Js=t(0),Ks=t(!1),Qs=e=>{console.log("getInvoiceData",e),H.invoiceData=e},Xs=()=>{!0===Ks.value?(Ks.value=!1,H.usePoint=0,Js.value=0):Ks.value=!0,0!=H.usePoint&&$e()},Ys=()=>{Js.value=Math.floor(Number(Js.value)),Js.value>_e.value?Js.value=_e.value:(Js.value<0||!Js.value)&&(Js.value=0),H.usePoint=Js.value,$e()},Zs=()=>{H.useBalance=0==H.useBalance?g.userInfo.balance:0,$e()},el=(e=!1)=>{sl(e)},al=t(!1),sl=async(e=!1)=>{try{al.value=!0,H.useDefaultCouponIds=e?1:0;const a=await ae(H);return H.useCouponIds=a.useCouponIds??[],H.selectUserCouponIds=a.selectUserCouponIds??[],be.value=a.couponList,ke.value=a.total,xe.value=a.cartList,_e.value=a.availablePoints,a}catch(a){}finally{al.value=!1}},ll=t(!1),tl=t(!1),il=w(()=>{if(0===H.addressId)return!0;if(0===H.payTypeId)return!0;if(!H.shippingType)return!0;for(const e of xe.value)if(0===e.noShipping&&!H.shippingType[e.shopId])return!0;return!1}),ol=e=>e.filter(e=>1===e.type||6===e.type),nl=t(!1);return(l,t)=>{const i=e,o=a,h=s,b=A,_=F,V=O,$=P,w=R,T=z,X=s,Y=B,ee=P,ae=q,le=M;return d(),n("div",null,[v(i,{title:"订单结算页"}),v(W,{step:2}),c("div",Ce,[c("div",Ue,[v(ne,{ref_key:"addressRef",ref:K,modelValue:he.value,"onUpdate:modelValue":t[0]||(t[0]=e=>he.value=e),"active-address-id":H.addressId,addressList:J.value,onAddrssRefresh:Q,onOkCallback:Te},null,8,["modelValue","active-address-id","addressList"]),J.value&&J.value.length>0?(d(),j(de,{key:0,"pay-type-id":H.payTypeId,"payment-type-list":ce.value,onChangePayType:Hs},null,8,["pay-type-id","payment-type-list"])):p("",!0),c("div",Ne,[c("div",De,[c("div",Ae,f(l.$t("购物清单")),1),3!==k.value?(d(),j(o,{key:0,class:"font-color",to:"/cart/"},{default:m(()=>[y(f(l.$t("返回修改购物车")),1)]),_:1})):p("",!0)]),xe.value&&xe.value.length>0?(d(!0),n(u,{key:0},C(xe.value,(e,a)=>(d(),n("div",{class:"product_detail flex",key:e.shopId},[c("div",Pe,[c("div",Se,f(l.$t("配送方式")),1),1===e.noShipping?(d(),n("div",Le,t[26]||(t[26]=[c("div",{class:"pay_tab flex align-center active"},[c("span",null,"无需配送"),c("i",{class:"icon-gou"})],-1)]))):re.value[e.shopId]&&re.value[e.shopId].length>0?(d(),n("div",Ee,[(d(!0),n(u,null,C(re.value[e.shopId],(a,s)=>(d(),n("div",{key:a,class:U(["pay_tab flex align-center",{active:a.shippingTypeId===H.shippingType[e.shopId].typeId}]),onClick:s=>(async(e,a)=>{const{shippingTypeId:s,shippingTypeName:l}=a;H.shippingType[e]&&H.shippingType[e].typeId==s||(H.shippingType[e].typeId=s,H.shippingType[e].shopId=e,H.shippingType[e].typeName=l,await $e())})(e.shopId,a)},[c("span",null,f(a.shippingTypeName),1),t[27]||(t[27]=c("i",{class:"icon-gou"},null,-1))],10,Fe))),128))])):(d(),n("div",Oe,[c("span",Re,f(l.$t("该收货地址不支持配送")),1)]))]),c("div",ze,[c("div",Be,f(0==e.shopId?l.$t("自营"):`${l.$t("商家")}：${e.shopTitle}`),1),(d(!0),n(u,null,C(e.carts,e=>(d(),n("div",qe,[c("div",Me,[c("div",We,[v(o,{target:"_blank",to:I(D)({path:"product",id:e.productId,sn:e.productSn})},{default:m(()=>[c("img",{src:I(N)(e.picThumb),alt:""},null,8,Ge)]),_:2},1032,["to"])]),c("div",He,[c("div",{class:"name ellipsis",title:e.productName},[v(o,{target:"_blank",to:I(D)({path:"product",id:e.productId,sn:e.productSn})},{default:m(()=>[y(f(e.productName),1)]),_:2},1032,["to"])],8,Je),c("div",Ke,[(d(!0),n(u,null,C(e.skuData,(e,a)=>(d(),n("div",Qe,[c("span",Xe,f(e.name)+"：",1),y(f(e.value),1)]))),256))]),e.extraSkuData&&e.extraSkuData.length?(d(),n("div",Ye,[(d(!0),n(u,null,C(e.extraSkuData,e=>(d(),n("div",{key:e,class:"extraskudata-item"},[c("div",Ze,f(e.attrName),1),t[28]||(t[28]=c("div",{class:"line-box"},[c("div",{class:"line"})],-1)),c("div",ea,[c("span",aa,f(e.attrValue),1),v(h,{modelValue:e.attrPrice,"onUpdate:modelValue":a=>e.attrPrice=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):p("",!0),e.activityInfo&&ol(e.activityInfo).length>0?(d(),n("div",sa,[(d(!0),n(u,null,C(ol(e.activityInfo),e=>(d(),n("div",{key:e.promotionId,class:"promotion"},[c("div",la,f(1===e.type?l.$t("秒杀价"):l.$t("限时折扣")),1)]))),128))])):p("",!0)])]),c("div",ta,[v(h,{fontStyle:{fontWeight:"600"},modelValue:e.price,"onUpdate:modelValue":a=>e.price=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),c("div",ia,"x"+f(e.quantity),1)]))),256)),e.gift&&e.gift.length>0?(d(),n("div",oa,[c("div",na,f(l.$t("赠品")),1),c("div",da,[(d(!0),n(u,null,C(e.gift,e=>(d(),j(o,{key:e.giftId,target:"_blank",to:I(D)({path:"product",id:e.productId,sn:e.productSn})},{default:m(()=>[c("div",ua,[c("div",ca,[v(b,{class:"gift-img",lazy:"",src:I(N)(e.picThumb)},null,8,["src"])]),c("div",pa,[c("div",ra,f(e.productName),1),e.skuData&&e.skuData.length>0?(d(),n("div",va,[(d(!0),n(u,null,C(e.skuData,(e,a)=>(d(),n("div",{key:a,class:"sku-item"},f(e.value),1))),128))])):p("",!0),c("div",ma,"x"+f(e.num),1)])])]),_:2},1032,["to"]))),128))])])):p("",!0)])]))),128)):p("",!0),c("div",ya,[c("div",fa,f(l.$t("订单备注"))+"：",1),c("div",ga,[v(_,{modelValue:H.buyerNote,"onUpdate:modelValue":t[1]||(t[1]=e=>H.buyerNote=e),type:"textarea",placeholder:l.$t("提示：请勿填写有关支付、收货、发票方面的信息"),style:{width:"400px","font-size":"12px"},"show-word-limit":"",maxlength:50},null,8,["modelValue","placeholder"])])])]),Ie.value?(d(),n("div",ha,[c("div",Ia,[c("div",xa,f(l.$t(Ie.value)),1)]),v($,null,{default:m(()=>[0!=I(r).useCoupon?(d(),j(G,{key:0,useCoupon:fe.value,"onUpdate:useCoupon":t[2]||(t[2]=e=>fe.value=e),couponList:be.value,"onUpdate:couponList":t[3]||(t[3]=e=>be.value=e),selectedIds:H.useCouponIds,"onUpdate:selectedIds":t[4]||(t[4]=e=>H.useCouponIds=e),selectedUserCouponIds:H.selectUserCouponIds,"onUpdate:selectedUserCouponIds":t[5]||(t[5]=e=>H.selectUserCouponIds=e),onChange:el,couponLoading:al.value,"onUpdate:couponLoading":t[6]||(t[6]=e=>al.value=e)},null,8,["useCoupon","couponList","selectedIds","selectedUserCouponIds","couponLoading"])):p("",!0),0!=I(r).usePoints&&1===k.value?(d(),n("div",ka,[c("div",ba,[v(V,{checked:H.usePoint>0,onClick:Xs},{default:m(()=>[c("span",_a,f(l.$t(`使用${I(r).integralName}`)),1)]),_:1},8,["checked"]),c("div",Va,[y(f(l.$t("当前账户共"))+" ",1),c("span",$a,f(I(g).userInfo.points),1),y(" "+f(l.$t(I(r).integralName)),1)])])])):p("",!0),Ks.value?(d(),n("div",wa,[t[29]||(t[29]=c("div",{class:"arrow"},null,-1)),c("div",Ta,[c("div",ja,f(l.$t(`使用${I(r).integralName}`))+"：",1),c("div",Ca,[c("div",Ua,[v(_,{max:_e.value,modelValue:Js.value,"onUpdate:modelValue":t[7]||(t[7]=e=>Js.value=e),onChange:Ys},null,8,["max","modelValue"]),ke.value.pointsAmount>0?(d(),n("span",Na,[y("  "+f(l.$t("共抵扣"))+" ",1),v(h,{class:"red",modelValue:ke.value.pointsAmount,"onUpdate:modelValue":t[8]||(t[8]=e=>ke.value.pointsAmount=e),showText:!1},null,8,["modelValue"])])):p("",!0)]),c("div",Da,[y(f(l.$t("该订单最多可用"))+f(_e.value)+" "+f(l.$t(I(r).integralName))+" ",1),c("a",Aa,[c("span",Pa,"【"+f(l.$t(`如何获得${I(r).integralName}`))+"？】",1)])])])])])):p("",!0),0!=I(r).useSurplus&&I(g).userInfo.balance>0?(d(),n("div",Sa,[c("div",La,[v(V,{checked:H.useBalance>0,onClick:Zs},{default:m(()=>[c("span",Ea,f(l.$t("使用余额")),1)]),_:1},8,["checked"]),c("div",Fa,[y(f(l.$t("当前账户余额"))+" ",1),c("span",Oa,f(I(g).userInfo.balance),1)])])])):p("",!0)]),_:1})])):p("",!0),1!=I(r).canInvoice||I(S)()?p("",!0):(d(),n("div",Ra,[c("div",za,[c("div",Ba,f(l.$t("发票信息")),1),c("div",qa,f(l.$t("开企业抬头发票须填写纳税人识别号，以免影响报销")),1)]),c("div",Ma,[c("div",Wa,[c("div",Ga,[c("span",null,f(H.invoiceData.invoiceType?1==H.invoiceData.invoiceType?l.$t("电子普通发票"):l.$t("增值税专用发票"):l.$t("不开发票")),1),1==H.invoiceData.invoiceType?(d(),j(w,{key:0,content:l.$t("电子普通发票与纸质发票具有同等法律效力，可支持报销入账、商品售后凭证。"),placement:"bottom-start",effect:"light"},{default:m(()=>t[30]||(t[30]=[c("i",{class:"iconfont-pc icon-tishi"},null,-1)])),_:1,__:[30]},8,["content"])):p("",!0)]),H.invoiceData.invoiceType?(d(),n("div",Ha,[1==H.invoiceData.invoiceType?(d(),n("span",Ja,f(1==H.invoiceData.titleType?l.$t("个人"):l.$t("企业")),1)):p("",!0),2==H.invoiceData.invoiceType?(d(),n("span",Ka,f(l.$t("增值税专用发票")),1)):p("",!0)])):p("",!0),c("div",Qa,[c("span",null,f(H.invoiceData.companyName??""),1)]),v(Z,{params:{invoiceData:H.invoiceData,amount:ke.value?.unpaidAmount,type:"check",address:J.value.find(e=>H.addressId==e.addressId)},onCallback:Qs,onChangeType:t[9]||(t[9]=()=>{})},{default:m(()=>[c("div",Xa,f(l.$t("修改")),1)]),_:1},8,["params"])])])])),c("div",Ya,[v(ee,null,{default:m(()=>[c("div",Za,[c("div",es,[y(f(l.$t("商品总价"))+"： ",1),v(h,{modelValue:ke.value.productAmount,"onUpdate:modelValue":t[10]||(t[10]=e=>ke.value.productAmount=e),showText:!1},null,8,["modelValue"])]),ke.value.serviceFee&&ke.value.serviceFee>0?(d(),n("div",as,[y(f(l.$t("附加费用"))+"： ",1),v(h,{modelValue:ke.value.serviceFee,"onUpdate:modelValue":t[11]||(t[11]=e=>ke.value.serviceFee=e),showText:!1},null,8,["modelValue"])])):p("",!0),ke.value.balance>0?(d(),n("div",ss,[t[31]||(t[31]=c("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),c("span",ls,f(l.$t("使用余额"))+"：",1),v(h,{modelValue:ke.value.balance,"onUpdate:modelValue":t[12]||(t[12]=e=>ke.value.balance=e),showText:!1},null,8,["modelValue"])])):p("",!0),ke.value.pointsAmount>0&&3!=k.value?(d(),n("div",ts,[t[32]||(t[32]=c("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),c("span",is,f(l.$t(`${I(r).integralName}减免`))+"：",1),v(h,{modelValue:ke.value.pointsAmount,"onUpdate:modelValue":t[13]||(t[13]=e=>ke.value.pointsAmount=e),showText:!1},null,8,["modelValue"])])):p("",!0),c("div",os,[c("div",ns,[t[34]||(t[34]=c("i",{class:"freight-icon"},null,-1)),c("div",ds,[t[33]||(t[33]=c("span",{class:"ui-tips-arrow"},null,-1)),c("div",us,[c("div",cs,f(l.$t("运费明细")),1),c("div",ps,[(d(!0),n(u,null,C(xe.value,(e,a)=>(d(),n("div",rs,[c("div",vs,f(0==e.shopId?l.$t("自营"):e.shopTitle),1),c("div",ms,[c("div",ys,[y(f(l.$t("运费"))+"：",1),v(h,{showText:!1,modelValue:ke.value.storeShippingFee[e.shopId],"onUpdate:modelValue":a=>ke.value.storeShippingFee[e.shopId]=a},null,8,["modelValue","onUpdate:modelValue"])]),c("div",fs,[v(T,{swiperOption:we.value,"onUpdate:swiperOption":t[14]||(t[14]=e=>we.value=e),itemList:e.carts,style:{width:"100%",padding:"0 30px"}},{default:m(({item:e})=>[c("div",gs,[c("img",{src:I(N)(e.picThumb),alt:""},null,8,hs)])]),_:2},1032,["swiperOption","itemList"])])])]))),256))])])])]),y(" + "+f(l.$t("配送费用"))+"： ",1),v(h,{showText:!1,modelValue:ke.value.shippingFee,"onUpdate:modelValue":t[15]||(t[15]=e=>ke.value.shippingFee=e)},null,8,["modelValue"])]),ke.value.discounts>0?(d(),n("div",Is,[v(Y,{trigger:"hover",modelValue:nl.value,"onUpdate:modelValue":t[21]||(t[21]=e=>nl.value=e)},L({reference:m(()=>[t[35]||(t[35]=c("div",{class:"tip-item"},[c("i",{class:"freight-icon"})],-1))]),_:2},[nl.value?{name:"default",fn:m(()=>[c("div",xs,[c("div",ks,[c("div",bs,f(l.$t("优惠明细")),1)]),c("div",_s,[ke.value?.productAmount>0?(d(),n("div",Vs,[c("div",$s,f(l.$t("商品总额")),1),c("div",ws,[v(X,{modelValue:ke.value.productAmount,"onUpdate:modelValue":t[16]||(t[16]=e=>ke.value.productAmount=e),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):p("",!0),c("div",Ts,[ke.value?.discounts>0?(d(),n("div",js,[c("div",Cs,f(l.$t("共优惠")),1),c("div",Us,[t[36]||(t[36]=c("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),v(X,{modelValue:ke.value.discounts,"onUpdate:modelValue":t[17]||(t[17]=e=>ke.value.discounts=e)},null,8,["modelValue"])])])):p("",!0),ke.value?.discountCouponAmount>0?(d(),n("div",Ns,[c("div",Ds,f(l.$t("优惠券")),1),c("div",As,[t[37]||(t[37]=c("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),v(X,{modelValue:ke.value.discountCouponAmount,"onUpdate:modelValue":t[18]||(t[18]=e=>ke.value.discountCouponAmount=e)},null,8,["modelValue"])])])):p("",!0),ke.value.discountDiscountAmount>0?(d(),n("div",Ps,[c("div",Ss,f(l.$t("其他优惠")),1),c("div",Ls,[t[38]||(t[38]=c("span",{style:{display:"inline-flex","align-items":"center"}},"-",-1)),v(X,{modelValue:ke.value.discountDiscountAmount,"onUpdate:modelValue":t[19]||(t[19]=e=>ke.value.discountDiscountAmount=e)},null,8,["modelValue"])])])):p("",!0)]),ke.value.discountAfter&&ke.value.discountAfter>0?(d(),n("div",Es,[c("div",Fs,f(l.$t("合计")),1),c("div",Os,[v(X,{modelValue:ke.value.discountAfter,"onUpdate:modelValue":t[20]||(t[20]=e=>ke.value.discountAfter=e),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):p("",!0)])])]),key:"0"}:void 0]),1032,["modelValue"]),y(" - "+f(l.$t("共优惠"))+"： ",1),v(h,{showText:!1,modelValue:ke.value.discounts,"onUpdate:modelValue":t[22]||(t[22]=e=>ke.value.discounts=e)},null,8,["modelValue"])])):p("",!0)])]),_:1}),ke.value.orderSendPoint&&ke.value.orderSendPoint>0?(d(),n("div",Rs," *"+f(I(S)()?l.$t(`该订单完成后，您将预计获得{0}${I(r).integralName}`,[ke.value.orderSendPoint]):`该订单完成后，您将预计获得${ke.value.orderSendPoint}${I(r).integralName}`),1)):p("",!0),c("div",zs,[c("div",Bs,f(l.$t("应付款金额"))+"：",1),3==k.value?(d(),n("div",qs,[c("div",Ms,[y(f(ke.value?.exchangePoints)+" ",1),c("div",Ws,f(l.$t(I(r).integralName)),1)]),t[39]||(t[39]=c("div",{class:"symbol"},"+",-1))])):p("",!0),v(h,{class:"price",modelValue:ke.value.unpaidAmount,"onUpdate:modelValue":t[23]||(t[23]=e=>ke.value.unpaidAmount=e),showText:!1},null,8,["modelValue"])]),c("div",Gs,[v(ae,{type:"primary",class:"btn",disabled:il.value,loading:ll.value,onClick:t[24]||(t[24]=e=>!ll.value&&(async()=>{try{ll.value=!0;const e=await se(H);return 2==e.returnType?(E("/member/order/list",{replace:!0}),g.userInfoLoaded=!1,void(await g.getUserInfo())):(E(`/order/pay?id=${e.orderId}`,{replace:!0}),e)}catch(e){x.error(e.message)}finally{ll.value=!1}})())},{default:m(()=>[y(f(l.$t("提交订单")),1)]),_:1},8,["disabled","loading"])])])])]),tl.value?(d(),j(I(je),{key:0,modelValue:tl.value,"onUpdate:modelValue":t[25]||(t[25]=e=>tl.value=e),addressId:ge.value},null,8,["modelValue","addressId"])):p("",!0),v(le)])}}}),[["__scopeId","data-v-ee0f9e25"]]);export{Hs as default};
