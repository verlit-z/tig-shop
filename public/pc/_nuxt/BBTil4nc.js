import{a as e,b as a}from"./BSss4uk8.js";import{E as l,a as t}from"./CSNhwhPs.js";import{E as u}from"./7KO-WwAc.js";import{E as r}from"./BYBCH-HF.js";import{E as o}from"./mHIovD83.js";import{e as s,z as d,r as c,v as i,I as m,c as p,o as n,a as v,b as f,a6 as y,w as b,n as g,i as $,ad as _,ae as j,d as V,t as h,j as w,p as N,_ as k}from"./BoLQ9Xhu.js";import"./DwsKuIG7.js";import{j as T,k as E}from"./DlHfSwhz.js";import"./k79prmI0.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./nqCHxoJt.js";import"./BmDvg8bE.js";import"./C_oH9tmG.js";import"./D5wp6cRH.js";const U={class:"info-card"},F={class:"dialog-footer"},q=k(s({__name:"InfoCard",props:{act:{type:String,default:""},id:{type:Number,default:0},type:{type:Number,default:1},page:{type:Number,default:1}},emits:["loadFilter"],setup(s,{emit:k}){const{t:q}=d(),x=k,C=s,I=c({accountType:1}),A=c(!0),z=i(()=>{switch(I.value.accountType){case 1:return q("银行卡");case 2:return q("支付宝");case 3:return q("微信");default:return""}}),O=async()=>{await X.value.resetFields()},R=i(()=>[{required:!0,message:q("请输入身份证号"),trigger:"blur"},{validator:(e,a,l)=>{/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(a)?l():l(new Error(q("请输入正确的身份证号码")))},trigger:"blur"}]),S=i(()=>[{required:!0,message:q("请输入")+z.value+q("号"),trigger:"blur"},{validator:(e,a,l)=>{/^\d{6,}$/.test(a)||1!==I.value.accountType?l():l(new Error(q("请输入正确的银行卡号")))},trigger:"blur"}]),X=m(),Z=async()=>{await X.value.validate();try{await T({...I.value},"add"==C.act?"createAccount":"updateAccount");await X.value.resetFields(),N.success("操作成功"),B.value=!1,I.value.accountType=1,x("loadFilter")}catch(e){N.error(e.message)}},B=c(!1),D=async()=>{B.value=!0,X.value&&await X.value.resetFields(),I.value.accountType=C.type,"edit"==C.act?await(async()=>{try{A.value=!0;const e=await E({accountId:C.id});Object.assign(I.value,e)}catch(e){N.error(e.message)}finally{A.value=!1}})():A.value=!1};return(d,c)=>{const i=a,m=e,N=l,k=u,T=t,E=r,q=o;return n(),p("div",U,[v("span",{class:"cu",onClick:D},[y(d.$slots,"default",{},void 0,!0)]),f(q,{modelValue:B.value,"onUpdate:modelValue":c[5]||(c[5]=e=>B.value=e),title:"add"==s.act?d.$t("新增卡片"):d.$t("编辑卡片"),width:"600"},{footer:b(()=>[v("div",F,[f(E,{type:"primary",onClick:Z},{default:b(()=>[V(h(d.$t("保存")),1)]),_:1})])]),default:b(()=>[A.value?$("",!0):(n(),g(T,{key:0,ref_key:"formRef",ref:X,model:I.value,class:"form-body","label-suffix":"：","label-width":"auto"},{default:b(()=>[_(f(N,{rules:[{required:!0,message:d.$t("请选择卡类型")}],label:d.$t("卡类型")},{default:b(()=>[f(m,{modelValue:I.value.accountType,"onUpdate:modelValue":c[0]||(c[0]=e=>I.value.accountType=e),onChange:O},{default:b(()=>[f(i,{value:1},{default:b(()=>[V(h(d.$t("银行卡")),1)]),_:1}),f(i,{value:2},{default:b(()=>[V(h(d.$t("支付宝")),1)]),_:1}),f(i,{value:3},{default:b(()=>[V(h(d.$t("微信")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules","label"]),[[j,s.page]]),f(N,{rules:[{required:!0,message:d.$t("请输入真实姓名")}],label:d.$t("真实姓名"),prop:"accountName"},{default:b(()=>[f(k,{modelValue:I.value.accountName,"onUpdate:modelValue":c[1]||(c[1]=e=>I.value.accountName=e),placeholder:d.$t("请输入真实姓名")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),f(N,{rules:w(R),label:d.$t("身份证号"),prop:"identity"},{default:b(()=>[f(k,{modelValue:I.value.identity,"onUpdate:modelValue":c[2]||(c[2]=e=>I.value.identity=e),maxlength:"18",placeholder:d.$t("请输入身份证号")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),f(N,{label:w(z)+d.$t("号"),rules:w(S),prop:"accountNo"},{default:b(()=>[f(k,{modelValue:I.value.accountNo,"onUpdate:modelValue":c[3]||(c[3]=e=>I.value.accountNo=e),placeholder:d.$t("请输入")+w(z)},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),1===I.value.accountType?(n(),g(N,{key:0,label:d.$t("银行卡详情"),prop:"bankName"},{default:b(()=>[f(k,{modelValue:I.value.bankName,"onUpdate:modelValue":c[4]||(c[4]=e=>I.value.bankName=e),rows:4,placeholder:d.$t("请输入银行卡详情"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0)]),_:1},8,["model"]))]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-57e19bc6"]]);export{q as default};
