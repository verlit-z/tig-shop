import{_ as e}from"./CUjxzVkc.js";import{E as a,a as t}from"./DxxmIh9e.js";import{e as l,r,ai as s,H as u,c as i,o,b as c,w as d,F as n,m,n as v,a as p,x as f,d as y,t as I,p as g,_}from"./BoLQ9Xhu.js";import{g as h}from"./C4BNlK69.js";import"./k79prmI0.js";import"./BmDvg8bE.js";import"./DEVzVrts.js";const j={class:"menu-list"},L={key:0,class:"menu"},O={class:"min-menu"},b={key:1,class:"loading-data"},q=_(l({__name:"IssueLeftMenu",props:{dataOver:{type:Boolean,default:!1},leftMenuList:{type:Array,default:[]}},emits:["update:leftMenuList","update:dataOver"],setup(l,{emit:_}){const q=r([]),M=r(),R=r(),w=r(!0),C=r(!1),E=_;(async()=>{w.value=!0,E("update:leftMenuList",[]);try{const e=await h({categorySize:99,articleSize:99});Object.assign(q.value,e),E("update:leftMenuList",q.value),E("update:dataOver",!0),C.value=!0}catch(e){g.error(e.message)}finally{w.value=!1}})();const x=s();return u([()=>x.currentRoute.value.query,()=>C.value],()=>{if(x.currentRoute.value.query.hasOwnProperty("articleId")){let e=x.currentRoute.value.query.articleId;q.value?.forEach((a,t)=>{a.articles.forEach((t,l)=>{t.articleId===Number(e)&&(M.value=a.articleCategoryId,R.value=t.articleId)})})}else if(x.currentRoute.value.query.hasOwnProperty("categoryId")){let e=x.currentRoute.value.query.categoryId;q.value?.forEach((a,t)=>{a.categorySn===e&&(M.value=a.articleCategoryId)})}},{deep:!0}),(l,r)=>{const s=e,u=t,g=a;return o(),i("div",j,[c(s,{class:"ico",to:"/article/issue/index"}),w.value?(o(),i("div",b,I(l.$t("加载中")),1)):(o(),i("div",L,[c(g,{modelValue:M.value,"onUpdate:modelValue":r[0]||(r[0]=e=>M.value=e),accordion:""},{default:d(()=>[(o(!0),i(n,null,m(q.value,e=>(o(),v(u,{name:e.articleCategoryId,title:e.articleCategoryName,disabled:0===e.articles.length},{default:d(()=>[p("div",O,[(o(!0),i(n,null,m(e?.articles,e=>(o(),v(s,{class:f([R.value===e.articleId?"pitch-on":"","item-menu"]),to:"/article/issue/info?articleId="+e.articleId},{default:d(()=>[y(I(e.articleTitle),1)]),_:2},1032,["class","to"]))),256))])]),_:2},1032,["name","title","disabled"]))),256))]),_:1},8,["modelValue"])]))])}}}),[["__scopeId","data-v-34f9d306"]]);export{q as default};
