import{bt as e,a4 as t,a3 as a,M as o,O as n,N as l,bV as s,bW as i,P as r,e as u,bY as p,bZ as d,aa as c,v as f,R as m,I as v,r as b,b_ as g,b$ as y,c0 as h,bs as x,S as w,H as S,y as C,V as k,bC as z,c as I,o as E,i as P,F as $,a as F,x as B,j as N,a6 as V,n as M,w as _,aP as j,Z as R,bi as H,b as O,c1 as T,aj as L,bk as W,t as A,q as K,bm as U,ag as Y}from"./BoLQ9Xhu.js";import{u as Z,b as q,c as D,a as G,d as J}from"./Cy_EVX_n.js";import{U as Q,I as X,C as ee,d as te}from"./k79prmI0.js";import{u as ae,a as oe}from"./C_oH9tmG.js";let ne;const le={height:"0",visibility:"hidden",overflow:e&&/firefox/i.test(window.navigator.userAgent)?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},se=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ie(e,a=1,o){var n;ne||(ne=document.createElement("textarea"),document.body.appendChild(ne));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:se.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(e);r.forEach(([e,t])=>null==ne?void 0:ne.style.setProperty(e,t)),Object.entries(le).forEach(([e,t])=>null==ne?void 0:ne.style.setProperty(e,t,"important")),ne.value=e.value||e.placeholder||"";let u=ne.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),ne.value="";const d=ne.scrollHeight-l;if(t(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(t(o)){let e=d*o;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(n=ne.parentNode)||n.removeChild(ne),ne=void 0,p}const re=o({id:{type:String,default:void 0},size:i,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:s},prefixIcon:{type:s},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>l({})},autofocus:Boolean,rows:{type:Number,default:2},...Z(["ariaLabel"]),inputmode:{type:n(String),default:void 0},name:String}),ue={[Q]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};const pe=u({name:"ElInput",inheritAttrs:!1});const de=Y(r(u({...pe,props:re,emits:ue,setup(t,{expose:a,emit:o}){const n=t,l=p(),s=d(),i=c(),r=f(()=>["textarea"===n.type?ue.b():re.b(),re.m(le.value),re.is("disabled",se.value),re.is("exceed",Ne.value),{[re.b("group")]:i.prepend||i.append,[re.m("prefix")]:i.prefix||n.prefixIcon,[re.m("suffix")]:i.suffix||n.suffixIcon||n.clearable||n.showPassword,[re.bm("suffix","password-clear")]:Pe.value&&$e.value,[re.b("hidden")]:"hidden"===n.type},l.class]),u=f(()=>[re.e("wrapper"),re.is("focus",ye.value)]),{form:Y,formItem:Z}=G(),{inputId:ne}=J(n,{formItemContext:Z}),le=q(),se=D(),re=m("input"),ue=m("textarea"),pe=v(),de=v(),ce=b(!1),fe=b(!1),me=b(),ve=v(n.inputStyle),be=f(()=>pe.value||de.value),{wrapperRef:ge,isFocused:ye,handleFocus:he,handleBlur:xe}=ae(be,{disabled:se,afterBlur(){var e;n.validateEvent&&(null==(e=null==Z?void 0:Z.validate)||e.call(Z,"blur").catch(e=>te()))}}),we=f(()=>{var e;return null!=(e=null==Y?void 0:Y.statusIcon)&&e}),Se=f(()=>(null==Z?void 0:Z.validateState)||""),Ce=f(()=>Se.value&&g[Se.value]),ke=f(()=>fe.value?y:h),ze=f(()=>[l.style]),Ie=f(()=>[n.inputStyle,ve.value,{resize:n.resize}]),Ee=f(()=>x(n.modelValue)?"":String(n.modelValue)),Pe=f(()=>n.clearable&&!se.value&&!n.readonly&&!!Ee.value&&(ye.value||ce.value)),$e=f(()=>n.showPassword&&!se.value&&!!Ee.value),Fe=f(()=>n.showWordLimit&&!!n.maxlength&&("text"===n.type||"textarea"===n.type)&&!se.value&&!n.readonly&&!n.showPassword),Be=f(()=>Ee.value.length),Ne=f(()=>!!Fe.value&&Be.value>Number(n.maxlength)),Ve=f(()=>!!i.suffix||!!n.suffixIcon||Pe.value||n.showPassword||Fe.value||!!Se.value&&we.value),[Me,_e]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(pe);w(de,e=>{if(Re(),!Fe.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;me.value={right:`calc(100% - ${a+15+6}px)`}});const je=()=>{const{type:t,autosize:a}=n;if(e&&"textarea"===t&&de.value)if(a){const e=U(a)?a.minRows:void 0,t=U(a)?a.maxRows:void 0,o=ie(de.value,e,t);ve.value={overflowY:"hidden",...o},k(()=>{de.value.offsetHeight,ve.value=o})}else ve.value={minHeight:ie(de.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!n.autosize)return;null===(null==(a=de.value)?void 0:a.offsetParent)||(e(),t=!0)}})(je),He=()=>{const e=be.value,t=n.formatter?n.formatter(Ee.value):Ee.value;e&&e.value!==t&&(e.value=t)},Oe=async e=>{Me();let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),Le.value||(t!==Ee.value?(o(Q,t),o(X,t),await k(),He(),_e()):He())},Te=e=>{let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),o(ee,t)},{isComposing:Le,handleCompositionStart:We,handleCompositionUpdate:Ae,handleCompositionEnd:Ke}=oe({emit:o,afterComposition:Oe}),Ue=()=>{Me(),fe.value=!fe.value,setTimeout(_e)},Ye=e=>{ce.value=!1,o("mouseleave",e)},Ze=e=>{ce.value=!0,o("mouseenter",e)},qe=e=>{o("keydown",e)},De=()=>{o(Q,""),o(ee,""),o("clear"),o(X,"")};return S(()=>n.modelValue,()=>{var e;k(()=>je()),n.validateEvent&&(null==(e=null==Z?void 0:Z.validate)||e.call(Z,"change").catch(e=>te()))}),S(Ee,()=>He()),S(()=>n.type,async()=>{await k(),He(),je()}),C(()=>{!n.formatter&&n.parser,He(),k(je)}),a({input:pe,textarea:de,ref:be,textareaStyle:Ie,autosize:z(n,"autosize"),isComposing:Le,focus:()=>{var e;return null==(e=be.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=be.value)?void 0:e.blur()},select:()=>{var e;null==(e=be.value)||e.select()},clear:De,resizeTextarea:je}),(e,t)=>(E(),I("div",{class:B([N(r),{[N(re).bm("group","append")]:e.$slots.append,[N(re).bm("group","prepend")]:e.$slots.prepend}]),style:K(N(ze)),onMouseenter:Ze,onMouseleave:Ye},[P(" input "),"textarea"!==e.type?(E(),I($,{key:0},[P(" prepend slot "),e.$slots.prepend?(E(),I("div",{key:0,class:B(N(re).be("group","prepend"))},[V(e.$slots,"prepend")],2)):P("v-if",!0),F("div",{ref_key:"wrapperRef",ref:ge,class:B(N(u))},[P(" prefix slot "),e.$slots.prefix||e.prefixIcon?(E(),I("span",{key:0,class:B(N(re).e("prefix"))},[F("span",{class:B(N(re).e("prefix-inner"))},[V(e.$slots,"prefix"),e.prefixIcon?(E(),M(N(R),{key:0,class:B(N(re).e("icon"))},{default:_(()=>[(E(),M(j(e.prefixIcon)))]),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0),F("input",H({id:N(ne),ref_key:"input",ref:pe,class:N(re).e("inner")},N(s),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?fe.value?"text":"password":e.type,disabled:N(se),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:N(We),onCompositionupdate:N(Ae),onCompositionend:N(Ke),onInput:Oe,onChange:Te,onKeydown:qe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),P(" suffix slot "),N(Ve)?(E(),I("span",{key:1,class:B(N(re).e("suffix"))},[F("span",{class:B(N(re).e("suffix-inner"))},[N(Pe)&&N($e)&&N(Fe)?P("v-if",!0):(E(),I($,{key:0},[V(e.$slots,"suffix"),e.suffixIcon?(E(),M(N(R),{key:0,class:B(N(re).e("icon"))},{default:_(()=>[(E(),M(j(e.suffixIcon)))]),_:1},8,["class"])):P("v-if",!0)],64)),N(Pe)?(E(),M(N(R),{key:1,class:B([N(re).e("icon"),N(re).e("clear")]),onMousedown:L(N(W),["prevent"]),onClick:De},{default:_(()=>[O(N(T))]),_:1},8,["class","onMousedown"])):P("v-if",!0),N($e)?(E(),M(N(R),{key:2,class:B([N(re).e("icon"),N(re).e("password")]),onClick:Ue},{default:_(()=>[(E(),M(j(N(ke))))]),_:1},8,["class"])):P("v-if",!0),N(Fe)?(E(),I("span",{key:3,class:B(N(re).e("count"))},[F("span",{class:B(N(re).e("count-inner"))},A(N(Be))+" / "+A(e.maxlength),3)],2)):P("v-if",!0),N(Se)&&N(Ce)&&N(we)?(E(),M(N(R),{key:4,class:B([N(re).e("icon"),N(re).e("validateIcon"),N(re).is("loading","validating"===N(Se))])},{default:_(()=>[(E(),M(j(N(Ce))))]),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0)],2),P(" append slot "),e.$slots.append?(E(),I("div",{key:1,class:B(N(re).be("group","append"))},[V(e.$slots,"append")],2)):P("v-if",!0)],64)):(E(),I($,{key:1},[P(" textarea "),F("textarea",H({id:N(ne),ref_key:"textarea",ref:de,class:[N(ue).e("inner"),N(re).is("focus",N(ye))]},N(s),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:N(se),readonly:e.readonly,autocomplete:e.autocomplete,style:N(Ie),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:N(We),onCompositionupdate:N(Ae),onCompositionend:N(Ke),onInput:Oe,onFocus:N(he),onBlur:N(xe),onChange:Te,onKeydown:qe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),N(Fe)?(E(),I("span",{key:0,style:K(me.value),class:B(N(re).e("count"))},A(N(Be))+" / "+A(e.maxlength),7)):P("v-if",!0)],64))],38))}}),[["__file","input.vue"]]));export{de as E};
