import{_ as e}from"./BDziKWme.js";import{_ as l}from"./Dkgx1KFS.js";import{E as o,a}from"./DCawybvr.js";import{E as r}from"./7KO-WwAc.js";import{_ as s}from"./C5Pr72SQ.js";import{E as i,a as t}from"./CSNhwhPs.js";import{E as d}from"./BYBCH-HF.js";import{_ as m}from"./DFo55n29.js";import{e as u,g as p,z as n,r as b,I as v,h as f,c,o as w,b as g,a as j,t as y,w as _,n as C,i as E,d as h,j as $,F as V,cB as T,ah as k,_ as U}from"./BoLQ9Xhu.js";import"./7ACzQoE5.js";import{a as q,b as x}from"./C5jtWkR_.js";import{M as F}from"./esaz3ZoR.js";import"./oOeuh3JC.js";import"./CUjxzVkc.js";import"./k79prmI0.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./BmDvg8bE.js";import"./C_oH9tmG.js";import"./D5wp6cRH.js";import"./nqCHxoJt.js";import"./MzbMzCCn.js";import"./C4BNlK69.js";import"./DSXY0Md2.js";const A={class:"full-height-div"},S={class:"register-info"},Z={class:"title"},z={class:"label"},D={class:"area-code-select"},I={class:"label"},M={class:"label"},B={class:"label"},L=U(u({__name:"BindMobilePhone",setup(u){const U=p(),{t:L}=n(),R=b(!1),W=v(),P=(e,l,o)=>{H.value.tigTips[e]=l?{type:"valid",message:o}:{type:"error",message:o}},Q=e=>{H.value.tigTips[e]={type:"info",message:X[e]}},X=f({mobile:L("请填写正确的手机号码，以便接收订单通知，找回密码等"),mail:L("请填写正确的邮箱地址，以便接收订单通知，找回密码等"),mobileCode:L("请输入验证码"),password:L("6-20个大小写英文字母、符号或数字的组合")}),Y=f({mobile:[{validator:(e,l,o)=>l?/^(?=.*\D).+$/.test(l)?o(new Error(L("格式错误，请输入正确的手机号码"))):void o():o(new Error(L("手机号不能为空"))),trigger:"blur",required:!0}],mail:[{validator:(e,l,o)=>l?/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(l)?void o():o(new Error(L("格式错误，请输入正确的邮箱地址"))):o(new Error(L("邮箱不能为空"))),trigger:"blur",required:!0}],mobileCode:[{validator:(e,l,o)=>l?6!=l.length?o(new Error(L("请输入6位验证码"))):void o():o(new Error(L("验证码不能为空"))),trigger:"blur",required:!0}],password:[{validator:(e,l,o)=>l?l.length>20||l.length<6?o(new Error(L("密码应为6-20位字符"))):/\s/.test(l)?o(new Error(L("密码中不允许有空格"))):/^\d+$/.test(l)?o(new Error(L("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(l)?/^(?=.*[a-zA-Z0-9]).+$/.test(l)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(l)?void o():o(new Error(L("密码不能全为相同字符或数字"))):o(new Error(L("密码不能全为符号"))):o(new Error(L("密码不能全为字母"))):o(new Error(L("密码不能为空"))),trigger:"blur",required:!0}]}),G=b(!1),H=b({tigTips:{},areaCode:""}),J=async()=>{await W.value.validate();try{G.value=!0;const e=await x({...H.value,openData:U.openData});T.success(L("绑定成功")),U.setToken(e.token),U.userInfoLoaded=!1,k("/member/")}catch(e){T.error(e.message)}finally{G.value=!1}},K=e=>{T.error(e)};return(u,p)=>{const n=e,b=l,v=a,f=o,T=r,k=s,U=i,x=d,L=t,X=m;return w(),c(V,null,[g(n,{title:"绑定手机"}),g(b,{type:"register"}),j("div",A,[j("div",S,[j("div",Z,y(u.$t("绑定手机")),1),g(L,{ref_key:"formRef",ref:W,"hide-required-asterisk":!0,model:H.value,rules:$(Y),"show-message":!1,class:"form-body","label-width":"auto",onValidate:P},{default:_(()=>["mobile"!==H.value.registType&&H.value.registType?(w(),C(U,{key:1,prop:"mail"},{default:_(()=>[j("div",I,y(u.$t("邮箱")),1),g(T,{modelValue:H.value.mail,"onUpdate:modelValue":p[3]||(p[3]=e=>H.value.mail=e),class:"input-border-style",onFocus:p[4]||(p[4]=e=>Q("mail"))},null,8,["modelValue"]),g(k,{info:H.value.tigTips.mail},null,8,["info"])]),_:1})):(w(),C(U,{key:0,prop:"mobile"},{default:_(()=>[j("div",z,y(u.$t("手机号")),1),g(T,{modelValue:H.value.mobile,"onUpdate:modelValue":p[1]||(p[1]=e=>H.value.mobile=e),class:"input-border-style",style:{},onFocus:p[2]||(p[2]=e=>Q("mobile"))},{prefix:_(()=>[j("div",D,[g(f,{modelValue:H.value.areaCode,"onUpdate:modelValue":p[0]||(p[0]=e=>H.value.areaCode=e),placeholder:u.$t("请选择区号")},{default:_(()=>[g(v,{label:"(+86)"+u.$t("中国"),value:""},null,8,["label"]),g(v,{label:"(+61)"+u.$t("澳洲"),value:"+61"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])])]),_:1},8,["modelValue"]),g(k,{info:H.value.tigTips.mobile},null,8,["info"])]),_:1})),E("",!0),g(U,{prop:"mobileCode"},{default:_(()=>[j("div",M,y(u.$t("验证码")),1),g(T,{modelValue:H.value.mobileCode,"onUpdate:modelValue":p[10]||(p[10]=e=>H.value.mobileCode=e),class:"input-border-style",onFocus:p[11]||(p[11]=e=>Q("mobileCode"))},{suffix:_(()=>[g($(F),{class:"mobile-code-text",mobile:H.value.mobile,"onUpdate:mobile":p[7]||(p[7]=e=>H.value.mobile=e),mobileCode:H.value.mobileCode,"onUpdate:mobileCode":p[8]||(p[8]=e=>H.value.mobileCode=e),mobileCodeSended:R.value,"onUpdate:mobileCodeSended":p[9]||(p[9]=e=>R.value=e),requestApi:$(q),onMobileErrorCallback:K},null,8,["mobile","mobileCode","mobileCodeSended","requestApi"])]),_:1},8,["modelValue"]),g(k,{info:H.value.tigTips.mobileCode},null,8,["info"])]),_:1}),g(U,{prop:"password"},{default:_(()=>[j("div",B,y(u.$t("设置密码")),1),g(T,{modelValue:H.value.password,"onUpdate:modelValue":p[12]||(p[12]=e=>H.value.password=e),class:"input-border-style","show-password":"",type:"password",onFocus:p[13]||(p[13]=e=>Q("password"))},null,8,["modelValue"]),g(k,{info:H.value.tigTips.password},null,8,["info"])]),_:1}),g(U,{label:"",prop:"firstWord"},{default:_(()=>[g(x,{loading:G.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:J},{default:_(()=>[h(y(u.$t("确认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])]),g(X,{bg:"white",type:0})],64)}}}),[["__scopeId","data-v-43e2277b"]]);export{L as default};
