import{E as e}from"./7KO-WwAc.js";import{E as a}from"./BYBCH-HF.js";import{_ as t}from"./Bq7w2nvu.js";import{_ as l}from"./CUjxzVkc.js";import{e as s,z as o,r as i,h as r,df as d,y as n,c as u,o as c,i as m,a as p,ad as y,F as v,m as k,x as f,t as b,b as h,w as g,d as w,j as $,s as _,E as S,k as x,n as I,p as C,an as T,ah as V,_ as z}from"./BoLQ9Xhu.js";import{_ as j}from"./CACs9nxh.js";import{E as A}from"./Y9Rb4YJs.js";import{v as N}from"./D3Ou390f.js";import"./7ACzQoE5.js";import{g as P,c as U,d as O,r as L,a as E,b as F}from"./-srO5WKH.js";import{P as R}from"./DkwbP8TR.js";import{L as q}from"./D5e2aJdX.js";const H={class:"order-list"},M={key:0,class:"tag-and-input"},Q={class:"tig-tabs"},X=["onClick"],Z={key:0},B={class:"input"},D={class:"order-title"},G={class:"ul"},J={style:{width:"23%"}},K={style:{width:"28%"}},W={key:1,style:{width:"49%"}},Y={style:{width:"6%"}},ee={style:{width:"12%"}},ae={style:{width:"14%"}},te={style:{width:"12%"}},le={class:"order-table"},se={colspan:"4",class:"order-table-title"},oe={class:"font-color"},ie={key:0,style:{"margin-left":"30px"}},re={class:"font-color"},de={style:{"margin-left":"30px"}},ne={class:"order-tr"},ue={class:"column-1"},ce={class:"text-ellipsis"},me={style:{color:"#aaa"}},pe={class:"column-2-4"},ye={class:"black"},ve={class:"money"},ke={class:"column-2-4"},fe={class:"black"},be={key:0,class:"black"},he={style:{cursor:"pointer"}},ge={class:"column-2-4"},we={key:0},$e=["onClick"],_e=["onClick"],Se={key:3,class:"mb10"},xe={key:4,class:"mb10"},Ie={key:5,class:"mb10"},Ce={key:6,class:"mb10"},Te={key:7,class:"mb10"},Ve={class:"el-page"},ze={key:1,class:"no-result"},je={key:0},Ae={key:1},Ne={style:{"font-size":"12px"}},Pe=z(s({__name:"MemberOrderList",props:{modelValue:{type:Number,default:1}},emits:["change"],setup(s,{emit:z}){const{t:Pe}=o(),Ue=i([]),Oe=i(!0),Le=i(0),Ee=r({page:1,sortField:"addTime",sortOrder:"desc",keyword:"",payStatus:-1,dateType:1}),Fe=d(),Re=i("all"),qe=r([{type:"all",value:"全部订单",num:0},{type:"awaitPay",value:"待支付",num:0},{type:"awaitShipping",value:"待发货",num:0},{type:"awaitReceived",value:"待收货",num:0},{type:"awaitComment",value:"待评价",num:0}]),He=e=>{Ee.page=1,Ee.orderStatus=-1,Ee.commentStatus=-1,"awaitPay"===e?Ee.orderStatus=0:"awaitShipping"===e?Ee.orderStatus=1:"awaitReceived"===e?Ee.orderStatus=2:"awaitComment"===e&&(Ee.commentStatus=0),Re.value=e,Xe()},Me=async()=>{Oe.value=!0;try{const e=await P();qe.forEach(a=>{let t=e;void 0!==t[a.type]&&(a.num=t[a.type])})}catch(e){C.error(e.message)}finally{Oe.value=!1}};r([{value:-1,label:"交易状态"},{value:0,label:"未支付"},{value:2,label:"已支付"}]);const Qe=r([{value:0,label:"全部订单"},{value:1,label:"最近三个月订单"},{value:2,label:"最近六个月订单"},{value:3,label:"最近一年内订单"}]),Xe=async()=>{Oe.value=!0;try{Le.value=0;const e=await F({...Ee});Ue.value=e.records,Le.value=e.total}catch(e){C.error(e.message)}finally{Oe.value=!1}};return n(()=>{Me().then(()=>{He(Fe.query.type||"all"),Xe()})}),(o,i)=>{const r=e,d=a,n=t,z=l,P=S,F=j,Fe=A,Ze=N;return c(),u("div",H,[s.modelValue?(c(),u("div",M,[p("div",Q,[(c(!0),u(v,null,k(qe,e=>(c(),u("div",{class:f([Re.value==e.type?"active":"","tab"]),onClick:a=>He(e.type)},[e.num?(c(),u("span",Z,b(e.num),1)):m("",!0),p("p",null,b(o.$t(e.value)),1)],10,X))),256))]),p("div",B,[h(r,{modelValue:Ee.keyword,"onUpdate:modelValue":i[0]||(i[0]=e=>Ee.keyword=e),placeholder:o.$t("收货人名称或订单号"),type:"text"},null,8,["modelValue","placeholder"]),h(d,{class:"ml10",onClick:i[1]||(i[1]=e=>Xe())},{default:g(()=>[w(b(o.$t("搜索")),1)]),_:1})])])):m("",!0),p("div",D,[p("div",G,[s.modelValue?(c(),u(v,{key:0},[p("div",J,[h(n,{modelValue:Ee.dateType,"onUpdate:modelValue":i[2]||(i[2]=e=>Ee.dateType=e),selectList:Qe,onLoadFilter:Xe},null,8,["modelValue","selectList"])]),p("div",K,b(o.$t("商品名称")),1)],64)):(c(),u("div",W,b(o.$t("商品名称")),1)),p("div",Y,b(o.$t("数量")),1),i[5]||(i[5]=p("div",{style:{width:"7%"}},null,-1)),p("div",ee,b(o.$t("金额")),1),p("div",ae,b(o.$t("交易状态")),1),p("div",te,b(o.$t("操作")),1)])]),y((c(),u("div",null,[Le.value>0?(c(),u(v,{key:0},[(c(!0),u(v,null,k(Ue.value,(e,a)=>(c(),u("table",le,[p("thead",null,[p("tr",null,[p("th",se,[w(b(o.$t("订单号"))+"：",1),h(z,{to:"/member/order/info?id="+e.orderId,target:"_blank"},{default:g(()=>[p("span",oe,b(e.orderSn),1)]),_:2},1032,["to"]),e.shop&&e.shop.shopTitle?(c(),u("span",ie,[w(b(o.$t("下单店铺"))+"：",1),h(z,{to:$(_)({path:"shop",id:e.shopId}),target:"_blank"},{default:g(()=>[p("span",re,b(e.shop.shopTitle),1)]),_:2},1032,["to"])])):m("",!0),p("span",de,b(o.$t("下单时间"))+"："+b(e.addTime),1)])])]),p("tbody",null,[p("tr",ne,[p("td",ue,[(c(!0),u(v,null,k(e.items,e=>(c(),u("div",null,[h(z,{title:e.productName,to:$(_)({path:"product",id:e.productId,sn:e.productSn}),class:"nuxt",target:"_blank"},{default:g(()=>[h(P,{src:("imageFormat"in o?o.imageFormat:$(x))(e.picThumb),loading:"lazy",style:{height:"40px",width:"40px",transition:"opacity 0.2s linear","flex-shrink":"0"}},null,8,["src"]),p("div",null,[p("div",ce,b(e.productName),1)])]),_:2},1032,["title","to"]),p("div",me,"X"+b(e.quantity),1),i[6]||(i[6]=p("div",null,null,-1))]))),256))]),p("td",pe,[p("div",null,[p("div",null,[w(b(o.$t("总额"))+": ",1),h(F,{modelValue:e.totalAmount,"onUpdate:modelValue":a=>e.totalAmount=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),0==e.orderStatus&&e.unpaidAmount>0?(c(),u(v,{key:0},[p("div",ye,b(o.$t("应付")),1),p("div",ve,[h(F,{modelValue:e.unpaidAmount,"onUpdate:modelValue":a=>e.unpaidAmount=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])])],64)):m("",!0),p("div",null,b(1===e.payTypeId?o.$t("在线支付"):2===e.payTypeId?o.$t("货到付款"):o.$t("线下支付")),1)])]),p("td",ke,[p("div",null,[p("div",{class:f({orange:0===e.orderStatus,black:1===e.orderStatus||2===e.orderStatus||4===e.orderStatus,gray:3===e.orderStatus,green:5===e.orderStatus})},b(o.$t(e.orderStatusName)),3),p("div",fe,[h(z,{to:"/member/order/info?id="+e.orderId,target:"_blank"},{default:g(()=>[w(b(o.$t("订单详情")),1)]),_:2},1032,["to"])]),2!=e.orderStatus&&5!=e.orderStatus||1!=e.shippingMethod?m("",!0):(c(),u("div",be,[h(Fe,{width:600,placement:"bottom",onShow:a=>e.showPopover=!0,onHide:a=>e.showPopover=!1},{reference:g(()=>[p("span",he,[p("i",null,b(o.$t("物流跟踪")),1),i[7]||(i[7]=p("i",{style:{"font-size":"12px"},class:"iconfont-pc icon-xiajiantou1"},null,-1))])]),default:g(()=>[e.showPopover?(c(),I(q,{key:0,trackingNo:e.trackingNo,logisticsName:e.logisticsName,id:e.orderId},null,8,["trackingNo","logisticsName","id"])):m("",!0)]),_:2},1032,["onShow","onHide"])]))])]),p("td",ge,[p("div",null,[e.availableActions.toPay?(c(),u("div",we,[h(z,{to:"/order/pay/?id="+e.orderId,target:"_balnk"},{default:g(()=>[h(d,{size:"small",type:"primary"},{default:g(()=>[w(b(o.$t("付款")),1)]),_:1})]),_:2},1032,["to"])])):m("",!0),e.availableActions.cancelOrder?(c(),u("a",{key:1,onClick:a=>(async e=>{T.confirm({title:Pe("确认要取消该订单吗"),cancelText:Pe("取消"),okText:Pe("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await U({id:e}),C.success(Pe("取消成功")),await Xe(),await Me()}catch(a){C.error(a.message)}}})})(e.orderId)},b(o.$t("取消订单")),9,$e)):m("",!0),e.availableActions.delOrder?(c(),u("a",{key:2,onClick:a=>(async e=>{T.confirm({title:Pe("确认要删除该订单吗"),cancelText:Pe("取消"),okText:Pe("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await O({id:e}),C.success(Pe("删除成功")),await Xe(),await Me()}catch(a){C.error(a.message)}}})})(e.orderId)},b(o.$t("删除")),9,_e)):m("",!0),e.availableActions.confirmReceipt?(c(),u("div",Se,[h(d,{type:"primary",size:"small",onClick:a=>(async e=>{T.confirm({title:Pe("确认要收货吗"),cancelText:Pe("取消"),okText:Pe("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await E({id:e}),Xe(),Me()}catch(a){C.error(a.message)}}})})(e.orderId)},{default:g(()=>[w(b(o.$t("确认收货")),1)]),_:2},1032,["onClick"])])):m("",!0),e.availableActions.toAftersales?(c(),u("div",xe,[h(z,{to:"/member/return/info/?orderId="+e.orderId},{default:g(()=>[h(d,{size:"small"},{default:g(()=>[w(b(o.$t("申请售后")),1)]),_:1})]),_:2},1032,["to"])])):m("",!0),e.items&&e.items[0]?.aftersalesItem?(c(),u("div",Ie,[h(z,{to:"/member/return/logInfo?id="+e.items[0]?.aftersalesItem?.aftersaleId},{default:g(()=>[h(d,{size:"small"},{default:g(()=>[w(b(o.$t("售后详情")),1)]),_:1})]),_:2},1032,["to"])])):m("",!0),e.availableActions.rebuy?(c(),u("div",Ce,[h(d,{size:"small",onClick:a=>(async e=>{try{await L({id:e}),V("/cart")}catch(a){C.error(a.message)}})(e.orderId)},{default:g(()=>[w(b(o.$t("再次购买")),1)]),_:2},1032,["onClick"])])):m("",!0),e.availableActions.toComment?(c(),u("div",Te,[h(z,{to:"/member/comment/info/?id="+e.orderId},{default:g(()=>[h(d,{size:"small"},{default:g(()=>[w(b(o.$t("去评价")),1)]),_:1})]),_:2},1032,["to"])])):m("",!0)])])])])]))),256)),p("div",Ve,[h($(R),{page:Ee.page,"onUpdate:page":i[3]||(i[3]=e=>Ee.page=e),size:Ee.size,"onUpdate:size":i[4]||(i[4]=e=>Ee.size=e),total:Le.value,onCallback:Xe},null,8,["page","size","total"])])],64)):(c(),u("div",ze,[Oe.value?m("",!0):(c(),u("div",je,i[8]||(i[8]=[p("span",{class:"sign sign1"},null,-1)]))),Oe.value?m("",!0):(c(),u("div",Ae,[p("ul",null,[p("li",null,b(o.$t("当前筛选下还没有任何订单哦")),1),p("li",Ne,[w(b(o.$t("现在就去"))+"： ",1),h(z,{class:"font-color",to:"/"},{default:g(()=>[w(b(o.$t("选购商品")),1)]),_:1})])])]))]))])),[[Ze,Oe.value]])])}}}),[["__scopeId","data-v-6955e256"]]);export{Pe as _};
