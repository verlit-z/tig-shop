import{aN as e,e as l,cA as a,aA as s,r as n,y as t,z as u,v as i,B as v,c,o,a as r,i as d,F as g,m as h,d as p,t as m,x as f,aj as k,_ as y}from"./BoLQ9Xhu.js";/* empty css        */const _={class:"flex align-center"},x={key:0},j={key:1},w={key:0,class:"select_popup"},C={class:"top flex justify-between"},b={class:"tabs flex"},I=["onClick"],E={key:0,class:"sec_childs"},N=["onClick"],V=y(l({__name:"SelectRegion",props:{modelValue:{default:[]},modelModifiers:{}},emits:a(["change"],["update:modelValue"]),setup(l,{emit:a}){const y=s(l,"modelValue"),V=n(!1),A=n([]),L=n(0),R=a;t(()=>{$()});const{t:S}=u(),$=async()=>{try{let a=y.value.join();const s=await(l=a,e({url:"sys/region/getRegion",method:"get",params:{regionIds:l}}));Object.assign(A.value,s),A.value.length>1?A.value[A.value.length-1].length>0?L.value=A.value.length-1:L.value=A.value.length-2:L.value=0}catch(a){}var l},z=e=>y.value.includes(e),B=()=>{V.value=!0,$()},F=i(()=>{let e=[];return A.value.forEach((l,a)=>{if(l.length>0){let s=!1;l.forEach(l=>{z(l.regionId)&&(e[a]=l.regionName,s=!0)}),0==s&&(e[a]=S("请选择地区"))}}),e}),M=()=>{!0===V.value&&y.value.length!=F.value.length&&(y.value=[],A.value=[],L.value=0),V.value=!1},O=n(null),P=e=>{O.value&&!O.value.contains(e.target)&&M()};return t(()=>{window.addEventListener("click",P)}),v(()=>{window.removeEventListener("click",P)}),(e,l)=>(o(),c("div",{class:"select_region_box",ref_key:"selectPop",ref:O},[r("div",_,[r("div",{class:"select_region hand-pointer flex align-center",onClick:B},[F.value.length>0?(o(),c("div",x,[(o(!0),c(g,null,h(F.value,(e,l)=>(o(),c(g,null,[p(m(e)+" ",1)],64))),256))])):d("",!0),0==F.value.length?(o(),c("div",j,m(e.$t("请选择地区")),1)):d("",!0),l[0]||(l[0]=r("i",{class:"iconfont-pc icon-xiajiantou"},null,-1))])]),V.value?(o(),c("div",w,[r("div",C,[r("div",b,[(o(!0),c(g,null,h(F.value,(l,a)=>(o(),c("div",{class:f(["tab",{cur:L.value===a}]),onClick:e=>L.value=a},m(l||e.$t("请选择")),11,I))),256))]),A.value.length==L.value+1?(o(),c("div",{key:0,class:"selectclose",onClick:k(M,["stop"])},"×")):d("",!0)]),(o(!0),c(g,null,h(A.value,(e,l)=>(o(),c(g,null,[L.value===l?(o(),c("div",E,[(o(!0),c(g,null,h(e,e=>(o(),c("span",{class:f(["sec_item",{active:z(e.regionId)}]),onClick:a=>(async(e,l)=>{e>=0&&e<=y.value.length&&(y.value[e]=l,y.value.splice(e+1)),await $(),A.value.length==e+1||0==A.value[e+1].length?V.value=!1:L.value=e+1,R("change")})(l,e.regionId)},m(e.regionName),11,N))),256))])):d("",!0)],64))),256))])):d("",!0)],512))}}),[["__scopeId","data-v-e9d1d549"]]);export{V as S};
