import{b as s}from"./C0PQcRxs.js";import{_ as e}from"./BDziKWme.js";import{_ as a}from"./CACs9nxh.js";import{_ as t}from"./DFo55n29.js";import{v as o}from"./D3Ou390f.js";import{e as i,r as l,h as r,ar as c,z as n,y as p,c as m,o as u,b as d,a as y,ad as v,t as j,j as f,F as h,m as D,i as $,n as g,d as k,l as _,p as w,_ as I}from"./BoLQ9Xhu.js";import{g as N,a as x}from"./DcQNvcck.js";import"./Bk7c1JMx.js";import"./CUjxzVkc.js";import"./MzbMzCCn.js";import"./BYBCH-HF.js";import"./nqCHxoJt.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./BSss4uk8.js";import"./k79prmI0.js";import"./DCawybvr.js";import"./7ACzQoE5.js";import"./BmDvg8bE.js";import"./C_oH9tmG.js";import"./D5wp6cRH.js";import"./Y9Rb4YJs.js";/* empty css        */import"./C-LthTfX.js";import"./7KO-WwAc.js";import"./DwsKuIG7.js";import"./oOeuh3JC.js";import"./C4BNlK69.js";const S={class:"container coupon-list"},T={class:"title"},b={class:"com-pc-title"},R={class:"coupon-card-list"},V=["onClick"],z={class:"left-card"},M={key:1,class:"coupon_discount"},q={class:"name"},C={key:0,class:"time"},F={key:1,class:"time"},L={key:2,class:"time"},U={key:3,class:"name desc"},E={class:"right-card"},H={class:"text"},P={key:1,class:"no-result"},Q={key:0},W=I(i({__name:"List",setup(i){const I=l([]),W=l(!0),X=l(0),Y=r({page:1,isShow:1,shopId:-1}),Z=c(),A=async()=>{W.value=!0;try{Z.currentRoute.value.query.shopId&&(Y.shopId=Number(Z.currentRoute.value.query.shopId));const s=await N({...Y});X.value=s.total,I.value=s.records}catch(s){w.error(s.message)}finally{W.value=!1}},{t:B}=n();p(()=>{A()});const G=(s,e,a)=>0===e?1===s?"已领取":a>0?"再次领取":"马上领":0===s?"马上领":a>=e?"已领取":"再次领取";return(i,l)=>{const r=s,c=e,n=a,p=t,N=o;return u(),m(h,null,[d(r),d(c,{title:i.$t("集券中心")},null,8,["title"]),y("div",S,[y("div",T,[l[0]||(l[0]=y("div",{class:"title-image-left"},null,-1)),y("div",b,j(i.$t("集券中心")),1),l[1]||(l[1]=y("div",{class:"title-image-right"},null,-1))]),v((u(),m("div",R,[f(X)>0?(u(!0),m(h,{key:0},D(f(I),s=>(u(),m("div",{class:"card",onClick:e=>(async s=>{if(G(s.isReceive,s.limitNum,s.receiveNum)!==B("已领取"))try{await x({couponId:s.couponId}),w.success("领取成功"),await A()}catch(e){w.error(e.message)}finally{W.value=!1}else w.warning("您已超出领取上限")})(s)},[y("div",z,[y("div",null,[1==s.couponType?(u(),g(n,{key:0,modelValue:s.couponMoney,"onUpdate:modelValue":e=>s.couponMoney=e,showText:!1,currencyStyle:{fontSize:"24px",fontFamily:"Verdana, serif",lineHeight:"41px"},fontStyle:{fontSize:"40px",fontWeight:"bold"},class:"card-price"},null,8,["modelValue","onUpdate:modelValue"])):(u(),m("div",M,[k(j(s.couponDiscount),1),y("span",null,j(i.$t("折")),1)]))]),y("div",q,j(i.$t(s.couponName)?"【"+i.$t(s.couponName)+"】":""),1),1==s.sendType?(u(),m("div",C,j(s.useStartDate)+" "+j(i.$t("至"))+" "+j(s.useEndDate),1)):$("",!0),0==s.sendType&&s.delayDay>0?(u(),m("div",F,j(f(_)()?i.$t("领券{0}天后生效，有效期{1}天",[s.delayDay,s.useDay]):`领券${s.delayDay}天后生效，有效期${s.useDay}天`),1)):$("",!0),0==s.sendType&&0==s.delayDay?(u(),m("div",L,j(f(_)()?i.$t("领券当日起{0}天内可用",[s.useDay]):`领券当日起${s.useDay}天内可用`),1)):$("",!0),s.couponDesc?(u(),m("view",U,j(s.couponDesc),1)):$("",!0)]),y("div",E,[l[2]||(l[2]=y("span",{class:"division_line"},null,-1)),y("span",H,j(G(s.isReceive,s.limitNum,s.receiveNum)),1)])],8,V))),256)):(u(),m("div",P,[f(W)?$("",!0):(u(),m("span",Q,j(i.$t("暂无可领取的优惠券"))+"～",1))]))])),[[N,f(W)]])]),d(p)],64)}}}),[["__scopeId","data-v-e08cae1a"]]);export{W as default};
