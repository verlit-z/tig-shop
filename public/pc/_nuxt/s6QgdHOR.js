import{b as l}from"./C0PQcRxs.js";import{_ as e}from"./BDziKWme.js";import{_ as a}from"./SixI1hze.js";import{_ as t}from"./BMSLTx3B.js";import{E as s}from"./BYBCH-HF.js";import{E as r}from"./7KO-WwAc.js";import{E as u,a as o}from"./CSNhwhPs.js";import{e as n,z as i,r as d,ar as c,y as m,p,I as v,h as f,c as y,o as h,b as g,a as b,i as j,ad as V,t as $,n as x,w as k,d as w,F as _,m as U,q as F,E as N,j as T,k as I,s as L,an as S,ah as q,_ as A}from"./BoLQ9Xhu.js";import{_ as B}from"./CUjxzVkc.js";import{_ as E}from"./CACs9nxh.js";import{_ as P}from"./DFo55n29.js";import{E as z}from"./mHIovD83.js";import{v as C}from"./D3Ou390f.js";import"./DwsKuIG7.js";import{a as R,u as O,c as D}from"./CDMKtN-R.js";import{U as G}from"./De9yxv7K.js";import"./Bk7c1JMx.js";import"./MzbMzCCn.js";import"./BSss4uk8.js";import"./k79prmI0.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./nqCHxoJt.js";import"./DCawybvr.js";import"./7ACzQoE5.js";import"./BmDvg8bE.js";import"./C_oH9tmG.js";import"./D5wp6cRH.js";import"./Y9Rb4YJs.js";/* empty css        */import"./C-LthTfX.js";import"./oOeuh3JC.js";import"./C4BNlK69.js";import"./DFr8_2Ck.js";const M={class:"container flex"},Q={class:"menu"},X={class:"info-row"},Y={class:"title-or-tabs"},Z={class:"tag-and-input"},H={class:"tig-tabs"},J={key:0,class:"title-or-tabs"},K={key:1,class:"log-return-content"},W={class:"button-col"},ll={class:"tig-steps"},el={style:{"font-weight":"600"}},al={key:0,class:"file-card"},tl={class:"info-card"},sl={class:"table-header"},rl={class:"header-cell"},ul={class:"header-cell",style:{width:"60px"}},ol={class:"header-cell",style:{width:"60px"}},nl={class:"header-cell",style:{width:"60px"}},il={class:"header-cell",style:{width:"60px"}},dl={class:"text-ellipsis"},cl={class:"name"},ml={class:"value"},pl={key:0},vl={class:"info-card"},fl={key:0},yl={class:"application-picture"},hl={key:0},gl={key:1},bl={key:2},jl={class:"info-card"},Vl={class:"table-header"},$l={class:"header-cell",style:{width:"120px"}},xl={class:"header-cell",style:{width:"160px"}},kl={class:"header-cell"},wl={class:"bt-image"},_l={key:2,class:"log-return-content"},Ul={class:"image"},Fl=A(n({__name:"LogInfo",setup(n){const{t:A}=i(),Fl=d(""),Nl=d(!1),Tl=d([]),Il=c(),Ll=d({stepStatus:{},picsList:[],returnPic:[],pics:[]}),Sl=d(!0);m(()=>{ql()});const ql=async()=>{try{Sl.value=!0;const l=await R({id:Il.currentRoute.value.query.id});Object.assign(Ll.value,l),Tl.value=l.aftersalesItems?l.aftersalesItems:[],Tl.value?.forEach(l=>{l.subtotal=l.quantity*l.price})}catch(l){p.error(l.message)}finally{Sl.value=!1}},Al=v(),Bl=async()=>{await Al.value.validate();try{await O({id:Ll.value.aftersaleId,...Ll.value});p.success(A("提交成功")),await Al.value.resetFields(),await ql()}catch(l){p.error(l.message)}},El=f([{value:"退/换货申请",url:"/member/return/list",size:0},{value:"申请记录",url:"/member/return/log",size:0}]);return(n,i)=>{const d=l,c=e,m=a,v=t,f=s,R=r,O=u,Il=o,ql=N,Pl=B,zl=E,Cl=P,Rl=z,Ol=C;return h(),y(_,null,[g(d),g(c,{title:"申请详情"}),b("div",M,[b("div",Q,[g(m)]),b("div",X,[b("div",Y,[b("div",Z,[b("div",H,[g(v,{menuList:El},null,8,["menuList"])])])]),Ll.value.returnGoodsTip?(h(),y("div",J,[b("div",null,$(Ll.value.returnGoodsTip),1)])):j("",!0),Sl.value?V((h(),y("div",_l,null,512)),[[Ol,Sl.value]]):(h(),y("div",K,[b("div",W,[Ll.value.canCancel?(h(),x(f,{key:0,onClick:i[0]||(i[0]=l=>(async l=>{S.confirm({title:A("确认删要撤销申请吗"),cancelText:A("取消"),okText:A("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await D({aftersaleId:l}),p.success(A("撤销成功")),q("/member/return/log")}catch(e){p.error(e.message)}}})})(Number(Ll.value.aftersaleId)))},{default:k(()=>[w($(n.$t("撤销")),1)]),_:1})):j("",!0)]),b("div",ll,[(h(!0),y(_,null,U(Ll.value.stepStatus.steps,(l,e)=>(h(),y(_,null,[b("div",{style:F({color:l.active?"var(--general)":"#c4c4c4",border:l.active?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[b("div",el,$(e+1),1),b("div",{style:F({color:l.active?"var(--general)":"#333"}),class:"card-text"},[b("div",null,$(l.title),1),b("div",null,$(l.description),1)],4)],4),e!=Number((Ll.value?.stepStatus?.steps?.length?Ll.value?.stepStatus?.steps?.length:0)-1)?(h(),y("div",{key:0,style:F({backgroundColor:Ll.value.stepStatus.steps[e+1].active?"var(--general)":"#eee"}),class:"steps-line"},null,4)):j("",!0)],64))),256))]),6!=Ll.value.status?(h(),y("div",al,[7!=Ll.value.status?(h(),x(Il,{key:0,ref_key:"formRef",ref:Al,"label-width":100,model:Ll.value,class:"form-body","label-suffix":"："},{default:k(()=>[g(O,{label:n.$t("问题补充"),prop:"logInfo"},{default:k(()=>[g(R,{modelValue:Ll.value.logInfo,"onUpdate:modelValue":i[1]||(i[1]=l=>Ll.value.logInfo=l),row:4,clearable:"",placeholder:n.$t("请输入问题补充"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),4===Ll.value.status?(h(),y(_,{key:0},[g(O,{label:n.$t("回寄地址"),prop:"returnAddress"},{default:k(()=>[g(R,{modelValue:Ll.value.returnAddress,"onUpdate:modelValue":i[2]||(i[2]=l=>Ll.value.returnAddress=l),readonly:"",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),g(O,{rules:[{required:!0,message:n.$t("快递公司不能为空!")}],label:n.$t("快递公司"),prop:"logisticsName"},{default:k(()=>[g(R,{modelValue:Ll.value.logisticsName,"onUpdate:modelValue":i[3]||(i[3]=l=>Ll.value.logisticsName=l),clearable:"",placeholder:n.$t("请输入快递公司")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),g(O,{rules:[{required:!0,message:n.$t("快递单号不能为空!")}],label:n.$t("快递单号"),prop:"trackingNo"},{default:k(()=>[g(R,{modelValue:Ll.value.trackingNo,"onUpdate:modelValue":i[4]||(i[4]=l=>Ll.value.trackingNo=l),clearable:"",placeholder:n.$t("请输入快递单号"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])],64)):j("",!0),g(O,{label:n.$t("上传文件"),prop:"returnPic"},{default:k(()=>[g(G,{uploadList:Ll.value.returnPic,"onUpdate:uploadList":i[5]||(i[5]=l=>Ll.value.returnPic=l),fileTypes:["jpeg","png"],limit:5},null,8,["uploadList"])]),_:1},8,["label"]),g(O,{label:""},{default:k(()=>[g(f,{type:"primary",onClick:Bl},{default:k(()=>[w($(n.$t("提交")),1)]),_:1})]),_:1})]),_:1},8,["model"])):j("",!0)])):j("",!0),b("div",tl,[b("table",null,[b("thead",sl,[b("tr",null,[b("th",rl,$(n.$t("商品名称")),1),b("th",ul,$(n.$t("商品价格")),1),b("th",ol,$(n.$t("购买数量")),1),b("th",nl,$(n.$t("小计")),1),b("th",il,$(n.$t("退/换数量")),1)])]),b("tbody",null,[(h(!0),y(_,null,U(Tl.value,l=>(h(),y("tr",null,[b("td",null,[g(Pl,{title:l.productName,to:T(L)({path:"product",id:l.itemId,sn:l.productSn}),class:"nuxt",target:"_blank"},{default:k(()=>[g(ql,{src:("imageFormat"in n?n.imageFormat:T(I))(l.picThumb),class:"pro_pic",loading:"lazy",style:{transition:"opacity 0.2s linear","flex-shrink":"0"}},null,8,["src"]),b("div",null,[b("div",dl,[b("ul",null,[b("li",null,$(n.$t("货号"))+"："+$(l.productSn),1),b("li",null,$(l.productName),1),b("li",null,[(h(!0),y(_,null,U(l.skuData,(e,a)=>(h(),y(_,null,[b("span",cl,$(e.name)+"：",1),b("span",ml,$(e.value),1),a<l.skuData?.length-1?(h(),y("span",pl,"；")):j("",!0)],64))),256))])])])])]),_:2},1032,["title","to"])]),b("td",null,[g(zl,{modelValue:l.price,"onUpdate:modelValue":e=>l.price=e,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),b("td",null,$(l.quantity),1),b("td",null,[g(zl,{modelValue:l.subtotal,"onUpdate:modelValue":e=>l.subtotal=e,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),b("td",null,$(l.number),1)]))),256))])])]),b("div",vl,[b("table",null,[b("tbody",null,[b("tr",null,[b("td",null,$(n.$t("买家问题描述"))+":",1),b("td",null,$(Ll.value.description),1)]),b("tr",null,[b("td",null,$(n.$t("服务类型"))+":",1),b("td",null,$(Ll.value.aftersalesTypeName),1)]),b("tr",null,[b("td",null,$(n.$t("退款金额"))+":",1),b("td",null,[g(zl,{modelValue:Ll.value.refundAmount,"onUpdate:modelValue":i[6]||(i[6]=l=>Ll.value.refundAmount=l),showText:!1},null,8,["modelValue"])])]),b("tr",null,[b("td",null,$(n.$t("售后类型"))+":",1),b("td",null,$(Ll.value.aftersaleReason),1)]),4===Ll.value.status?(h(),y("tr",fl,[b("td",null,$(n.$t("退货地址"))+":",1),b("td",null,$(Ll.value.returnAddress),1)])):j("",!0),b("tr",null,[b("td",null,$(n.$t("申请图片"))+":",1),b("td",null,[b("div",yl,[(h(!0),y(_,null,U(Ll.value.pics,l=>(h(),x(ql,{src:("imageFormat"in n?n.imageFormat:T(I))(l.picThumb),fit:"cover",style:{width:"80px",height:"80px"},"preview-src-list":[("imageFormat"in n?n.imageFormat:T(I))(l.picUrl)],"initial-index":0},null,8,["src","preview-src-list"]))),256))])])]),Ll.value.refund?(h(),y(_,{key:1},[Ll.value.refund.isOnline>0?(h(),y("tr",hl,[b("td",null,$(n.$t("线上退款金额"))+":",1),b("td",null,[g(zl,{modelValue:Ll.value.refund.onlineBalance,"onUpdate:modelValue":i[7]||(i[7]=l=>Ll.value.refund.onlineBalance=l),showText:!1},null,8,["modelValue"])])])):j("",!0),Ll.value.refund.isOffline>0?(h(),y("tr",gl,[b("td",null,$(n.$t("线下退款金额"))+":",1),b("td",null,[g(zl,{modelValue:Ll.value.refund.offlineBalance,"onUpdate:modelValue":i[8]||(i[8]=l=>Ll.value.refund.offlineBalance=l),showText:!1},null,8,["modelValue"])])])):j("",!0),Ll.value.refund.isReceive>0?(h(),y("tr",bl,[b("td",null,$(n.$t("余额退款金额"))+":",1),b("td",null,[g(zl,{modelValue:Ll.value.refund.refundBalance,"onUpdate:modelValue":i[9]||(i[9]=l=>Ll.value.refund.refundBalance=l),showText:!1},null,8,["modelValue"])])])):j("",!0)],64)):j("",!0)])])]),b("div",jl,[b("table",null,[b("thead",Vl,[b("tr",null,[b("th",$l,$(n.$t("发言人")),1),b("th",xl,$(n.$t("时间")),1),b("th",kl,$(n.$t("信息")),1)])]),b("tbody",null,[(h(!0),y(_,null,U(Ll.value.aftersalesLog,l=>(h(),y("tr",null,[b("td",null,$(l.userName?l.userName:l.adminName),1),b("td",null,$(l.addTime),1),b("td",null,[b("div",wl,[b("div",null,$(l.logInfo),1),(h(!0),y(_,null,U(l.returnPic,l=>(h(),x(ql,{src:("imageFormat"in n?n.imageFormat:T(I))(l.picUrl),fit:"cover",class:"bt-img",loading:"lazy",style:{transition:"opacity 0.2s linear"},"preview-src-list":[("imageFormat"in n?n.imageFormat:T(I))(l.picUrl)],"initial-index":0},null,8,["src","preview-src-list"]))),256))])])]))),256))])])])]))])]),g(Cl),g(Rl,{modelValue:Nl.value,"onUpdate:modelValue":i[10]||(i[10]=l=>Nl.value=l)},{default:k(()=>[b("div",Ul,[g(ql,{src:("imageFormat"in n?n.imageFormat:T(I))(Fl.value),alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-0ef5fe83"]]);export{Fl as default};
