import{_ as e}from"./CUjxzVkc.js";import{a,E as l}from"./CSNhwhPs.js";import{_ as t}from"./CACs9nxh.js";import{a as o,E as s}from"./BSss4uk8.js";import{E as u}from"./7KO-WwAc.js";import{E as p}from"./BYBCH-HF.js";import{E as n}from"./mHIovD83.js";import{aN as c,e as m,f as r,r as d,I as i,z as v,c as y,o as b,F as f,b as $,a as h,w as g,n as _,i as k,d as T,t as V,q as j,j as A,a6 as C,p as O,_ as w}from"./BoLQ9Xhu.js";/* empty css        */import"./DwsKuIG7.js";import{g as N}from"./DglJjdLb.js";const x=e=>c({url:"order/check/index",method:"post",data:e}),P=e=>c({url:"order/check/update",method:"post",data:e}),U=e=>c({url:"order/check/updateCoupon",method:"post",data:e}),I=e=>c({url:"order/check/submit",method:"post",data:e}),B=e=>c({url:"order/check/getInvoice",method:"get",params:e}),S=()=>c({url:"order/check/getAvailablePaymentType",method:"get"}),q=e=>c({url:"order/check/getStoreShippingType",method:"get",params:e}),F={class:"audit-status"},R={class:"message"},E={class:"message"},D={class:"extra"},z={class:"message"},K={class:"message"},L={class:"message"},M={class:"message"},Z={class:"message"},G={class:"message"},H={class:"message"},J={class:"message"},Q={class:"message"},W={class:"extra"},X={class:"message"},Y={class:"message"},ee={class:"message"},ae={class:"message"},le={class:"message"},te={class:"message"},oe={class:"message"},se={class:"extra"},ue={class:"message"},pe={class:"message"},ne={key:0,class:"audit-status"},ce={class:"message blue"},me={key:0,class:"extra"},re={key:1,class:"extra"},de={key:2,class:"extra"},ie={class:"audit-status"},ve={class:"var(--price)"},ye={class:"audit-status"},be={class:"var(--price)"},fe={class:"dialog-footer"},$e=w(m({__name:"Info",props:{params:{type:Object,default:{}}},emits:["loadFilter","callback","changeType"],setup(m,{emit:w}){const x=m,P=r(),U=e=>{switch(e){case 0:return{color:"#f58b49"};case 1:return{color:"green"};case 2:return{color:"red"};default:return{}}},I=d(!0),S=i(),q=i(),$e=i(),he=d(!1),ge=d({orderId:x.params.orderId,orderSn:x.params.orderSn,amount:x.params.amount,totalAmount:x.params.totalAmount}),_e=d({}),ke=d({}),Te=d({}),Ve=d({}),je=async()=>{he.value=!0,S.value&&await S.value.resetFields(),"check"===x.params.type&&await Ae(),"apply"!=x.params.type&&"check"!=x.params.type&&await Ce(),"check"==x.params.type&&(Object.assign(ge.value,x.params.invoiceData),Object.assign(_e.value,x.params.invoiceData),Object.assign(ke.value,x.params.invoiceData),Object.assign(Te.value,x.params.invoiceData)),await we()},Ae=async()=>{try{const e=await B({...ge.value});let a={companyCode:"",companyName:"",companyAddress:"",companyPhone:"",companyBank:"",companyAccount:"",invoiceContent:"",mobile:"",email:""};if(e)Object.assign(ge.value,e),Object.assign(_e.value,e),Object.assign(ke.value,e),Object.assign(Te.value,e);else if(1===ge.value.titleType){let e={companyName:x.params.address.consignee,mobile:x.params.address.mobile,email:x.params.address.email};Object.assign(ge.value,e),Object.assign(_e.value,e),Object.assign(ke.value,e),Object.assign(Te.value,e)}else Object.assign(ge.value,a),Object.assign(_e.value,a),Object.assign(ke.value,a),Object.assign(Te.value,a);ge.value.amount=x.params.amount}catch(e){O.error(e.message)}},Ce=async()=>{try{I.value=!0;const a=await(e={id:x.params.orderId},c({url:"user/orderInvoice/detail",method:"get",params:e}));Object.assign(ge.value,a),Object.assign(_e.value,a),Object.assign(ke.value,a),Object.assign(Te.value,a)}catch(a){O.error(a.message)}finally{I.value=!1}var e},Oe=d(!1),we=async()=>{try{const e=await N();e?(Oe.value=!0,Object.assign(Ve.value,e)):Oe.value=!1}catch(e){O.error(e.message)}finally{I.value=!1}},Ne=w,xe=e=>{"check"==x.params.type&&(Ne("changeType",{type:e,value:"invoiceType"==e?ge.value.invoiceType:ge.value.titleType}),"invoiceType"==e&&2==ge.value.invoiceType&&we())},Pe=()=>{Ne("callback",{}),he.value=!1},{t:Ue}=v(),Ie=async()=>{S.value&&await S.value.validate();try{I.value=!0;let l={id:x.params.orderId,invoiceType:ge.value.invoiceType,titleType:ge.value.titleType,mobile:ge.value.mobile,email:ge.value.email,amount:ge.value.amount};if(l.invoiceContent=ge.value.invoiceContent,1===ge.value.invoiceType&&1===ge.value.titleType?(S.value&&await q.value.validate(),l.companyCode="",l.companyName=ke.value.companyName,l.companyAddress="",l.companyPhone="",l.companyBank="",l.companyAccount=""):1===ge.value.invoiceType&&2===ge.value.titleType?(S.value&&await $e.value.validate(),l.companyCode=Te.value.companyCode,l.companyName=Te.value.companyName,l.companyAddress=Te.value.companyAddress,l.companyPhone=Te.value.companyPhone,l.companyBank=Te.value.companyBank,l.companyAccount=Te.value.companyAccount):2===ge.value.invoiceType&&(l.companyCode=Ve.value.companyCode,l.companyName=Ve.value.companyName,l.companyAddress=Ve.value.companyAddress,l.companyPhone=Ve.value.companyPhone,l.companyBank=Ve.value.companyBank,l.companyAccount=Ve.value.companyAccount),"check"!=x.params.type){await(e=l,a="apply"===x.params.type?"create":"update",c({url:"user/orderInvoice/"+a,method:"post",data:e}));await S.value.resetFields(),O.success(Ue("操作成功")),he.value=!1,Ne("loadFilter")}else delete l.id,he.value=!1,Ne("callback",l)}catch(l){O.error(l.message)}finally{I.value=!1}var e,a};return(c,r)=>{const d=e,i=l,v=t,O=a,w=s,N=o,x=u,I=p,B=n;return b(),y(f,null,[$(B,{modelValue:he.value,"onUpdate:modelValue":r[17]||(r[17]=e=>he.value=e),title:c.$t("发票申请"),width:"800"},{footer:g(()=>[h("div",fe,["reapply"===m.params.type||"apply"===m.params.type||"check"===m.params.type?(b(),_(I,{key:0,plain:"",onClick:Pe},{default:g(()=>[T(V(c.$t("暂不开票")),1)]),_:1})):k("",!0),"apply"===m.params.type||"check"===m.params.type?(b(),_(I,{key:1,disabled:2===ge.value.invoiceType&&!Oe.value,type:"primary",onClick:Ie},{default:g(()=>[T(V(c.$t("提交开票申请")),1)]),_:1},8,["disabled"])):k("",!0),"reapply"===m.params.type?(b(),_(I,{key:2,type:"primary",onClick:Ie},{default:g(()=>[T(V(c.$t("重新提交开票申请")),1)]),_:1})):k("",!0)])]),default:g(()=>["info"===m.params.type?(b(),_(O,{key:0,"label-width":"auto",model:_e.value,class:"form-body","label-suffix":"："},{default:g(()=>[h("div",F,[T(V(c.$t("审核状态"))+"： ",1),h("span",{style:j(U(_e.value.status))},V(_e.value.statusName),5),r[18]||(r[18]=h("br",null,null,-1)),h("span",null,V(_e.value.applyReply),1)]),"check"!=m.params.type?(b(),_(i,{key:0,label:c.$t("订单号"),prop:"orderSn"},{default:g(()=>[h("span",R,[$(d,{to:"/member/order/info?id="+_e.value.orderId,class:"font-color",target:"_blank"},{default:g(()=>[T(V(_e.value.orderSn),1)]),_:1},8,["to"])])]),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),_(i,{key:1,label:c.$t("订单金额"),prop:"totalAmount"},{default:g(()=>[$(v,{modelValue:_e.value.totalAmount,"onUpdate:modelValue":r[0]||(r[0]=e=>_e.value.totalAmount=e),showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),_(i,{key:2,label:c.$t("发票金额"),prop:"amount"},{default:g(()=>[$(v,{modelValue:_e.value.amount,"onUpdate:modelValue":r[1]||(r[1]=e=>_e.value.amount=e),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):k("",!0),$(i,{label:c.$t("发票类型"),prop:"invoiceType"},{default:g(()=>[h("span",E,V(1===_e.value.invoiceType?c.$t("普通发票"):c.$t("增值税专用发票")),1),h("div",D,V(c.$t("所有发票由商品供货商开具")),1)]),_:1},8,["label"]),$(i,{label:c.$t("发票抬头"),prop:"titleType"},{default:g(()=>[h("span",z,V(1===_e.value.titleType?c.$t("个人"):c.$t("企业")),1)]),_:1},8,["label"]),1===_e.value.invoiceType?(b(),y(f,{key:3},[1===_e.value.titleType?(b(),_(i,{key:0,label:c.$t("个人名称"),prop:"companyName"},{default:g(()=>[h("span",K,V(_e.value.companyName),1)]),_:1},8,["label"])):(b(),y(f,{key:1},[$(i,{label:c.$t("企业名称"),prop:"companyName"},{default:g(()=>[h("span",L,V(_e.value.companyName),1)]),_:1},8,["label"]),$(i,{label:c.$t("纳税人识号"),prop:"companyCode"},{default:g(()=>[h("span",M,V(_e.value.companyCode),1)]),_:1},8,["label"]),$(i,{label:c.$t("单位地址"),prop:"companyAddress"},{default:g(()=>[h("span",Z,V(_e.value.companyAddress),1)]),_:1},8,["label"]),$(i,{label:c.$t("单位电话"),prop:"companyPhone"},{default:g(()=>[h("span",G,V(_e.value.companyPhone),1)]),_:1},8,["label"]),$(i,{label:c.$t("开户银行"),prop:"companyBank"},{default:g(()=>[h("span",H,V(_e.value.companyBank),1)]),_:1},8,["label"]),$(i,{label:c.$t("银行账户"),prop:"companyAccount"},{default:g(()=>[h("span",J,V(_e.value.companyAccount),1)]),_:1},8,["label"])],64))],64)):k("",!0),$(i,{label:c.$t("发票内容"),prop:"invoiceContent"},{default:g(()=>[h("span",Q,V(c.$t("商品明细")),1),h("div",W,V(c.$t("发票内容将显示详细商品名称与价格信息")),1)]),_:1},8,["label"]),2===ge.value.invoiceType?(b(),y(f,{key:4},[$(i,{label:c.$t("单位名称")},{default:g(()=>[h("span",X,V(_e.value.companyName),1)]),_:1},8,["label"]),$(i,{label:c.$t("纳税人识别码")},{default:g(()=>[h("span",Y,V(_e.value.companyCode),1)]),_:1},8,["label"]),$(i,{label:c.$t("注册地址")},{default:g(()=>[h("span",ee,V(_e.value.companyAddress),1)]),_:1},8,["label"]),$(i,{label:c.$t("注册电话")},{default:g(()=>[h("span",ae,V(_e.value.companyPhone),1)]),_:1},8,["label"]),$(i,{label:c.$t("开户银行")},{default:g(()=>[h("span",le,V(_e.value.companyBank),1)]),_:1},8,["label"]),$(i,{label:c.$t("银行账户")},{default:g(()=>[h("span",te,V(_e.value.companyAccount),1)]),_:1},8,["label"]),$(i,{label:c.$t("发票内容"),prop:"invoiceContent"},{default:g(()=>[h("span",oe,V(c.$t("商品明细")),1),h("div",se,V(c.$t("发票内容将显示详细商品名称与价格信息")),1)]),_:1},8,["label"])],64)):k("",!0),$(i,{label:c.$t("收票人手机"),prop:"mobile"},{default:g(()=>[h("span",ue,V(_e.value.mobile),1)]),_:1},8,["label"]),$(i,{label:c.$t("收票人邮箱"),prop:"email"},{default:g(()=>[h("span",pe,V(_e.value.email),1)]),_:1},8,["label"])]),_:1},8,["model"])):(b(),_(O,{key:1,ref_key:"formRef",ref:S,"label-width":110,model:ge.value,class:"form-body","label-suffix":"："},{default:g(()=>["reapply"===m.params.type?(b(),y("div",ne,[T(V(c.$t("审核状态"))+"： ",1),h("span",{style:j(U(ge.value.status))},V(ge.value.statusName),5),r[19]||(r[19]=h("br",null,null,-1)),h("span",null,V(ge.value.applyReply),1)])):k("",!0),"check"!=m.params.type?(b(),_(i,{key:1,label:c.$t("订单号"),prop:"orderSn"},{default:g(()=>[h("span",ce,[$(d,{to:"/member/order/info?id="+ge.value.orderId,target:"_blank"},{default:g(()=>[T(V(ge.value.orderSn),1)]),_:1},8,["to"])])]),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),_(i,{key:2,label:c.$t("订单金额"),prop:"totalAmount"},{default:g(()=>[$(v,{modelValue:ge.value.totalAmount,"onUpdate:modelValue":r[2]||(r[2]=e=>ge.value.totalAmount=e),showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),_(i,{key:3,label:c.$t("发票金额"),prop:"amount"},{default:g(()=>[$(v,{modelValue:ge.value.amount,"onUpdate:modelValue":r[3]||(r[3]=e=>ge.value.amount=e),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):k("",!0),$(i,{label:c.$t("发票类型"),prop:"invoiceType"},{default:g(()=>[$(N,{modelValue:ge.value.invoiceType,"onUpdate:modelValue":r[4]||(r[4]=e=>ge.value.invoiceType=e),onChange:r[5]||(r[5]=e=>xe("invoiceType"))},{default:g(()=>[$(w,{value:1},{default:g(()=>[T(V(c.$t("普通发票")),1)]),_:1}),1==A(P).invoiceAdded?(b(),_(w,{key:0,value:2},{default:g(()=>[T(V(c.$t("增值税专用发票")),1)]),_:1})):k("",!0)]),_:1},8,["modelValue"]),1===ge.value.invoiceType?(b(),y("div",me,V(c.$t("所有发票由商品供货商开具")),1)):k("",!0),2===ge.value.invoiceType&&Oe.value?(b(),y("div",re,V(c.$t("所有发票由商品供货商开具")),1)):k("",!0),2!==ge.value.invoiceType||Oe.value?k("",!0):(b(),y("div",de,[T(V(c.$t("您还未通过增票资质申请，暂时无法开具增值税专用发票"))+"， ",1),$(d,{class:"font-color",to:"/member/userInvoice/info"},{default:g(()=>[T(V(c.$t("点击这里")),1)]),_:1}),T(" "+V(c.$t("去申请增票资质"))+"。 ",1)]))]),_:1},8,["label"]),1===ge.value.invoiceType?(b(),y(f,{key:4},[h("div",ie,[h("p",null,V(c.$t("根据现行税收政策，部分公司提供数电票，数电（普通发票）法律效力与现有电子普通发票相同"))+"；",1),h("p",null,V(c.$t("电子普通发票和纸质普通发票具备同等法律效力，可支持报销入账"))+"；",1),h("p",null,V(c.$t("如商品由第三方卖家销售，发票类型及内容将由该卖家决定"))+"；",1),h("p",null,V(c.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),h("p",ve,V(c.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),$(i,{label:c.$t("发票抬头"),prop:"titleType"},{default:g(()=>[$(N,{modelValue:ge.value.titleType,"onUpdate:modelValue":r[6]||(r[6]=e=>ge.value.titleType=e),onChange:r[7]||(r[7]=e=>xe("titleType"))},{default:g(()=>[$(w,{value:1},{default:g(()=>[T(V(c.$t("个人")),1)]),_:1}),$(w,{value:2},{default:g(()=>[T(V(c.$t("企业")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),1===ge.value.titleType?(b(),_(O,{key:0,ref_key:"formOneRef",ref:q,"label-width":110,model:ke.value,class:"form-body","label-suffix":"："},{default:g(()=>[$(i,{rules:[{required:!0,message:c.$t("个人名称不能为空")}],label:c.$t("个人名称"),prop:"companyName"},{default:g(()=>[$(x,{modelValue:ke.value.companyName,"onUpdate:modelValue":r[8]||(r[8]=e=>ke.value.companyName=e),clearable:"",placeholder:c.$t("请输入个人名称")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])]),_:1},8,["model"])):(b(),_(O,{key:1,ref_key:"formFirmRef",ref:$e,"label-width":110,model:Te.value,class:"form-body","label-suffix":"："},{default:g(()=>[$(i,{rules:[{required:!0,message:c.$t("企业名称不能为空")}],label:c.$t("企业名称"),prop:"companyName"},{default:g(()=>[$(x,{modelValue:Te.value.companyName,"onUpdate:modelValue":r[9]||(r[9]=e=>Te.value.companyName=e),clearable:"",placeholder:c.$t("请输入企业名称")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),$(i,{rules:[{required:!0,message:c.$t("纳税人识号不能为空")}],label:c.$t("纳税人识号"),prop:"companyCode"},{default:g(()=>[$(x,{modelValue:Te.value.companyCode,"onUpdate:modelValue":r[10]||(r[10]=e=>Te.value.companyCode=e),clearable:"",placeholder:c.$t("请输入纳税人识号")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),$(i,{label:c.$t("单位地址"),rules:[{required:!0,message:c.$t("单位地址不能为空")}],prop:"companyAddress"},{default:g(()=>[$(x,{modelValue:Te.value.companyAddress,"onUpdate:modelValue":r[11]||(r[11]=e=>Te.value.companyAddress=e),clearable:"",placeholder:c.$t("请输入单位地址")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),$(i,{label:c.$t("单位电话"),rules:[{required:!0,message:c.$t("单位电话不能为空")}],prop:"companyPhone"},{default:g(()=>[$(x,{modelValue:Te.value.companyPhone,"onUpdate:modelValue":r[12]||(r[12]=e=>Te.value.companyPhone=e),clearable:"",placeholder:c.$t("请输入单位电话")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),$(i,{label:c.$t("开户银行"),rules:[{required:!0,message:c.$t("开户银行不能为空")}],prop:"companyBank"},{default:g(()=>[$(x,{modelValue:Te.value.companyBank,"onUpdate:modelValue":r[13]||(r[13]=e=>Te.value.companyBank=e),clearable:"",placeholder:c.$t("请输入开户银行")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),$(i,{label:c.$t("银行账户"),rules:[{required:!0,message:c.$t("银行账户不能为空")}],prop:"companyAccount"},{default:g(()=>[$(x,{modelValue:Te.value.companyAccount,"onUpdate:modelValue":r[14]||(r[14]=e=>Te.value.companyAccount=e),clearable:"",placeholder:c.$t("请输入银行账户")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["model"]))],64)):2===ge.value.invoiceType&&Oe.value?(b(),_(O,{key:5,ref:"formInvoiceRef","label-width":110,model:Ve.value,class:"form-body","label-suffix":"："},{default:g(()=>[h("div",ye,[h("p",null,V(c.$t("我公司依法开具发票，请您按照税法规定使用发票"))+"。",1),h("p",null,V(c.$t("根据现行税收政策，部分公司提供数电票, 数电（专用发票）法律效力与现有增值税专用发票相同"))+";",1),h("p",null,V(c.$t("如商品由第三方卖家销售，发票类型和内容将由该卖家决定，发票由卖家开具并提供"))+"。",1),h("p",null,V(c.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),h("p",be,V(c.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),$(i,{label:c.$t("单位名称")},{default:g(()=>[T(V(Ve.value.companyName),1)]),_:1},8,["label"]),$(i,{label:c.$t("纳税人识别码")},{default:g(()=>[T(V(Ve.value.companyCode),1)]),_:1},8,["label"]),$(i,{label:c.$t("注册地址")},{default:g(()=>[T(V(Ve.value.companyAddress),1)]),_:1},8,["label"]),$(i,{label:c.$t("注册电话")},{default:g(()=>[T(V(Ve.value.companyPhone),1)]),_:1},8,["label"]),$(i,{label:c.$t("开户银行")},{default:g(()=>[T(V(Ve.value.companyBank),1)]),_:1},8,["label"]),$(i,{label:c.$t("银行账户")},{default:g(()=>[T(V(Ve.value.companyAccount),1)]),_:1},8,["label"])]),_:1},8,["model"])):k("",!0),0!=ge.value.invoiceType?(b(),y(f,{key:6},[$(i,{rules:[{required:!0,message:c.$t("手机不能为空")}],label:c.$t("收票人手机"),prop:"mobile"},{default:g(()=>[$(x,{modelValue:ge.value.mobile,"onUpdate:modelValue":r[15]||(r[15]=e=>ge.value.mobile=e),clearable:"",placeholder:c.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),$(i,{rules:[{required:1!==ge.value.invoiceType,message:c.$t("邮箱不能为空")}],label:c.$t("收票人邮箱"),prop:"email"},{default:g(()=>[$(x,{modelValue:ge.value.email,"onUpdate:modelValue":r[16]||(r[16]=e=>ge.value.email=e),clearable:"",placeholder:c.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])],64)):k("",!0)]),_:1},8,["model"]))]),_:1},8,["modelValue","title"]),h("span",{onClick:je},[C(c.$slots,"default",{},void 0,!0)])],64)}}}),[["__scopeId","data-v-b0252788"]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));export{$e as I,U as a,q as b,x as c,B as d,he as e,S as g,I as o,P as u};
