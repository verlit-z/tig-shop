import{_ as s}from"./BDziKWme.js";import{b as a}from"./C0PQcRxs.js";import{E as t}from"./BYBCH-HF.js";import{E as i}from"./Clfs2HP4.js";import{_ as e}from"./DFo55n29.js";import{e as l,r as o,h as n,y as r,c,o as m,b as p,a as d,t as u,w as j,d as f,n as g,i as v,F as y,m as _,x,aj as h,j as k,p as w,ah as b,s as C,_ as $}from"./BoLQ9Xhu.js";import{P as z}from"./DkwbP8TR.js";import{g as R,d as I,e as E,f as L}from"./Bk7c1JMx.js";import"./oOeuh3JC.js";import"./CUjxzVkc.js";import"./C-LthTfX.js";import"./7KO-WwAc.js";import"./Cy_EVX_n.js";import"./DEVzVrts.js";import"./k79prmI0.js";import"./C_oH9tmG.js";import"./DwsKuIG7.js";import"./D5wp6cRH.js";import"./MzbMzCCn.js";import"./nqCHxoJt.js";import"./C4BNlK69.js";import"./DCawybvr.js";import"./7ACzQoE5.js";import"./BmDvg8bE.js";import"./CACs9nxh.js";import"./BSss4uk8.js";import"./Y9Rb4YJs.js";/* empty css        */const P={class:"message_center container flex"},T={class:"mc_side_bar"},U={class:"title"},D={class:"fl"},F={class:"nav_list"},H={class:"fl"},M={class:"msg_list"},Q={class:"flex justify-end"},X={class:"list"},Y=["onClick"],Z={class:"time"},q={class:"message flex justify-between"},A={class:"title flex align-center"},B={class:"txt"},G={class:"flex flex-column align-end",style:{"min-width":"50px"}},J={class:"date"},K=["onClick"],N={key:2,class:"el-page flex justify-end"},O=$(l({__name:"List",setup(l){const $=o([]),O=o(!0),S=o(0),V=n({page:1,unread:0}),W=async()=>{O.value=!0;try{const s=await R({...V});$.value=s.records,S.value=s.total}catch(s){w.error(s.message)}finally{O.value=!1}},ss=async()=>{V.unread=1;try{await W()}catch(s){w.error(s.message)}},as=async()=>{try{await L(),V.unread=0,await W()}catch(s){w.error(s.message)}};return r(()=>{W()}),(l,o)=>{const n=s,r=a,R=t,L=i,ts=e;return m(),c(y,null,[p(n,{title:"站内信"}),p(r),d("div",P,[d("div",T,[d("h3",U,[o[2]||(o[2]=d("i",{class:"iconfont-pc icon-xiaoxi"},null,-1)),d("span",D,u(l.$t("消息中心")),1)]),d("div",F,[o[3]||(o[3]=d("i",{class:"icon"},null,-1)),d("span",H,u(l.$t("账户信息")),1)])]),d("div",M,[d("div",Q,[p(R,{onClick:ss},{default:j(()=>[f(u(l.$t("只看未读")),1)]),_:1}),p(R,{onClick:as},{default:j(()=>[f(u(l.$t("全部标记为已读")),1)]),_:1})]),d("div",X,[S.value>0?(m(!0),c(y,{key:0},_($.value,s=>(m(),c("div",{class:"item flex",onClick:a=>(async s=>{try{1!==s.isRead&&(await E(s.messageId),s.isRead=1),b(C(s.link),{open:{target:"_blank"}})}catch(a){}})(s)},[d("div",Z,u(s.addTimeDate),1),d("div",{class:x(["msg_info flex",s.isRead?"unread":""])},[o[5]||(o[5]=d("div",{class:"icon msg"},null,-1)),d("div",q,[d("div",null,[d("h3",A,[o[4]||(o[4]=d("div",{class:"icon"},null,-1)),d("span",null,u(s.title),1)]),d("p",B,u(s.content),1)]),d("div",G,[d("p",J,u(s.addTimeHms),1),d("i",{class:"iconfont-pc icon-changyonggoupiaorenshanchu del",onClick:h(a=>(async s=>{try{await I(s),await W()}catch(a){w.error(a.message)}})({id:s.messageId}),["stop"])},null,8,K)])])],2)],8,Y))),256)):(m(),g(L,{key:1,description:l.$t("暂无消息")},null,8,["description"])),$.value.length>0&&!O.value?(m(),c("div",N,[p(k(z),{page:V.page,"onUpdate:page":o[0]||(o[0]=s=>V.page=s),size:V.size,"onUpdate:size":o[1]||(o[1]=s=>V.size=s),total:S.value,onCallback:W},null,8,["page","size","total"])])):v("",!0)])])]),p(ts)],64)}}}),[["__scopeId","data-v-1ac3fb76"]]);export{O as default};
