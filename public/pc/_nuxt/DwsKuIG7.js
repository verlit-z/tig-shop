import{bk as e,e as t,M as o,R as n,b as s,J as a,a6 as u,O as c,y as d,c2 as l,T as i,c3 as r,aE as m,v,bt as f,c4 as p,H as y,c5 as b,c6 as E,c7 as M,c8 as h,c9 as w}from"./BoLQ9Xhu.js";import{P as x}from"./D5wp6cRH.js";import{t as g}from"./k79prmI0.js";const k=t=>{if(!t)return{onClick:e,onMousedown:e,onMouseup:e};let o=!1,n=!1;return{onClick:e=>{o&&n&&t(e),o=n=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},L=o({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:c([String,Array,Object])},zIndex:{type:c([String,Number])}});const Y=t({name:"ElOverlay",props:L,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const c=n("overlay"),{onClick:d,onMousedown:l,onMouseup:i}=k(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?s("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:l,onMouseup:i},[u(t,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):a("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[u(t,"default")])}}),C=(e,t,o,n)=>{const s={offsetX:0,offsetY:0},a=(t,o)=>{if(e.value){const{offsetX:a,offsetY:u}=s,c=e.value.getBoundingClientRect(),d=c.left,l=c.top,i=c.width,m=c.height,v=document.documentElement.clientWidth,f=document.documentElement.clientHeight,p=-d+a,y=-l+u,b=v-d-i+a,E=f-l-(m<f?m:0)+u;(null==n?void 0:n.value)||(t=Math.min(Math.max(t,p),b),o=Math.min(Math.max(o,y),E)),s.offsetX=t,s.offsetY=o,e.value.style.transform=`translate(${r(t)}, ${r(o)})`}},u=e=>{const t=e.clientX,o=e.clientY,{offsetX:n,offsetY:u}=s,c=e=>{const s=n+e.clientX-t,c=u+e.clientY-o;a(s,c)},d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)},c=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",u),window.removeEventListener("resize",m))},m=()=>{const{offsetX:e,offsetY:t}=s;a(e,t)};return d(()=>{l(()=>{o.value?t.value&&e.value&&(t.value.addEventListener("mousedown",u),window.addEventListener("resize",m)):c()})}),i(()=>{c()}),{resetPosition:()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:m}},X=(e,t={})=>{m(e)||g("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||n("popup"),s=v(()=>o.bm("parent","hidden"));if(!f||p(document.body,s.value))return;let a=0,u=!1,c="0";const d=()=>{setTimeout(()=>{"undefined"!=typeof document&&u&&document&&(document.body.style.width=c,w(document.body,s.value))},200)};y(e,e=>{if(!e)return void d();u=!p(document.body,s.value),u&&(c=document.body.style.width,E(document.body,s.value)),a=M(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,n=h(document.body,"overflowY");a>0&&(t||"scroll"===n)&&u&&(document.body.style.width=`calc(100% - ${a}px)`)}),b(()=>d())};export{Y as E,X as a,k as b,C as u};
