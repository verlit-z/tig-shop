import{b as e,c as a}from"./Bk7c1JMx.js";import{_ as t}from"./CUjxzVkc.js";import{e as l,b3 as s,g as o,y as n,n as r,o as u,w as c,a as d,b as i,t as p,_ as v,z as m,r as y,v as h,c as f,a6 as g,i as _,j as w,d as k,b4 as I,b5 as b,h as C,b6 as S,G as x,H as N,B as $,x as L,ad as T,as as j,b7 as D,F as B,m as F,b8 as q,f as M,s as V,b9 as E,aE as K,al as P,ba as U,l as A,q as H,k as Y,au as z}from"./BoLQ9Xhu.js";import"./C-LthTfX.js";import"./BYBCH-HF.js";import"./7KO-WwAc.js";import"./DwsKuIG7.js";import{b as G}from"./DFo55n29.js";import{_ as Q}from"./MzbMzCCn.js";const R={class:"cart_info"},X={class:"my-cart"},Z=v(l({__name:"ShoppingCart",props:{pageType:{type:Number,default:1}},setup(a){const l=s(),v=o();return n(()=>{v.userInfo.userId>0&&l.changeCartList()}),(a,l)=>{const s=t,o=e;return u(),r(o,null,{default:c(({count:e})=>[d("div",R,[i(s,{to:"/cart/",class:"acea-row row-center-wrapper"},{default:c(()=>[l[0]||(l[0]=d("div",{class:"iconfont-pc icon-shiwu-gouwuche"},null,-1)),d("div",X,p(a.$t("我的购物车")),1),d("em",null,p(e),1)]),_:2,__:[0]},1024)])]),_:1})}}}),[["__scopeId","data-v-b0bdd92c"]]),J={key:1,class:"ele-menu"},O={class:"feedback-menu"},W={class:"wrap-btn"},ee=v(l({__name:"Service",props:{shopId:{type:[Number,String],default:0},productId:{type:[Number,String],default:0},orderId:{type:[Number,String],default:0},isIndex:{type:Boolean,default:!1},phone:{type:String,default:""}},setup(e){const{t:a}=m(),t=o(),l=e,s=y({h5Domain:"",url:"",openType:0,show:"",serviceType:0});(async()=>{try{const e=await G();s.value=e}catch(e){console.error(e)}})();const n=h(()=>s.value.h5Domain?s.value.h5Domain:window.location.origin+"/mobile"),r=async()=>{const e=s.value.serviceType;if(0===e)return;const a=s.value.openType;let o=s.value.url;const r=screen.height/2-350;if(4!==e)1==a?window.open(o,"_blank",`width=500,height=700,top=${r}`):window.open(o,"_blank");else{if(!t.isAuthenticated)return I();o=`${n.value}/pages/im/index?token=${t.token}&shopId=${l.shopId}&platform=${b}`,Number(l.productId)>0&&(o+=`&productId=${l.productId}`),Number(l.orderId)>0&&(o+=`&orderId=${l.orderId}`),window.open(o,"_blank",`width=500,height=700,top=${r}`)}};return(a,t)=>e.isIndex?(u(),f("div",{key:0,onClick:r},[w(s).show?g(a.$slots,"default",{key:0},void 0,!0):_("",!0)])):(u(),f("div",J,[w(s).show?(u(),f("div",{key:0,class:"card",onClick:r},[d("div",O,[d("div",W,[t[0]||(t[0]=d("i",{class:"iconfont-pc icon-kefu"},null,-1)),k(" "+p(a.$t("客服")),1)])])])):_("",!0)]))}}),[["__scopeId","data-v-737bd2fc"]]),ae=l({__name:"StatisticLog",props:{productId:{type:[Number,String],default:""},shopId:{type:[Number,String],default:""},shopCategoryId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0}},setup(e,{expose:a}){const t=e,l=C({}),s=async()=>{t.productId&&(l.productId=t.productId),t.shopId&&(l.shopId=t.shopId),t.shopCategoryId&&(l.shopCategoryId=t.shopCategoryId);try{await S(l)}catch(e){console.error(e)}},o=h(()=>{const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`});return(()=>{const e=localStorage.getItem("lastDate");!e||((e,a)=>{const t=new Date(e),l=new Date(a);return Math.abs(t.getTime()-l.getTime())>=864e5})(o.value,e)?(l.isNew=1,localStorage.setItem("untranslatedCache","")):l.click=1,localStorage.setItem("lastDate",o.value)})(),t.immediateLog&&s(),a({__commonLog:s}),(e,a)=>(u(),f("div"))}}),te={class:"top-search"},le={class:"acea-row row-middle"},se=["placeholder"],oe={class:"search-guess-ul"},ne={class:"name"},re=v(l({__name:"SimSearch",setup(e){const a=y([]);let l=!1,s=null;const o=()=>{if(l)return!1;clearTimeout(s),l=!0,s=setTimeout(async()=>{try{const e=await q(h.value);a.value=e,C.value=a.value.length>0}catch(e){}finally{l=!1}},300)},r=x(),v=y(r.query.keyword),m=y(!1),h=y(""),g=h.value;v.value&&"/search/"===r.path&&(h.value=v.value),N(()=>r.query,()=>{r.query.keyword||(h.value="")},{deep:!0});const w=()=>{m.value=!0,h.value===g&&(h.value="")},k=()=>{""===h.value&&(h.value=g),m.value=!1},I=()=>{location.href="/search/?keyword="+h.value},b=y(null),C=y(!1),S=e=>{b.value&&!b.value.contains(e.target)&&(C.value=!1)};return n(()=>{window.addEventListener("click",S)}),$(()=>{window.removeEventListener("click",S)}),(e,l)=>{const s=t;return u(),f("div",te,[d("div",{class:L(["search-form",{"search-form-focus":m.value||""!=h.value}])},[d("div",le,[T(d("input",{type:"text",autocomplete:"off","onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),placeholder:e.$t("搜索"),class:"search-input",name:"keywords",onFocus:w,onFocusout:k,onKeyup:o,onKeydown:D(I,["enter"])},null,40,se),[[j,h.value]]),d("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:I})])],2),C.value?(u(),f("div",{key:0,ref_key:"guessBox",ref:b,class:"search-guess-box"},[d("ul",oe,[(u(!0),f(B,null,F(a.value,(e,a)=>(u(),f("li",{key:a},[i(s,{to:"/search/?keyword="+e.keyword,class:"serlink"},{default:c(()=>[d("span",ne,p(e.keyword),1)]),_:2},1032,["to"])]))),128))])],512)):_("",!0)])}}}),[["__scopeId","data-v-b4fb70b2"]]),ue={class:"top-search"},ce={class:"acea-row row-middle"},de=["placeholder"],ie={class:"search-guess-ul"},pe={class:"name"},ve=v(l({__name:"DefSearch",setup(e){const a=y([]);let l=!1,s=null;const o=()=>{if(l)return!1;clearTimeout(s),l=!0,s=setTimeout(async()=>{try{const e=await q(h.value);a.value=e,C.value=a.value.length>0}catch(e){}finally{l=!1}},300)},r=x(),v=y(r.query.keyword),m=y(!1),h=y(""),g=h.value;v.value&&"/search/"===r.path&&(h.value=v.value),N(()=>r.query,()=>{r.query.keyword||(h.value="")},{deep:!0});const w=()=>{m.value=!0,h.value===g&&(h.value="")},k=()=>{""===h.value&&(h.value=g),m.value=!1},I=()=>{location.href="/search/?keyword="+h.value},b=y(null),C=y(!1),S=e=>{b.value&&!b.value.contains(e.target)&&(C.value=!1)};return n(()=>{window.addEventListener("click",S)}),$(()=>{window.removeEventListener("click",S)}),(e,l)=>{const s=t;return u(),f("div",ue,[d("div",{class:L(["search-form",{"search-form-focus":m.value||""!=h.value}])},[d("div",ce,[T(d("input",{type:"text",autocomplete:"off","onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),placeholder:e.$t("搜索"),class:"search-input",name:"keywords",onFocus:w,onFocusout:k,onKeyup:o,onKeydown:D(I,["enter"])},null,40,de),[[j,h.value]]),d("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:I})])],2),C.value?(u(),f("div",{key:0,ref_key:"guessBox",ref:b,class:"search-guess-box"},[d("ul",ie,[(u(!0),f(B,null,F(a.value,(e,a)=>(u(),f("li",{key:a},[i(s,{to:"/search/?keyword="+e.keyword,class:"serlink"},{default:c(()=>[d("span",pe,p(e.keyword),1)]),_:2},1032,["to"])]))),128))])],512)):_("",!0)])}}}),[["__scopeId","data-v-8db2aced"]]);const me={class:"cate_menu"},ye=["onMouseenter"],he={key:1,class:"cate_menu_line"},fe={class:"subCata"},ge={class:"left"},_e={class:"nav_cata_bd"},we={class:"item"},ke={class:"title-list"},Ie={key:0},be={key:0,class:"name-list"},Ce=v(l({__name:"AllCate",props:{isCateVisible:{type:Boolean,default:!1}},setup(e){const a=M();y("");(async()=>{if(null===a.allCate)try{const e=await E();a.allCate=e.catFloor,""!=e.icoDefinedCss&&function(e){let a=!1;if(a)return;if(document.head.querySelector(`link[href="${e}"]`))return void(a=!0);const t=document.createElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",t.onload=()=>{a=!0},document.head.appendChild(t)}(e.icoDefinedCss)}catch(e){}})();const l=y(null),s=()=>{l.value=null};return h(()=>"ca"),(e,o)=>{const n=t;return u(),f("div",{onMouseleave:s},[d("div",me,[(u(!0),f(B,null,F(w(a).allCate,(e,a)=>(u(),f("div",{class:L(["cate_menu_item",{active:l.value===a}]),onMouseenter:e=>(e=>{l.value=e})(a)},[d("span",{class:L("floor-ico "+e.floorIcoFont)},null,2),(u(!0),f(B,null,F(e.catList,(e,a)=>(u(),f(B,null,["-"!=e.name?(u(),r(n,{key:0,target:"_blank",class:"cate_menu_lk",to:w(V)({path:"list",id:e.id})},{default:c(()=>[k(p(e.name),1)]),_:2},1032,["to"])):_("",!0),"-"!=e.name?(u(),f("span",he,"/")):_("",!0)],64))),256))],42,ye))),256))]),d("div",fe,[(u(!0),f(B,null,F(w(a).allCate,(e,a)=>(u(),f("div",{key:a,class:L(["subView",{active:l.value===a}])},[d("div",ge,[d("div",_e,[(u(!0),f(B,null,F(e.catList,(e,a)=>(u(),f(B,null,[(u(!0),f(B,null,F(e.children,e=>(u(),f("div",we,[d("div",ke,[i(n,{to:w(V)({path:"list",id:e.categoryId})},{default:c(()=>[k(p(e.categoryName),1)]),_:2},1032,["to"]),e.children?.length?(u(),f("i",Ie," >")):_("",!0)]),e.children?.length?(u(),f("div",be,[(u(!0),f(B,null,F(e.children,e=>(u(),r(n,{to:w(V)({path:"list",id:e.categoryId})},{default:c(()=>[k(p(e.categoryName),1)]),_:2},1032,["to"]))),256))])):_("",!0)]))),256))],64))),256))])])],2))),128))])],32)}}}),[["__scopeId","data-v-3b359fc9"]]),Se={class:"nav-bd container flex align-end"},xe={class:"acea-row row-center-wrapper"},Ne={class:"sub-nav"},$e=v(l({__name:"DefNav",props:{page:{type:String,default:""}},setup(e){const a=e,l=M();l.loadNav();const s=y(!1),o=y(!1),n=y(!1);let v=null;const m=async()=>{v=setTimeout(()=>{o.value=!0,s.value=!0},300)},h=()=>{v&&clearTimeout(v),o.value=!1,s.value=!1,n.value=!1};return(e,n)=>{const v=Ce,y=t,g=Q;return u(),f("div",{class:L(["top-nav",{"top-nav-index":"index"===a.page}])},[d("div",Se,[d("div",{class:"main-nav-link",onMouseenter:m,onMouseleave:h},[d("div",xe,[d("div",null,p(e.$t("全部商品分类")),1),d("div",{class:L(["iconfont-pc icon-xiajiantou",w(o)?"icon-xiajiantou-hover":"not-icon-xiajiantou-hover"])},null,2)]),"index"!=a.page&&w(s)?(u(),f("div",{key:0,class:L(["hidden-cate",{"hidden-hover":w(s)}])},[w(s)?(u(),r(v,{key:0,isCateVisible:w(s),"onUpdate:isCateVisible":n[0]||(n[0]=e=>K(s)?s.value=e:null)},null,8,["isCateVisible"])):_("",!0)],2)):_("",!0)],32),d("ul",Ne,[d("li",null,[i(y,{to:"/",class:"alv1"},{default:c(()=>[k(p(e.$t("首页")),1)]),_:1})]),(u(!0),f(B,null,F(w(l).mainNav,(a,t)=>(u(),f("li",null,[i(g,{class:"alv1",item:a},{default:c(()=>[k(p(e.$t(a.title)),1)]),_:2},1032,["item"])]))),256)),w(P)()&&w(U)()?(u(),f(B,{key:0},[d("li",null,[i(y,{to:"/shop/list",class:"alv1"},{default:c(()=>[k(p(e.$t("店铺街")),1)]),_:1})]),d("li",null,[i(y,{to:"/join/intro",class:"alv1"},{default:c(()=>[k(p(e.$t("商家入驻")),1)]),_:1})])],64)):_("",!0)])])],2)}}}),[["__scopeId","data-v-088e4d99"]]),Le={class:"header-nav"},Te={class:"nav-item"},je=v(l({__name:"SimNav",setup(e){const a=M();return a.loadNav(),(e,l)=>{const s=t;return u(),f("div",Le,[i(s,{class:"nav-item",to:"/"},{default:c(()=>[k(p(e.$t("首页")),1)]),_:1}),(u(!0),f(B,null,F(w(a).mainNav,(a,t)=>(u(),f("div",Te,[i(s,{to:a.link?w(V)(a.link):"",class:"alv1"},{default:c(()=>[k(p(e.$t(a.title)),1)]),_:2},1032,["to"])]))),256)),w(P)()&&w(A)()?(u(),r(s,{key:0,class:"nav-item",to:"/join/intro"},{default:c(()=>[k(p(e.$t("商家入驻")),1)]),_:1})):_("",!0)])}}}),[["__scopeId","data-v-3e9cfdf9"]]),De={class:"top-area container"},Be={class:"wrapper"},Fe={class:"logo"},qe=["src"],Me=v(l({__name:"PageHeader",props:{page:{type:String,default:""},showService:{type:Boolean,default:!1},shopId:{type:[Number,String],default:0},productId:{type:[Number,String],default:0},orderId:{type:[Number,String],default:0},shopCategoryId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0},phone:{type:String,default:""},showDefNav:{type:Boolean,default:!0}},setup(e,{expose:l}){const s=M(),o=y();s.loadNav();const n=h(()=>s.decoratePageConfig?.headerStyle),p=h(()=>s.decoratePageConfig?.colorStyle);return l({handleLog:()=>{o.value?.__commonLog()}}),(l,v)=>{const m=a,y=t,h=Z,g=ee,k=ae,I=z;return u(),f(B,null,[i(m,{colorType:w(p),pageType:w(n)},null,8,["colorType","pageType"]),d("div",{class:"header",style:H({borderBottom:1!=w(n)?"1px none #ddd":"1px solid #ddd"})},[d("div",De,[d("div",Be,[d("div",Fe,[i(y,{"exact-active-class":"''",to:"/",class:"alv1"},{default:c(()=>[d("img",{style:H({width:1!=w(n)?"140px":"190px"}),src:("imageFormat"in l?l.imageFormat:w(Y))(w(s).shopLogo),alt:""},null,12,qe)]),_:1})]),1!=w(n)?(u(),r(je,{key:0,page:e.page},null,8,["page"])):_("",!0),1==w(n)?(u(),r(ve,{key:1})):(u(),r(re,{key:2})),1==w(n)?(u(),r(h,{key:3})):_("",!0)]),e.showDefNav&&1==w(n)?(u(),r($e,{key:0,page:e.page},null,8,["page"])):_("",!0)])],4),e.showService?(u(),r(g,{key:0,phone:e.phone,shopId:e.shopId,orderId:e.orderId,productId:e.productId},null,8,["phone","shopId","orderId","productId"])):_("",!0),i(I,null,{default:c(()=>[i(k,{ref_key:"statisticLogRef",ref:o,immediateLog:e.immediateLog,shopCategoryId:e.shopCategoryId,shopId:e.shopId,productId:e.productId},null,8,["immediateLog","shopCategoryId","shopId","productId"])]),_:1})],64)}}}),[["__scopeId","data-v-7b8010b7"]]);export{Ce as _,ee as a,Me as b};
