import{u as C,c as N}from"./shopProductCategory-o4waiUa_.js";import{d as P,cf as S,cU as i,r,o as I,J as k,j as M,g as b,i as L,db as V}from"./index-BGgofOm4.js";const T=P({__name:"SelectShopProductCategory",props:S({multiple:{type:Boolean,default:!1},categoryList:{type:Array,default:()=>[]}},{categoryId:{},categoryIdModifiers:{},categoryName:{},categoryNameModifiers:{}}),emits:["update:categoryId","update:categoryName"],setup(c){const o=c,t=i(c,"categoryId"),u=i(c,"categoryName"),y={label:"categoryName",value:"categoryId",children:"children",multiple:o.multiple,checkStrictly:!0},s=C(),l=r([]),n=r(!1),g=r(!1);r(!1),I(()=>{o.categoryList.length>1?l.value=o.categoryList:d()});const d=async()=>{if(g.value!==!0){if(n.value=!0,s.shopProductCategoryTree!==null){l.value=s.shopProductCategoryTree;return}try{const e=await N();l.value=e,s.shopProductCategoryTree=e}catch(e){k.error(e.message)}finally{n.value=!1,g.value=!0}}},p=r(),f=e=>{if(o.multiple==!0)t.value=e==null?void 0:e.map(a=>a[a.length-1]);else{const a=p.value.getCheckedNodes();u.value=a[0]?a[0].text:"",console.log(e?e[e.length-1]:0),t.value=e?e[e.length-1]:0}},m=e=>{e&&d()},v=()=>{o.multiple==!0?t.value=[]:(t.value=0,u.value="")};return(e,a)=>(b(),M(L(V),{ref_key:"cascaderRef",ref:p,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=h=>t.value=h),options:l.value,props:y,class:"cascader",clearable:"",placeholder:"选择分类",onChange:f,onClear:v,onVisibleChange:m},null,8,["modelValue","options"]))}});export{T as _};
