import{Z as ye,d as Re,P as Ve,a9 as _e,r as ve,o as Ge,aa as Ye,e as p,f as o,g as n,h as t,y as i,l as m,F as Ce,m as Ae,j as D,k as v,K as _,n as Ne,i as x,t as u,J as fe,ab as Pe,_ as Ee}from"./index-BGgofOm4.js";import Me from"./OrderamountStatistics-BBmm7JT3.js";import Le from"./OrderNumberStatistics-CGcDF_7z.js";import{r as Oe}from"./export-BTRfiJpP.js";import"./index-Bb6yjXMn.js";const Ue=f=>ye({url:"panel/salesStatistics/list",method:"get",params:f}),Be=f=>ye({url:"panel/salesStatistics/list",method:"get",responseType:"arraybuffer",params:f}),Fe={class:"container"},ze={class:"content_wrapper"},qe={class:"filtrate-menu"},Ie={class:"main-panel"},je={class:"main-panel-item"},Je={class:"main-panel-item-value"},Ke={class:"main-panel-item-increase"},Xe={key:0,class:"admin-iconfont red f12 up"},Ze={key:1,class:"admin-iconfont green f12"},He={class:"main-panel-item"},Qe={class:"main-panel-item-value"},We={class:"main-panel-item-increase"},$e={key:0,class:"admin-iconfont red f12 up"},et={key:1,class:"admin-iconfont green f12"},tt={class:"main-panel-item"},at={class:"main-panel-item-value"},st={class:"main-panel-item-increase"},nt={key:0,class:"admin-iconfont red f12 up"},lt={key:1,class:"admin-iconfont green f12"},ot={key:0,class:"main-panel-item"},it={class:"main-panel-item-value"},rt={class:"main-panel-item-increase"},dt={key:0,class:"admin-iconfont red f12 up"},ut={key:1,class:"admin-iconfont green f12"},mt={key:1,class:"main-panel-item"},ct={class:"main-panel-item-value"},pt={class:"main-panel-item-increase"},_t={key:0,class:"admin-iconfont red f12 up"},vt={key:1,class:"admin-iconfont green f12"},ft={class:"chart"},yt=Re({__name:"List",setup(f){const w=Ve(),he=(s,e)=>{b()},l=_e({statisticType:"1",startEndTime:"",dateType:"1"}),c=_e({1:"",2:""}),ge=[{label:"按年筛选",value:"1"},{label:"按月筛选",value:"2"}],De=[{text:"本月",value:new Date},{text:"上月",value:()=>{const s=new Date;return s.setTime(s.getTime()-3600*1e3*24*30),s}},{text:"本年一月",value:()=>{const s=new Date;return new Date(s.getFullYear(),0,1)}}],we=[{text:"本年",value:()=>y(0)},{text:"去年",value:()=>y(1)},{text:"三年前",value:()=>y(3)},{text:"五年前",value:()=>y(5)}],y=s=>{const e=new Date;return new Date(e.getFullYear()-s,e.getMonth(),e.getDate())},a=ve();Pe("filterState",a);const b=async()=>{try{l.startEndTime=c[l.dateType];const s=await Ue(l);a.value=s;const{salesStatisticsData:e}=s,r=l.dateType==="1"?"月":"日";a.value.salesStatisticsData.horizontalAxis=e.horizontalAxis.map(k=>k+r)}catch(s){fe.error(s.message),console.error(s)}},T=()=>{b()},h=ve(!1),be=async()=>{h.value=!0;try{const s=await Be({...l,isExport:"1"});h.value=!1,Oe(s,"销售统计导出")}catch(s){fe.error(s.message)}finally{h.value=!1}};return Ge(()=>{const s=Ye(new Date);if(s){const e=s.split("-");for(const r in c)r==="1"&&(c[r]=e[0]),r==="2"&&(c[r]=e[0]+"-"+e[1])}b()}),(s,e)=>{var V,G,Y,C,A,N,P,E,M,L,O,U,B,F,z,q,I,j,J,K,X,Z,H,Q,W,$,ee,te,ae,se,ne,le,oe,ie,re,de,ue,me,ce,pe;const r=p("el-tab-pane"),k=p("el-tabs"),ke=p("el-option"),xe=p("el-select"),g=p("el-form-item"),S=p("el-date-picker"),R=p("el-button"),Te=p("el-form");return n(),o("div",Fe,[t("div",ze,[t("div",null,[i(k,{modelValue:l.statisticType,"onUpdate:modelValue":e[0]||(e[0]=d=>l.statisticType=d),onTabChange:he},{default:m(()=>[i(r,{label:"订单金额统计",name:"1"}),i(r,{label:"订单数统计",name:"0"})]),_:1},8,["modelValue"]),i(Te,{model:l},{default:m(()=>[t("div",qe,[i(g,{class:"mr-10"},{default:m(()=>[i(xe,{modelValue:l.dateType,"onUpdate:modelValue":e[1]||(e[1]=d=>l.dateType=d),placeholder:"Select",style:{width:"94.5px"},onChange:T},{default:m(()=>[(n(),o(Ce,null,Ae(ge,(d,Se)=>i(ke,{key:Se,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),i(g,{class:"mr-10"},{default:m(()=>[l.dateType==="2"?(n(),D(S,{key:0,style:{width:"200px"},shortcuts:De,modelValue:c[2],"onUpdate:modelValue":e[2]||(e[2]=d=>c[2]=d),"value-format":"YYYY-MM",type:"month",editable:!1},null,8,["modelValue"])):v("",!0),l.dateType==="1"?(n(),D(S,{key:1,modelValue:c[1],"onUpdate:modelValue":e[3]||(e[3]=d=>c[1]=d),type:"year","value-format":"YYYY",style:{width:"200px"},editable:!1,shortcuts:we},null,8,["modelValue"])):v("",!0)]),_:1}),i(g,{class:"mr-10"},{default:m(()=>[i(R,{plain:"",onClick:T},{default:m(()=>e[4]||(e[4]=[_("搜索",-1)])),_:1,__:[4]})]),_:1}),i(g,null,{default:m(()=>[i(R,{plain:"",onClick:be,loading:h.value},{default:m(()=>e[5]||(e[5]=[_("导出EXCEL",-1)])),_:1,__:[5]},8,["loading"])]),_:1})])]),_:1},8,["model"]),t("div",Ie,[t("ul",{class:Ne({three:x(w)!=="admin"})},[t("li",je,[e[7]||(e[7]=t("div",{class:"main-panel-item-title"},"商品支付金额",-1)),t("div",Je,u(((G=(V=a.value)==null?void 0:V.salesData)==null?void 0:G.productPayment)??0),1),t("div",Ke,[e[6]||(e[6]=_(" 环比： ",-1)),t("span",null,u((C=(Y=a.value)==null?void 0:Y.salesData)==null?void 0:C.productPaymentGrowthRate)+"%",1),((N=(A=a.value)==null?void 0:A.salesData)==null?void 0:N.productPaymentGrowthRate.toString())!=="--"&&Number((E=(P=a.value)==null?void 0:P.salesData)==null?void 0:E.productPaymentGrowthRate)>0?(n(),o("i",Xe,"")):(n(),o("i",Ze,""))])]),t("li",He,[e[9]||(e[9]=t("div",{class:"main-panel-item-title"},"商品退款金额",-1)),t("div",Qe,u(((L=(M=a.value)==null?void 0:M.salesData)==null?void 0:L.productRefund)??0),1),t("div",We,[e[8]||(e[8]=_(" 环比： ",-1)),t("span",null,u((U=(O=a.value)==null?void 0:O.salesData)==null?void 0:U.productRefundGrowthRate)+"%",1),((F=(B=a.value)==null?void 0:B.salesData)==null?void 0:F.productRefundGrowthRate.toString())!=="--"&&Number((q=(z=a.value)==null?void 0:z.salesData)==null?void 0:q.productRefundGrowthRate)>0?(n(),o("i",$e,"")):(n(),o("i",et,""))])]),t("li",tt,[e[11]||(e[11]=t("div",{class:"main-panel-item-title"},"营业额",-1)),t("div",at,u(((j=(I=a.value)==null?void 0:I.salesData)==null?void 0:j.turnover)??0),1),t("div",st,[e[10]||(e[10]=_(" 环比： ",-1)),t("span",null,u((K=(J=a.value)==null?void 0:J.salesData)==null?void 0:K.turnoverGrowthRate)+"%",1),((Z=(X=a.value)==null?void 0:X.salesData)==null?void 0:Z.turnoverGrowthRate.toString())!=="--"&&Number((Q=(H=a.value)==null?void 0:H.salesData)==null?void 0:Q.turnoverGrowthRate)>0?(n(),o("i",nt,"")):(n(),o("i",lt,""))])]),x(w)==="admin"?(n(),o("li",ot,[e[13]||(e[13]=t("div",{class:"main-panel-item-title"},"充值金额",-1)),t("div",it,u((($=(W=a.value)==null?void 0:W.salesData)==null?void 0:$.rechargeAmount)??0),1),t("div",rt,[e[12]||(e[12]=_(" 环比： ",-1)),t("span",null,u((te=(ee=a.value)==null?void 0:ee.salesData)==null?void 0:te.rechargeAmountGrowthRate)+"%",1),((se=(ae=a.value)==null?void 0:ae.salesData)==null?void 0:se.rechargeAmountGrowthRate.toString())!=="--"&&Number((le=(ne=a.value)==null?void 0:ne.salesData)==null?void 0:le.rechargeAmountGrowthRate)>0?(n(),o("i",dt,"")):(n(),o("i",ut,""))])])):v("",!0),x(w)==="admin"?(n(),o("li",mt,[e[15]||(e[15]=t("div",{class:"main-panel-item-title"},"余额支付金额",-1)),t("div",ct,u(((ie=(oe=a.value)==null?void 0:oe.salesData)==null?void 0:ie.balancePayment)??0),1),t("div",pt,[e[14]||(e[14]=_(" 环比： ",-1)),t("span",null,u((de=(re=a.value)==null?void 0:re.salesData)==null?void 0:de.balancePaymentGrowthRate)+"%",1),((me=(ue=a.value)==null?void 0:ue.salesData)==null?void 0:me.balancePaymentGrowthRate.toString())!=="--"&&Number((pe=(ce=a.value)==null?void 0:ce.salesData)==null?void 0:pe.balancePaymentGrowthRate)>0?(n(),o("i",_t,"")):(n(),o("i",vt,""))])])):v("",!0)],2)])]),t("div",ft,[l.statisticType==="1"?(n(),D(Me,{key:0})):v("",!0),l.statisticType==="0"?(n(),D(Le,{key:1})):v("",!0)])])])}}}),kt=Ee(yt,[["__scopeId","data-v-a53d056f"]]);export{kt as default};
