import{d as D,a as N,r as f,a2 as q,e as s,f as c,g as u,h as v,y as a,l as o,E as F,i as g,j as V,F as k,K as E,I as $,J as T}from"./index-BGgofOm4.js";import{u as j}from"./messageLog-dYb0Kw0R.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import"./index-BdoKLCH8.js";/* empty css                                                                    */import{_ as J}from"./SelectRankList.vue_vue_type_script_setup_true_lang-w0arOoGG.js";/* empty css                                                                              */import{S as K}from"./SelectLink-BgkTQE9W.js";import{_ as M}from"./SelectUser.vue_vue_type_script_setup_true_lang-DtC9jXFY.js";import"./time-BL_Iz6xX.js";import"./index-BS7Hjr9I.js";import"./userRank-BYo4ZadJ.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./user-DX0YfmVA.js";const z={class:"container"},A={class:"content_wrapper"},G={class:"lyecs-form-table"},re=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(U,{expose:w,emit:I}){const d=I,r=U,_=N().currentRoute.value.query,x=f(r.isDialog?r.act:String(_.act)),C=f(r.isDialog?r.id:Number(_.id)),S=x.value==="add"?"create":"update",y=q(),e=f({}),b=async()=>{await y.value.validate();try{d("update:confirmLoading",!0);const m=await j(S,{id:C.value,...e.value});d("submitCallback",m),T.success("操作成功")}catch(m){T.error(m.message)}finally{d("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{b()}}),(m,t)=>{const p=s("TigInput"),n=s("el-form-item"),i=s("el-option"),L=s("el-select"),R=s("el-button"),B=s("el-form");return u(),c("div",z,[v("div",A,[v("div",G,[a(B,{ref_key:"formRef",ref:y,model:e.value,"label-width":"auto"},{default:o(()=>[a(n,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"messageTitle"},{default:o(()=>[a(p,{classType:"tig-form-input",modelValue:e.value.messageTitle,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.messageTitle=l)},null,8,["modelValue"])]),_:1}),a(n,{rules:[{required:!0,message:"内容不能为空!"}],label:"内容",prop:"messageContent"},{default:o(()=>[a(p,{classType:"tig-form-input",modelValue:e.value.messageContent,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.messageContent=l),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),a(n,{label:"链接",prop:"messageLink"},{default:o(()=>[a(g(K),{modelValue:e.value.messageLink,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.messageLink=l)},null,8,["modelValue"])]),_:1}),a(n,{label:"发送类型",prop:"sendUserType"},{default:o(()=>[a(L,{modelValue:e.value.sendUserType,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.sendUserType=l),style:{width:"100%","margin-bottom":"20px"}},{default:o(()=>[a(i,{value:0,label:"全部会员"}),a(i,{value:1,label:"单个会员"}),a(i,{value:2,label:"会员等级"}),a(i,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.sendUserType===1?(u(),V(g(M),{key:0,multiple:!1,userId:e.value.userIds,"onUpdate:userId":t[4]||(t[4]=l=>e.value.userIds=l)},null,8,["userId"])):e.value.sendUserType===2?(u(),V(g(J),{key:1,modelValue:e.value.userRank,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.userRank=l)},null,8,["modelValue"])):e.value.sendUserType===3?(u(),c(k,{key:2},[a(p,{classType:"tig-form-input",modelValue:e.value.userIds,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.userIds=l),row:2,type:"textarea"},null,8,["modelValue"]),t[7]||(t[7]=v("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1))],64)):(u(),c(k,{key:3},[],64))]),_:1}),F(a(n,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:o(()=>t[8]||(t[8]=[E("提交",-1)])),_:1,__:[8]},512)]),_:1},512),[[$,!r.isDialog]])]),_:1},8,["model"])])])])}}});export{re as default};
