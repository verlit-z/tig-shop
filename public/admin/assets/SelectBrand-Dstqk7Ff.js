/* empty css             */import{d as j,cf as S,cU as A,r,v as E,a9 as J,o as K,e as s,f as g,g as v,h as n,y as o,k as w,l as i,K as L,n as O,i as q,J as G,_ as H}from"./index-BGgofOm4.js";/* empty css                                                                    */import{P as Q}from"./Pagination-Nz0PhK3s.js";import{a as W}from"./brand-JXPhU1RM.js";const X={class:"container",style:{position:"relative",height:"100%"}},Y={class:"content_wrapper"},Z={class:"",style:{position:"absolute",top:"0",bottom:"0","overflow-y":"auto",width:"100%"}},$={class:"list-table-tool lyecs-search-warp",style:{position:"absolute",top:"0"}},ee={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},te={class:"list-table-tool-col"},oe={style:{"padding-right":"15px","box-sizing":"border-box"}},le={class:"empty-warp"},ae={key:0,class:"empty-bg"},se={key:0,class:"pagination-con",style:{position:"absolute",bottom:"0","justify-content":"right",display:"flex",width:"100%",margin:"0"}},ne=j({__name:"SelectBrand",props:S({selectedIds:{type:Array,default:[]},isMultiple:{type:Boolean,default:!0}},{linkSelectData:{},linkSelectDataModifiers:{}}),emits:S(["submitCallback","okType"],["update:linkSelectData"]),setup(m,{expose:x,emit:C}){const b=m,p=C,I=A(m,"linkSelectData");p("okType",!1),r(1);const c=r(!0),l=r([]),u=r(0),z=E(),y=r([]),a=J({page:1,size:z.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),_=async()=>{c.value=!0;try{const t=await W({...a});y.value=t.records,u.value=t.total}catch(t){G.error(t.message)}finally{c.value=!1}};K(()=>{_()});const h=t=>{_()},M=t=>{b.isMultiple&&(l.value=t.map(e=>e.brandId),p("okType",l.value.length>0))},f=r(),B=(t,e)=>{if(!b.isMultiple){if(f.value.clearSelection(),t.length==0){l.value=[];return}f.value.toggleRowSelection(e,!0),l.value.length=0,l.value.push(e.brandId),p("okType",l.value.length>0),I.value={path:"brand",label:"品牌",name:e.brandName,id:e.brandId,data:{id:e.brandId}}}},T=(t,e)=>!b.selectedIds.includes(t.brandId);return x({onFormSubmit:()=>{console.log(l.value),p("submitCallback",l.value)}}),(t,e)=>{const V=s("TigInput"),N=s("el-button"),D=s("el-space"),F=s("el-form"),k=s("el-table-column"),R=s("el-table"),U=s("a-spin"),P=s("perfect-scrollbar");return v(),g("div",X,[n("div",Y,[n("div",Z,[n("div",$,[o(F,{model:a,name:"form",onFinish:h},{default:i(()=>[n("div",ee,[n("div",te,[o(D,null,{default:i(()=>[o(V,{modelValue:a.keyword,"onUpdate:modelValue":e[0]||(e[0]=d=>a.keyword=d),placeholder:"请输入搜索关键字"},null,8,["modelValue"]),o(N,{onClick:h},{default:i(()=>e[3]||(e[3]=[L("搜索",-1)])),_:1,__:[3]})]),_:1})]),e[4]||(e[4]=n("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),o(P,{class:"table-container",style:{position:"absolute",top:"50px",bottom:"50px","overflow-y":"auto",width:"100%"}},{default:i(()=>[o(U,{spinning:c.value},{default:i(()=>[n("div",oe,[o(R,{class:O([m.isMultiple?"":"hide-checkbox","result-table"]),ref_key:"tableRef",ref:f,data:y.value,"row-key":"brandId",onSelect:B,onSelectionChange:M,total:u.value,loading:c.value},{empty:i(()=>[n("div",le,[c.value?w("",!0):(v(),g("div",ae,"暂无数据"))])]),default:i(()=>[o(k,{selectable:T,type:"selection",width:"32"}),o(k,{label:"品牌名称",prop:"brandName"})]),_:1},8,["class","data","total","loading"])])]),_:1},8,["spinning"])]),_:1}),u.value>0?(v(),g("div",se,[o(q(Q),{page:a.page,"onUpdate:page":e[1]||(e[1]=d=>a.page=d),size:a.size,"onUpdate:size":e[2]||(e[2]=d=>a.size=d),total:u.value,onCallback:_},null,8,["page","size","total"])])):w("",!0)])])])}}}),me=H(ne,[["__scopeId","data-v-887fbc85"]]);export{me as default};
