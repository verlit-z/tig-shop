/* empty css             */import"./index-BdoKLCH8.js";import{Z as D,d as U,P as E,a as J,v as M,a9 as C,r as h,o as R,e as r,f as d,g as i,h as t,F as P,m as L,n as Z,t as x,y as s,l as a,k as c,j as _,i as v,J as G,_ as H}from"./index-BGgofOm4.js";/* empty css                                                                    */import{P as K}from"./Pagination-Nz0PhK3s.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const Q=T=>D({url:"promotion/promotion/list",method:"get",params:T}),W=()=>D({url:"promotion/promotion/getPromotionCount",method:"get"}),X={class:"container"},Y={class:"content_wrapper"},tt={class:"row"},et={class:"col activity"},ot={class:"tabs flex"},at=["onClick"],st={class:"num"},lt={class:"txt"},nt={class:"col"},it={class:"col"},pt={style:{position:"relative"}},rt=["onClick"],dt={class:"empty-warp"},ct={key:0,class:"empty-bg"},ut={key:0,class:"pagination-con"},mt=U({__name:"List",setup(T){E();const w=J(),N=M(),y=C([{value:1,label:"进行中的活动",num:"-"},{value:2,label:"7天内到期活动",num:"-"},{value:3,label:"未开始活动",num:"-"}]),I=C([{value:0,label:"全部"},{value:1,label:"秒杀"},{value:2,label:"优惠券"}]),l=C({page:1,size:N.get("pageSize"),sortField:"",sortOrder:"",timeType:1,types:0}),z=h([]),u=h(!0),f=h(0),p=async()=>{u.value=!0;let n=[];l.types===0?n=[]:l.types===3?n=[3,4]:n=[l.types];try{const e=await W();y[0].num=e.timeType1Count,y[1].num=e.timeType2Count,y[2].num=e.timeType3Count;const m=await Q({...l,type:n.join(",")});z.value=m.records,f.value=m.total}catch(e){G.error(e.message)}finally{u.value=!1}};R(()=>{p()});const O=n=>{l.timeType=n,p()},S=n=>{l.types=I[n].value,p()},g=n=>{switch(n){case 1:w.push({path:"/promotion/seckill/list"});break;case 2:w.push({path:"/promotion/coupon/list"});break}};return(n,e)=>{const m=r("el-col"),$=r("el-row"),B=r("el-tab-pane"),F=r("el-tabs"),b=r("el-table-column"),A=r("el-divider"),V=r("el-table"),j=r("a-spin");return i(),d("div",X,[t("div",Y,[t("div",tt,[t("div",et,[t("div",null,[e[4]||(e[4]=t("div",{class:"tip"},"仅统计优惠券、秒杀",-1)),t("div",ot,[(i(!0),d(P,null,L(y,o=>(i(),d("div",{class:Z([{active:o.value==l.timeType},"item"]),onClick:q=>O(o.value)},[t("div",st,x(o.num),1),t("div",lt,x(o.label),1)],10,at))),256))])])]),t("div",nt,[t("div",null,[e[7]||(e[7]=t("h2",null,"商家常用",-1)),s($,{gutter:16,class:"app-wrapper cursor-pointer"},{default:a(()=>[s(m,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:e[0]||(e[0]=o=>g(2))},{default:a(()=>e[5]||(e[5]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-youhuiquan"})]),t("div",null,[t("div",{class:"name"},"优惠券"),t("div",{class:"tip"},"向客户发放店铺优惠券")])],-1)])),_:1,__:[5]}),s(m,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:e[1]||(e[1]=o=>g(1))},{default:a(()=>e[6]||(e[6]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-miaosha"})]),t("div",null,[t("div",{class:"name"},"限时秒杀"),t("div",{class:"tip"},"快速抢购引导顾客更多消费")])],-1)])),_:1,__:[6]})]),_:1})])]),t("div",it,[e[12]||(e[12]=t("h2",null,"活动记录",-1)),s(F,{type:"card",onTabChange:S},{default:a(()=>[(i(!0),d(P,null,L(I,o=>(i(),_(B,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:1}),s(j,{spinning:u.value},{default:a(()=>[s(V,{data:z.value,loading:u.value,total:f.value,"row-key":"couponId"},{empty:a(()=>[t("div",dt,[u.value?c("",!0):(i(),d("div",ct,"暂无数据"))])]),default:a(()=>[s(b,{label:"活动名称",prop:"promotionName",width:"300"},{default:a(({row:o})=>[t("div",pt,[t("div",null,x(o.promotionName||"--"),1)])]),_:1}),s(b,{label:"活动类型",prop:"typeText",width:"300"}),s(b,{label:"活动时间",prop:"timeText"}),s(b,{label:"操作",width:"110"},{default:a(({row:o})=>[t("a",{class:"btn-link",onClick:q=>g(o.type)},"查看",8,rt),s(A,{direction:"vertical"}),o.type==1?(i(),_(v(k),{key:0,params:{act:"detail",id:o.relationId},isDrawer:"",path:"promotion/seckill/Info",title:"编辑限时秒杀",width:"800px",onOkCallback:p},{default:a(()=>e[8]||(e[8]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[8]},1032,["params"])):c("",!0),o.type==2?(i(),_(v(k),{key:1,params:{act:"detail",id:o.relationId},isDrawer:"",path:"promotion/coupon/Info",title:"编辑优惠券",width:"800px",onOkCallback:p},{default:a(()=>e[9]||(e[9]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[9]},1032,["params"])):c("",!0),o.type==6?(i(),_(v(k),{key:2,params:{act:"detail",id:o.relationId},isDrawer:"",path:"promotion/productActivity/limitdiscount/Info",title:"编辑限时折扣",width:"900px",onOkCallback:p},{default:a(()=>e[10]||(e[10]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[10]},1032,["params"])):c("",!0),o.type==3||o.type==5||o.type==4?(i(),_(v(k),{key:3,params:{act:"detail",id:o.relationId,promotionType:o.type==4?2:o.type==3?1:3},isDrawer:"",path:"promotion/productActivity/Info",title:"编辑优惠活动",width:"800px",onOkCallback:p},{default:a(()=>e[11]||(e[11]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[11]},1032,["params"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(i(),d("div",ut,[s(v(K),{page:l.page,"onUpdate:page":e[2]||(e[2]=o=>l.page=o),size:l.size,"onUpdate:size":e[3]||(e[3]=o=>l.size=o),total:f.value,onCallback:p},null,8,["page","size","total"])])):c("",!0)])])])])}}}),Ct=H(mt,[["__scopeId","data-v-30f579a2"]]);export{Ct as default};
