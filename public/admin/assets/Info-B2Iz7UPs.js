import{d as T,r as d,a as R,a2 as U,o as F,J as f,e as u,f as L,g as w,h as v,j as q,k as P,l as a,y as t,E as j,i as E,K as _,I as A}from"./index-BGgofOm4.js";import{F as G}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-CloSefEz.js";import"./index-BdoKLCH8.js";import"./vuedraggable.umd-CLczY9wy.js";import{a as J,c as K}from"./productServices-BcG-Bxgz.js";import"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import"./format-CpNC4fsQ.js";import"./BusinessImg-Dt_2PeVb.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const M={class:"container"},$={class:"content_wrapper"},z={class:"lyecs-form-table"},le=T({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:x,emit:N}){const i=N,n=k,m=d(!0),g=R().currentRoute.value.query,p=d(n.isDialog?n.act:String(g.act)),b=d(n.isDialog?n.id:Number(g.id)),C=p.value==="add"?"create":"update",y=U(),o=d({sortOrder:50,defaultOn:1});F(()=>{p.value==="detail"?D():m.value=!1});const D=async()=>{try{const r=await J(p.value,{id:b.value});Object.assign(o.value,r)}catch(r){f.error(r.message),i("close")}finally{m.value=!1}},V=async()=>{await y.value.validate();try{i("update:confirmLoading",!0);const r=await K(C,{id:b.value,...o.value});i("submitCallback",r),f.success("操作成功")}catch(r){f.error(r.message)}finally{i("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{V()}}),(r,e)=>{const c=u("TigInput"),s=u("el-form-item"),S=u("el-radio"),O=u("el-radio-group"),B=u("el-button"),I=u("el-form");return w(),L("div",M,[v("div",$,[v("div",z,[m.value?P("",!0):(w(),q(I,{key:0,ref_key:"formRef",ref:y,model:o.value,"label-width":"auto"},{default:a(()=>[t(s,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"productServiceName"},{default:a(()=>[t(c,{classType:"tig-form-input",modelValue:o.value.productServiceName,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.productServiceName=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"简介"},{default:a(()=>[t(c,{classType:"tig-form-input",modelValue:o.value.productServiceDesc,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.productServiceDesc=l),rows:2,placeholder:"请输入简介",type:"textarea"},null,8,["modelValue"])]),_:1}),t(s,{label:"图标"},{default:a(()=>[t(E(G),{photo:o.value.icoImg,"onUpdate:photo":e[2]||(e[2]=l=>o.value.icoImg=l)},null,8,["photo"]),e[6]||(e[6]=v("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1,__:[6]}),t(s,{label:"排序"},{default:a(()=>[t(c,{classType:"tig-form-input",type:"integer",modelValue:o.value.sortOrder,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"是否默认"},{default:a(()=>[t(O,{modelValue:o.value.defaultOn,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.defaultOn=l)},{default:a(()=>[t(S,{value:1},{default:a(()=>e[7]||(e[7]=[_("是",-1)])),_:1,__:[7]}),t(S,{value:0},{default:a(()=>e[8]||(e[8]=[_("否",-1)])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1}),j(t(s,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[5]||(e[5]=l=>V())},{default:a(()=>e[9]||(e[9]=[_("提交",-1)])),_:1,__:[9]},512)]),_:1},512),[[A,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{le as default};
