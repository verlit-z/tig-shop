import{d as q,r as d,a as I,a2 as D,o as L,e as s,f as j,g as n,h as u,j as p,k as f,y as l,l as t,t as y,K as F,J as b}from"./index-BGgofOm4.js";import{a as P,u as U}from"./enquiry-Bc5HzB_x.js";const E={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},A=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:B,emit:C}){const i=C,m=x,c=d(!0),g=I().currentRoute.value.query,_=d(m.isDialog?m.act:String(g.act)),k=d(m.isDialog?m.id:Number(g.id));_.value;const w=D(),e=d({}),S=async()=>{try{const a=await P(_.value,{id:k.value});Object.assign(e.value,a)}catch(a){b.error(a.message),i("close")}finally{c.value=!1}};L(()=>{_.value==="detail"?S():c.value=!1});const V=async()=>{await w.value.validate();try{i("update:confirmLoading",!0);const a=await U({id:k.value,remark:e.value.remark});i("submitCallback",a),b.success("操作成功")}catch(a){b.error(a.message)}finally{i("update:confirmLoading",!1)}};return B({onFormSubmit:()=>{V()}}),(a,o)=>{const r=s("el-form-item"),h=s("TigInput"),T=s("el-button"),N=s("el-form"),R=s("a-spin");return n(),j("div",E,[u("div",J,[u("div",K,[c.value?f("",!0):(n(),p(N,{key:0,ref_key:"formRef",ref:w,model:e.value,"label-width":"auto"},{default:t(()=>[l(r,{label:"联系方式",prop:"mobile"},{default:t(()=>[u("div",null,y(e.value.mobile),1)]),_:1}),l(r,{label:"询价内容",prop:"content"},{default:t(()=>[u("div",null,y(e.value.content),1)]),_:1}),l(r,{label:"创建时间",prop:"createTime"},{default:t(()=>[u("div",null,y(e.value.createTime),1)]),_:1}),e.value.status===1?(n(),p(r,{key:0,label:"回复内容",prop:"remark"},{default:t(()=>[l(h,{classType:"tig-form-input",modelValue:e.value.remark,"onUpdate:modelValue":o[0]||(o[0]=v=>e.value.remark=v),rows:6,type:"textarea",disabled:"",placeholder:"请输入回复内容"},null,8,["modelValue"])]),_:1})):f("",!0),e.value.status===0?(n(),p(r,{key:1,label:"回复内容",prop:"remark",rules:[{required:!0,message:"请输入回复内容"}]},{default:t(()=>[l(h,{classType:"tig-form-input",modelValue:e.value.remark,"onUpdate:modelValue":o[1]||(o[1]=v=>e.value.remark=v),rows:6,type:"textarea",placeholder:"请输入回复内容"},null,8,["modelValue"])]),_:1})):f("",!0),e.value.status===0?(n(),p(r,{key:2,label:" "},{default:t(()=>[l(T,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:V},{default:t(()=>o[2]||(o[2]=[F("提交",-1)])),_:1,__:[2]},512)]),_:1})):f("",!0)]),_:1},8,["model"])),l(R,{spinning:c.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{A as default};
