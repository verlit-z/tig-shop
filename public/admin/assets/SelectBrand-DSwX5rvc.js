import{f as j}from"./brand-JXPhU1RM.js";import{d as D,cf as y,cU as C,o as E,r as o,J,e as p,j as B,g as s,l as v,y as I,h as l,f as m,k as K,n as x,F as N,m as k,t as F,K as T,_ as q}from"./index-BGgofOm4.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";const G={class:"option"},H={key:0,class:"all_brand"},P=["onClick"],Q={class:"right"},R={class:"scroll-container"},X=D({__name:"SelectBrand",props:y({multiple:{type:Boolean,default:!1},firstWordList:{type:Array,default:()=>[]},brandList:{type:Array,default:()=>[]},allBrandList:{type:Array,default:()=>[]}},{brandId:{},brandIdModifiers:{},brandForm:{},brandFormModifiers:{}}),emits:y(["update:brandId","update:brandIds","update:brandForm","onChange"],["update:brandId","update:brandForm"]),setup(d,{emit:V}){const n=d,f=V,_=C(d,"brandId"),W=C(d,"brandForm"),w={label:"brandName",value:"brandId"},M=(e,a)=>a.brandName.toLowerCase().indexOf(e.toLowerCase())>=0,S=e=>{r.value.map(a=>{a.brandId==e&&(W.value=a)}),n.multiple?f("update:brandIds",e):f("update:brandId",e),i.value="全部",f("onChange",e)};E(()=>{n.brandList.length>1&&n.firstWordList.length>1&&n.allBrandList.length>1?(r.value=n.brandList,u.value=n.firstWordList,c.value=n.allBrandList):h()});const g=o(!1),i=o("全部"),u=o([]),r=o([]),c=o([]),h=async()=>{try{const e=await j();u.value=e.firstWordList,r.value=e.brandList,c.value=e.brandList}catch(e){J.error(e.message)}finally{g.value=!0}},L=(e,a)=>{if(i.value=a,a=="全部"){r.value=c.value;return}r.value=c.value.filter(b=>b.firstWord==a)};return(e,a)=>{const b=p("el-divider"),z=p("el-option"),A=p("a-spin"),O=p("el-select");return s(),B(O,{multiple:d.multiple,modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=t=>_.value=t),allowClear:!0,fieldNames:w,"filter-option":M,clearable:"",filterable:"",placeholder:"选择品牌","popper-class":"brand-select","show-search":"",onChange:S,onVisibleChange:h},{default:v(()=>[l("div",G,[u.value?(s(),m("div",H,[l("ul",null,[l("li",{class:x(i.value=="全部"?"current":"")},[l("a",{onClick:a[0]||(a[0]=t=>L(t,"全部"))},"全部")],2),(s(!0),m(N,null,k(u.value,(t,Y)=>(s(),m("li",{class:x(i.value==t?"current":"")},[l("a",{onClick:U=>L(U,t)},F(t),9,P)],2))),256))]),I(b,{style:{margin:"4px 0 12px"}})])):K("",!0),l("div",Q,[l("div",R,[(s(!0),m(N,null,k(r.value,t=>(s(),B(z,{key:t.brandId,label:t.brandName,value:t.brandId},{default:v(()=>[T(F(t.brandName),1)]),_:2},1032,["label","value"]))),128))])])])]),empty:v(()=>[I(A,{spinning:!g.value,size:"small",style:{width:"100%","padding-top":"150px"}},null,8,["spinning"])]),_:1},8,["multiple","modelValue"])}}}),ae=q(X,[["__scopeId","data-v-9bba8f85"]]);export{ae as S};
