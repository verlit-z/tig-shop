import{_ as R}from"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import{i as A}from"./format-CpNC4fsQ.js";import{d as D}from"./adminMsg-gG9brnJg.js";import{d as N,bY as S,em as T,r as u,a as F,e as L,f as o,g as l,k as _,h as e,y as m,i as f,t as r,n as p,F as O,m as V,K as B,J as h,_ as M}from"./index-BGgofOm4.js";import{c as $}from"./order-BPrSE32N.js";import{_ as g}from"./DetailBtn.vue_vue_type_script_setup_true_lang-ELYGUIHh.js";import{c as z}from"./aftersales-CDgWk3jn.js";import"./index-BdoKLCH8.js";import"./index-BS7Hjr9I.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";const H={key:0,class:"loading-box"},j={class:"loading-inner"},q={class:"left"},E={class:"text"},J={class:"right"},K={class:"time"},U={style:{margin:"10px"}},Y={key:0},G={key:0,class:"item"},P={class:"product_info"},Q={class:"info"},W={class:"txt"},X={key:1,class:"money_box"},Z={class:"more"},ee={key:1},te=["innerHTML"],se={class:"more"},ae=N({__name:"Collapse",props:{item:{type:Object,default:{}}},emits:["setReadedCallback","close"],setup(n,{emit:y}){const x=S(T,{spin:!0}),d=u(!1);F();const v=y,i=u(!1),k=u(!0),a=u(),b=async s=>{if(s.isReaded||(await D({msgId:s.msgId}),s.isReaded=1,v("setReadedCallback",!0)),!i.value&&s.relatedData.aftersaleId){await C(s.relatedData.aftersaleId);return}if(!i.value&&s.relatedData.orderId){await w(s.relatedData.orderId);return}i.value=!i.value,k.value=!1},w=async s=>{d.value=!0;try{const t=await $("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}},C=async s=>{d.value=!0;try{const t=await z("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}};return(s,t)=>{const I=L("a-spin");return l(),o("div",{class:p(["collapse",i.value?"show":"hide"])},[d.value?(l(),o("div",H,[e("div",j,[m(I,{size:"small",indicator:f(x)},null,8,["indicator"])])])):_("",!0),e("div",{class:p(["cell",n.item.isReaded==0?"unread":""]),onClick:t[0]||(t[0]=c=>b(n.item))},[e("div",q,[t[1]||(t[1]=e("div",{class:"badge"},null,-1)),e("div",E,r(n.item.title),1)]),e("div",J,[e("div",K,r(n.item.sendTime),1),t[2]||(t[2]=e("div",{class:"icon"},[e("i",{class:"nav-icon iconfont icon-xiala"})],-1))])],2),e("div",{class:p(["content_box",i.value?"show":"hide"])},[e("div",U,[a.value?(l(),o("div",Y,["items"in a.value?(l(),o("div",G,[(l(!0),o(O,null,V(a.value.items,c=>(l(),o("div",P,[e("div",Q,[m(f(R),{width:"60",src:f(A)(c.picThumb),fit:"contain"},null,8,["src"]),e("p",null,r(c.productName),1)]),e("div",W,[e("p",null,"¥"+r(c.price),1),e("p",null,"x "+r(c.quantity),1)])]))),256))])):_("",!0),"totalAmount"in a.value?(l(),o("div",X,[e("div",null,[B(" 订单金额：¥"+r(a.value.totalAmount)+" ",1),e("span",null,"(含运费："+r(a.value.shippingFee)+")",1)])])):_("",!0),e("div",Z,[m(g,{item:n.item,orderSn:a.value.orderSn},null,8,["item","orderSn"])])])):(l(),o("div",ee,[e("div",{class:"item",innerHTML:n.item.content},null,8,te),e("div",se,[m(g,{item:n.item},null,8,["item"])])]))])],2)],2)}}}),_e=M(ae,[["__scopeId","data-v-972a0a59"]]);export{_e as default};
