import{d as L,v as q,e as i,f as u,g as f,h as o,y as l,l as s,i as e,a0 as F,K as p,k as h,t as b,a4 as w,_ as R}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{D as $}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as E}from"./Pagination-Nz0PhK3s.js";import{d as j,b as G,g as H}from"./orderInvoice-I2_IPyqf.js";import{u as J}from"./useListRequest-DIT8yyoo.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const M={class:"container"},Q={class:"content_wrapper"},W={class:"container"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},ae={class:"simple-form-field"},se={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},pe={class:"simple-form-field"},ce={class:"simple-form-field"},_e={class:"list-table-tool-row"},me={class:"list-table-tool-col"},ue={key:0},fe={class:"table-container"},be={class:"btn-link"},ve={class:"empty-warp"},ge={key:0,class:"empty-bg"},ye={key:0,class:"pagination-con"},he=L({__name:"List",setup(ke){const V=q(),{listData:I,loading:v,total:g,selectedIds:y,filterParams:n,loadData:c,onSearchSubmit:r,onSortChange:T,onSelectChange:D,onBatchAction:x,resetParams:z}=J({apiFunction:H,idKey:"id",defaultParams:{page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:"",invoiceType:"",status:"",shopType:0}}),N=async k=>{await x(k,G)};return c(),(k,t)=>{const m=i("el-button"),O=i("TigInput"),_=i("el-option"),C=i("el-select"),A=i("el-popconfirm"),B=i("el-space"),d=i("el-table-column"),K=i("el-divider"),P=i("el-table"),U=i("a-spin");return f(),u("div",M,[o("div",Q,[o("div",W,[o("div",X,[o("div",Y,[o("div",Z,[o("div",ee,[o("div",te,[o("div",oe,[t[7]||(t[7]=o("label",{class:"control-label"},[o("span",null,"发票信息：")],-1)),o("div",le,[l(O,{modelValue:e(n).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>e(n).keyword=a),name:"keyword",placeholder:"输入内容",onKeyup:F(e(r),["enter"]),clearable:"",onClear:e(r)},{append:s(()=>[l(m,{onClick:e(r)},{default:s(()=>t[6]||(t[6]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[6]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),o("div",ae,[o("div",se,[t[8]||(t[8]=o("label",{class:"control-label"},[o("span",null,"发票类型：")],-1)),o("div",ne,[l(C,{modelValue:e(n).invoiceType,"onUpdate:modelValue":t[1]||(t[1]=a=>e(n).invoiceType=a),clearable:"",onChange:e(r)},{default:s(()=>[l(_,{value:1,label:"普通发票"}),l(_,{value:2,label:"增值发票"})]),_:1},8,["modelValue","onChange"])])])]),o("div",ie,[o("div",de,[t[9]||(t[9]=o("label",{class:"control-label"},[o("span",null,"发票状态：")],-1)),o("div",re,[l(C,{modelValue:e(n).status,"onUpdate:modelValue":t[2]||(t[2]=a=>e(n).status=a),clearable:"",onChange:e(r)},{default:s(()=>[l(_,{value:0,label:"待处理"}),l(_,{value:1,label:"已开"}),l(_,{value:2,label:"失败/作废"})]),_:1},8,["modelValue","onChange"])])])]),o("div",pe,[l(m,{type:"primary",plain:"",onClick:e(r)},{default:s(()=>t[10]||(t[10]=[p("搜索",-1)])),_:1,__:[10]},8,["onClick"])]),o("div",ce,[l(m,{plain:"",onClick:e(z)},{default:s(()=>t[11]||(t[11]=[p("重置",-1)])),_:1,__:[11]},8,["onClick"])])])])]),o("div",_e,[o("div",me,[l(B,null,{default:s(()=>[l(A,{title:"您确认要批量删除所选数据吗？",onConfirm:t[3]||(t[3]=a=>N("del"))},{reference:s(()=>[l(m,{disabled:e(y).length===0},{default:s(()=>t[12]||(t[12]=[p("批量删除",-1)])),_:1,__:[12]},8,["disabled"])]),_:1}),e(y).length>0?(f(),u("span",ue,[t[13]||(t[13]=p(" 已选择：",-1)),o("b",null,b(e(y).length),1),t[14]||(t[14]=p(" 项 ",-1))])):h("",!0)]),_:1})])]),o("div",fe,[l(U,{spinning:e(v)},{default:s(()=>[l(P,{data:e(I),loading:e(v),total:e(g),"row-key":"id",onSelectionChange:e(D),onSortChange:e(T)},{empty:s(()=>[o("div",ve,[e(v)?h("",!0):(f(),u("div",ge,"暂无数据"))])]),default:s(()=>[l(d,{type:"selection",width:"32"}),l(d,{label:"申请会员",prop:"username",width:"120"}),l(d,{label:"发票类型",width:"130"},{default:s(({row:a})=>[o("span",{style:w({color:a.invoiceType===2?"red":"black"})},b(a.invoiceTypeName),5)]),_:1}),l(d,{label:"公司名称/抬头",prop:"companyName"}),l(d,{label:"金额(￥)",prop:"amount",width:"80"}),l(d,{label:"申请订单"},{default:s(({row:a})=>[l(e(S),{params:{act:"detail",id:a.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+a.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:e(c)},{default:s(()=>[o("a",be,b(a.orderSn),1)]),_:2},1032,["params","title","onCallback"])]),_:1}),l(d,{width:160,label:"申请日期",prop:"addTime"}),l(d,{label:"申请状态"},{default:s(({row:a})=>[o("span",{style:w({color:a.status===1?"green":a.status===2?"black":"red"})},b(a.statusName),5)]),_:1}),l(d,{width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[l(e(S),{params:{act:"detail",id:a.id},isDrawer:"",path:"finance/orderInvoice/Info",title:"编辑发票申请",width:"700px",onOkCallback:e(c)},{default:s(()=>t[15]||(t[15]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[15]},1032,["params","onOkCallback"]),l(K,{direction:"vertical"}),l(e($),{params:{id:a.id},requestApi:e(j),onAfterDelete:e(c)},{default:s(()=>t[16]||(t[16]=[p("删除",-1)])),_:2,__:[16]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(g)>0?(f(),u("div",ye,[l(e(E),{page:e(n).page,"onUpdate:page":t[4]||(t[4]=a=>e(n).page=a),size:e(n).size,"onUpdate:size":t[5]||(t[5]=a=>e(n).size=a),total:e(g),onCallback:e(c)},null,8,["page","size","total","onCallback"])])):h("",!0)])])])])])}}}),Oe=R(he,[["__scopeId","data-v-79974b0c"]]);export{Oe as default};
