/* empty css             */import"./index-BdoKLCH8.js";import{_ as ee}from"./ProductBatch.vue_vue_type_script_setup_true_lang-N_9vWmgk.js";import{S as te}from"./SelectBrand-DSwX5rvc.js";import{_ as le}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DH07CGtZ.js";import{d as ae,a2 as oe,v as se,a9 as re,r as i,o as ne,e as c,f as u,g as r,h as m,y as l,l as a,F as h,m as L,j as I,K as V,t as R,i as T,k as b,J as v,_ as de}from"./index-BGgofOm4.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import{a as ie,d as ue,B as pe}from"./product-DiKWBvyV.js";/* empty css                                                                    */import{P as ce}from"./ProductCard-BI6ohnfl.js";/* empty css                                                                              */import{c as me}from"./category-0ZzOrTFu.js";import{f as _e}from"./brand-JXPhU1RM.js";import{_ as ye}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";import"./time-BL_Iz6xX.js";import"./format-CpNC4fsQ.js";const fe={class:"container"},ve={class:"content_wrapper"},be={class:"wrapper_title"},ge={style:{width:"100%"}},ke={class:"list-table-tool-row"},he={class:"list-table-tool-col"},Le={class:"wrapper_table"},Ie={class:"flex"},Ve={class:"flex-column-center"},Te={key:0},Be={key:1},xe={key:2},Se={key:3},Ce={key:4},Ue={key:5},Ne=ae({__name:"List",setup(Pe){const j=oe();se();const K=re({page:1,size:100,sortField:"",sortOrder:"",keyword:""}),y=i({type:[]}),z=i([{lable:"商品上下架状态",key:"productStatus",type:"status"},{lable:"商品名称",key:"productName",type:"input"},{lable:"商品分类",key:"categoryId",type:"category"},{lable:"商品品牌",key:"brandId",type:"brand"},{lable:"商品货号",key:"productSn",type:"input"},{lable:"条形编码",key:"productTsn",type:"input"},{lable:"商品售价",key:"productPrice",type:"input"},{lable:"市场价",key:"marketPrice",type:"input"},{lable:"运费模板",key:"shippingTplId",type:"shippingTpl"},{lable:"是否包邮",key:"freeShipping",type:"select"},{lable:"是否新品",key:"isNew",type:"select"},{lable:"是否精品",key:"isBest",type:"select"},{lable:"是否热销",key:"isHot",type:"select"},{lable:"排序",key:"sortOrder",type:"input"}]),F=i([{label:"上架",value:1},{label:"下架",value:0}]),$=i([{label:"是",value:1},{label:"否",value:0}]),_=i([]),A=i(0),W=i(!0),g=i([]),E=async s=>{try{s&&g.value.push(...s);const e=await ie({ids:g.value.join(","),...K});e.records.map(n=>{n.shippingTplId==0&&(n.shippingTplId="")}),_.value=e.records,A.value=e.total}catch(e){v.error(e.message)}finally{W.value=!1}},M=s=>{_.value.map(e=>{Object.assign(e,s)})},H=s=>{_.value=_.value.filter(n=>n.productId!==s);let e=[];_.value.map(n=>{e.push(n.productId)}),g.value=e},B=i([]),x=i([]),S=i([]),C=i([]),U=i([]),J=async()=>{try{const s=await ue();B.value=s.shippingTplList;const e=await me();x.value=e;const n=await _e();S.value=n.firstwordList,C.value=n.brandList,U.value=n.brandList}catch(s){v.error(s.message)}finally{W.value=!1}};ne(()=>{J()});const q=async()=>{if(_.value.length<1){v.error("未选择商品");return}if(y.value.type.length<1){v.error("未选择修改项");return}let s=Q();if(G(s))try{const e=await pe({editItems:s});v.success("操作成功"),D()}catch(e){v.error(e.message)}},D=()=>{_.value=[],y.value.type=[],g.value=[]},G=s=>{for(let e of s)if(e.productName==""||e.productSn=="")return v.error("商品名称或商品货号不能为空"),!1;return!0},Q=()=>{const s=["productId"],n=[...y.value.type.map(p=>p.key),...s];return _.value.map(p=>{const f={};return n.forEach(k=>{p[k]!==void 0&&(f[k]=p[k])}),f})};return(s,e)=>{const n=c("el-checkbox"),O=c("el-checkbox-group"),p=c("el-form-item"),f=c("el-button"),k=c("el-space"),N=c("el-table-column"),P=c("el-option"),w=c("el-select"),X=c("TigInput"),Y=c("el-table"),Z=c("el-form");return r(),u("div",fe,[m("div",ve,[m("div",be,[l(Z,{ref_key:"formRef",ref:j,model:y.value,"label-width":"auto"},{default:a(()=>[l(p,{label:"选择修改："},{default:a(()=>[l(O,{modelValue:y.value.type,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value.type=t)},{default:a(()=>[(r(!0),u(h,null,L(z.value,t=>(r(),I(n,{value:t,style:{"margin-bottom":"10px"}},{default:a(()=>[V(R(t.lable),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"商品信息："},{default:a(()=>[m("div",ge,[m("div",ke,[m("div",he,[l(k,null,{default:a(()=>[l(T(ye),{params:{selectedIds:g.value,isMultiple:!0},isDrawer:"",path:"product/product/src/SelectProduct",title:"选择商品",width:"600px",onOkCallback:E},{default:a(()=>[l(f,{type:"primary"},{default:a(()=>e[3]||(e[3]=[V("添加商品",-1)])),_:1,__:[3]})]),_:1},8,["params"])]),_:1})]),e[4]||(e[4]=m("div",{class:"list-table-tool-col"},null,-1))]),m("div",Le,[l(ee,{types:y.value.type,productStatusList:F.value,selectList:$.value,onCallback:M,categoryList:x.value,firstWordList:S.value,brandList:C.value,allBrandList:U.value,shippingTplList:B.value},null,8,["types","productStatusList","selectList","categoryList","firstWordList","brandList","allBrandList","shippingTplList"]),l(Y,{data:_.value,border:"",style:{width:"100%"},loading:""},{default:a(()=>[l(N,{label:"商品信息"},{default:a(({row:t})=>[m("div",Ie,[l(T(ce),{picThumb:t.picThumb,productId:t.productId,productName:t.productName},null,8,["picThumb","productId","productName"])])]),_:1}),(r(!0),u(h,null,L(y.value.type,t=>(r(),I(N,{width:"180",align:"center"},{header:a(()=>[m("div",Ve,[m("div",null,R(t.lable),1)])]),default:a(({row:d})=>[t.type=="status"?(r(),u("div",Te,[l(w,{modelValue:d[t.key],"onUpdate:modelValue":o=>d[t.key]=o},{default:a(()=>[(r(!0),u(h,null,L(F.value,o=>(r(),I(P,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),t.type=="shippingTpl"?(r(),u("div",Be,[l(w,{modelValue:d.shippingTplId,"onUpdate:modelValue":o=>d.shippingTplId=o},{default:a(()=>[(r(!0),u(h,null,L(B.value,o=>(r(),I(P,{label:o.shippingTplName,value:o.shippingTplId},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),t.type=="select"?(r(),u("div",xe,[l(w,{modelValue:d[t.key],"onUpdate:modelValue":o=>d[t.key]=o},{default:a(()=>[(r(!0),u(h,null,L($.value,o=>(r(),I(P,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),t.type=="input"?(r(),u("div",Se,[l(p,null,{default:a(()=>[l(X,{modelValue:d[t.key],"onUpdate:modelValue":o=>d[t.key]=o,placeholder:t.lable},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)])):b("",!0),t.key=="categoryId"?(r(),u("div",Ce,[l(p,null,{default:a(()=>[l(T(le),{categoryId:d.categoryId,"onUpdate:categoryId":o=>d.categoryId=o,categoryList:x.value},null,8,["categoryId","onUpdate:categoryId","categoryList"])]),_:2},1024)])):b("",!0),t.key=="brandId"?(r(),u("div",Ue,[l(p,null,{default:a(()=>[l(T(te),{brandId:d.brandId,"onUpdate:brandId":o=>d.brandId=o,firstWordList:S.value,brandList:C.value,allBrandList:U.value},null,8,["brandId","onUpdate:brandId","firstWordList","brandList","allBrandList"])]),_:2},1024)])):b("",!0)]),_:2},1024))),256)),l(N,{fixed:"right",label:"操作",width:"90",align:"center"},{default:a(({row:t})=>[l(f,{link:"",type:"primary",size:"small",onClick:d=>H(t.productId)},{default:a(()=>e[5]||(e[5]=[V(" 删除 ",-1)])),_:2,__:[5]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e[6]||(e[6]=m("div",{class:"extra"},"一次最多添加100个商品",-1))])])]),_:1}),l(p,{label:" "},{default:a(()=>[l(f,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[1]||(e[1]=t=>q())},{default:a(()=>e[7]||(e[7]=[V("提交 ",-1)])),_:1,__:[7]},512),l(f,{ref:"submitBtn",class:"form-submit-btn",onClick:e[2]||(e[2]=t=>D())},{default:a(()=>e[8]||(e[8]=[V("重置",-1)])),_:1,__:[8]},512)]),_:1})]),_:1},8,["model"])])])])}}}),Qe=de(Ne,[["__scopeId","data-v-617ae305"]]);export{Qe as default};
