import{d as M,v as P,e as n,f,g as p,h as s,y as o,l as a,i as e,K as d,k as _,t as C,p as R,a4 as F,j as w}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{D as S}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as O}from"./Pagination-Nz0PhK3s.js";import{r as U,d as $,b as K,g as j}from"./messageLog-dYb0Kw0R.js";import{u as E}from"./useListRequest-DIT8yyoo.js";import{_ as G}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const H={class:"container"},J={class:"content_wrapper"},Q={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},ee={class:"form-group"},te={class:"control-container"},oe={class:"simple-form-field"},se={class:"form-group"},ae={class:"simple-form-field"},le={class:"form-group"},ne={class:"simple-form-field"},ie={class:"form-group"},re={key:0},de={class:"table-container"},pe={class:"empty-warp"},me={key:0,class:"empty-bg"},_e={key:0,class:"pagination-con"},Se=M({__name:"List",setup(ce){const L=P(),{listData:D,loading:u,total:b,selectedIds:c,filterParams:r,loadData:m,onSearchSubmit:v,onSortChange:A,onSelectChange:z,onBatchAction:I}=E({apiFunction:j,idKey:"messageLogId",defaultParams:{page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",keyword:""}}),y=async k=>{await I(k,K)};return m(),(k,t)=>{const g=n("el-button"),T=n("TigInput"),h=n("el-popconfirm"),V=n("el-space"),x=n("el-form"),i=n("el-table-column"),B=n("el-divider"),N=n("el-table"),q=n("a-spin");return p(),f("div",H,[s("div",J,[s("div",Q,[s("div",W,[o(x,{model:e(r),onSubmit:R(e(v),["prevent"])},{default:a(()=>[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[o(T,{modelValue:e(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>e(r).keyword=l),name:"keyword",placeholder:"输入标题",clearable:"",onClear:e(v)},{append:a(()=>[o(g,{onClick:e(v)},{default:a(()=>t[5]||(t[5]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),s("div",oe,[s("div",se,[o(e(G),{params:{act:"add"},isDrawer:"",path:"user/messageLog/Info",title:"发送站内信",width:"560px",onOkCallback:e(m)},{default:a(()=>[o(g,{type:"primary"},{default:a(()=>t[6]||(t[6]=[d("发送站内信",-1)])),_:1,__:[6]})]),_:1},8,["onOkCallback"])])]),s("div",ae,[s("div",le,[o(h,{title:"您确认要批量撤回所选数据吗？",onConfirm:t[1]||(t[1]=l=>y("recall"))},{reference:a(()=>[o(g,{disabled:e(c).length===0},{default:a(()=>t[7]||(t[7]=[d("批量撤回",-1)])),_:1,__:[7]},8,["disabled"])]),_:1})])]),s("div",ne,[s("div",ie,[o(V,null,{default:a(()=>[o(h,{title:"您确认要批量删除所选数据吗？",onConfirm:t[2]||(t[2]=l=>y("del"))},{reference:a(()=>[o(g,{disabled:e(c).length===0},{default:a(()=>t[8]||(t[8]=[d("批量删除",-1)])),_:1,__:[8]},8,["disabled"])]),_:1}),e(c).length>0?(p(),f("span",re,[t[9]||(t[9]=d(" 已选择：",-1)),s("b",null,C(e(c).length),1),t[10]||(t[10]=d(" 项 ",-1))])):_("",!0)]),_:1})])])])])]),_:1},8,["model","onSubmit"])]),s("div",de,[o(q,{spinning:e(u)},{default:a(()=>[o(N,{data:e(D),loading:e(u),total:e(b),"row-key":"messageLogId",onSelectionChange:e(z),onSortChange:e(A)},{empty:a(()=>[s("div",pe,[e(u)?_("",!0):(p(),f("div",me,"暂无数据"))])]),default:a(()=>[o(i,{type:"selection",width:"32"}),o(i,{label:"标题",prop:"messageTitle"}),o(i,{label:"内容",prop:"messageContent"}),o(i,{label:"链接",prop:"messageLink"}),o(i,{width:100,label:"发送类型",prop:"sendTypeName"}),o(i,{width:100,label:"发送状态",prop:"messageType"},{default:a(({row:l})=>[s("span",{style:F({color:l.messageType===0?"green":"red"})},C(l.statusName),5)]),_:1}),o(i,{width:160,label:"发送日期",prop:"sendTime"}),o(i,{width:120,fixed:"right",label:"操作"},{default:a(({row:l})=>[l.isRecall==0?(p(),w(e(S),{key:0,params:{id:l.messageLogId},title:"确认要撤回该条消息吗？",requestApi:e(U),onAfterDelete:e(m)},{default:a(()=>t[11]||(t[11]=[d("撤回 ",-1)])),_:2,__:[11]},1032,["params","requestApi","onAfterDelete"])):_("",!0),l.isRecall==0?(p(),w(B,{key:1,direction:"vertical"})):_("",!0),o(e(S),{params:{id:l.messageLogId},requestApi:e($),onAfterDelete:e(m)},{default:a(()=>t[12]||(t[12]=[d("删除 ",-1)])),_:2,__:[12]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(b)>0?(p(),f("div",_e,[o(e(O),{page:e(r).page,"onUpdate:page":t[3]||(t[3]=l=>e(r).page=l),size:e(r).size,"onUpdate:size":t[4]||(t[4]=l=>e(r).size=l),total:e(b),onCallback:e(m)},null,8,["page","size","total","onCallback"])])):_("",!0)])])])])}}});export{Se as default};
