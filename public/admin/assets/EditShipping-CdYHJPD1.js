import{d as C,r as g,c as R,o as M,J as h,e as d,j as b,g as m,l,f as x,F as U,m as E,_ as B,a as F,a2 as j,h as y,k as V,y as a,E as q,K as N,i as w,I as A}from"./index-BGgofOm4.js";import{c as J,p as K}from"./order-BPrSE32N.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import"./index-BdoKLCH8.js";/* empty css                                                                    *//* empty css                                                                              */import{S as $}from"./SelectLogisticsCompany-BzS5cxgb.js";import{g as z}from"./shippingType-DWMXAQoQ.js";import"./time-BL_Iz6xX.js";import"./index-BS7Hjr9I.js";import"./logisticsCompany-6jh7zrIw.js";const G=C({__name:"SelectShippingType",props:{id:{type:Number,default:null}},emits:["update:id","change"],setup(I,{emit:k}){const f=I,n=k,u=g([]),c=R({get:()=>f.id,set:o=>{n("update:id",o),_(o)}});M(async()=>{try{const o=await z({paging:!1});u.value=o.records,_(f.id)}catch(o){h.error(o.message)}});const _=o=>{const i=u.value.find(e=>e.shippingTypeId===o);n("change",i?i.shippingDefaultId:0)};return(o,i)=>{const e=d("el-option"),S=d("el-select");return m(),b(S,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=p=>c.value=p),class:"full-width",filterable:"","empty-values":[0,void 0,null,""]},{default:l(()=>[(m(!0),x(U,null,E(u.value,p=>(m(),b(e,{key:p.shippingTypeId,label:p.shippingTypeName,value:p.shippingTypeId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),H=B(G,[["__scopeId","data-v-030cd6e7"]]),P={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},X=C({__name:"EditShipping",props:{id:{type:Number,default:0},form:{type:Object,default:()=>({})},valueName:String,isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:k,emit:f}){const n=f,u=I,c=g(!0),_=F().currentRoute.value.query,o=g(u.isDialog?u.id:Number(_.id));g(1);const i=j(),e=g({items:[]});M(()=>{S()});const S=async()=>{try{const s=await J("detail",{id:o.value});Object.assign(e.value,s)}catch(s){h.error(s.message),n("close")}finally{c.value=!1}},p=async()=>{await i.value.validate();try{n("update:confirmLoading",!0);const s=await K({id:o.value,shippingMethod:e.value.shippingMethod,logisticsId:e.value.logisticsId,trackingNo:e.value.trackingNo});n("submitCallback",s),h.success("操作成功")}catch(s){h.error(s.message)}finally{n("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{p()}}),(s,t)=>{const T=d("el-radio"),D=d("el-radio-group"),v=d("el-form-item"),L=d("TigInput"),O=d("el-form");return m(),x("div",P,[y("div",Q,[y("div",W,[t[7]||(t[7]=y("div",{class:"button-card babyBlue pd15"}," 提示：在当前页面修改配送方式或物流公司不会更改订单运费，如需修改运费请编辑订单金额（仅对未支付的订单支持订单金额编辑） ",-1)),c.value?V("",!0):(m(),b(O,{key:0,ref_key:"formRef",ref:i,model:e.value,"label-width":"auto"},{default:l(()=>[a(v,{label:"配送方式",prop:"shippingMethod"},{default:l(()=>[a(D,{modelValue:e.value.shippingMethod,"onUpdate:modelValue":t[0]||(t[0]=r=>e.value.shippingMethod=r)},{default:l(()=>[a(T,{value:1},{default:l(()=>t[4]||(t[4]=[N("物流配送",-1)])),_:1,__:[4]}),a(T,{value:2},{default:l(()=>t[5]||(t[5]=[N("商家配送",-1)])),_:1,__:[5]}),a(T,{value:3},{default:l(()=>t[6]||(t[6]=[N("无需配送",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),q(y("div",null,[a(v,{label:"配送类型",prop:"shippingTypeId"},{default:l(()=>[a(w(H),{id:e.value.shippingTypeId,"onUpdate:id":t[1]||(t[1]=r=>e.value.shippingTypeId=r)},null,8,["id"])]),_:1}),a(v,{label:"物流公司",prop:"logisticsId"},{default:l(()=>[a(w($),{logisticsId:e.value.logisticsId,"onUpdate:logisticsId":t[2]||(t[2]=r=>e.value.logisticsId=r)},null,8,["logisticsId"])]),_:1}),e.value.shippingMethod===1?(m(),b(v,{key:0,label:"快递单号",prop:"trackingNo"},{default:l(()=>[a(L,{classType:"tig-form-input",modelValue:e.value.trackingNo,"onUpdate:modelValue":t[3]||(t[3]=r=>e.value.trackingNo=r)},null,8,["modelValue"])]),_:1})):V("",!0)],512),[[A,e.value.shippingMethod===1]])]),_:1},8,["model"]))])])])}}}),de=B(X,[["__scopeId","data-v-7513642f"]]);export{de as default};
