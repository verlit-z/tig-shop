import{d as B,v as K,r as V,a as q,o as j,e as c,f as n,g as l,h as s,y as r,l as i,i as a,a0 as $,F as C,m as I,j as m,K as k,k as d,t as u,n as E,J,_ as M}from"./index-BGgofOm4.js";/* empty css             */import{S as G}from"./SortButton-Os7VLJgP.js";import"./index-BdoKLCH8.js";/* empty css                                                                    */import{P as H}from"./Pagination-Nz0PhK3s.js";import{P as Q}from"./ProductCard-BI6ohnfl.js";import{g as W,a as X,b as Y}from"./aftersales-CDgWk3jn.js";import{p as Z}from"./format-CpNC4fsQ.js";import{u as ss}from"./useListRequest-DIT8yyoo.js";import{_ as F}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const ts={class:"container"},es={class:"content_wrapper"},as={class:"lyecs-table-list-warp"},ls={class:"list-table-tool lyecs-search-warp"},os={class:"advanced-search-warp list-table-tool-row"},ns={class:"simple-form-warp"},rs={class:"simple-form-field"},is={class:"form-group"},ds={class:"control-container"},us={class:"simple-form-field"},ps={class:"form-group"},cs={class:"control-container"},_s={class:"simple-form-field"},fs={class:"form-group"},ms={class:"control-container"},ys={class:"simple-form-warp"},vs={class:"simple-form-field"},bs={class:"control-container"},ks={class:"table-container"},gs={class:"custom-table"},hs={class:"custom-table"},ws={class:"data-tr"},Cs={colspan:"4"},Is={class:"check-box"},Ns={class:"check-box"},Ss={class:"check-box"},Ts={key:1,class:"check-box"},xs={key:3,class:"check-box"},Os={class:"displayRow flex-justify-between"},Vs={class:"displayColumn textR whiteSN widthAuto"},Fs={class:"red ml10"},zs=["rowspan"],Ls=["rowspan"],Ds=["rowspan"],Ps=["rowspan"],Rs={key:0,class:"empty-warp"},Us={key:0,class:"empty-bg"},As={key:0,class:"pagination-con"},Bs=B({__name:"List",setup(Ks){const z=K(),{listData:L,loading:y,total:N,filterParams:o,loadData:v,onSearchSubmit:_,resetParams:D}=ss({apiFunction:Y,idKey:"aftersaleId",defaultParams:{sortField:"",sortOrder:"",keyword:"",aftersaleType:"",status:"",page:1,size:z.get("pageSize")}});v();const S=V({}),T=V({}),f=q().currentRoute.value.query,P=async()=>{y.value=!0;try{const g=await W();T.value=g;const e=await X();S.value=e,f&&f.status&&(o.status=f.status)}catch(g){J.error(g.message)}finally{y.value=!1}};return j(()=>{f&&f.status&&(o.status=Number(f.status)),P()}),(g,e)=>{const b=c("el-button"),R=c("TigInput"),x=c("el-option"),O=c("el-select"),U=c("el-form"),h=c("el-divider"),A=c("a-spin");return l(),n("div",ts,[s("div",es,[s("div",as,[s("div",ls,[r(U,{model:a(o)},{default:i(()=>[s("div",os,[s("div",ns,[s("div",rs,[s("div",is,[e[9]||(e[9]=s("label",{class:"control-label"},[s("span",null,"订单号：")],-1)),s("div",ds,[r(R,{modelValue:a(o).keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).keyword=t),name:"keyword",placeholder:"订单号",onKeyup:$(a(_),["enter"]),clearable:"",onClear:a(_)},{append:i(()=>[r(b,{onClick:a(_)},{default:i(()=>e[8]||(e[8]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[8]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),s("div",us,[s("div",ps,[e[10]||(e[10]=s("label",{class:"control-label"},[s("span",null,"申请类型：")],-1)),s("div",cs,[r(O,{modelValue:a(o).aftersaleType,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).aftersaleType=t),clearable:"",onChange:a(_)},{default:i(()=>[(l(!0),n(C,null,I(T.value,(t,p)=>(l(),m(x,{value:p,label:t},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),s("div",_s,[s("div",fs,[e[11]||(e[11]=s("label",{class:"control-label"},[s("span",null,"退换状态：")],-1)),s("div",ms,[r(O,{modelValue:a(o).status,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).status=t),clearable:"",onChange:a(_)},{default:i(()=>[(l(!0),n(C,null,I(S.value,(t,p)=>(l(),m(x,{value:p,label:t},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),s("div",ys,[s("div",vs,[e[14]||(e[14]=s("label",{class:"control-label"},null,-1)),s("div",bs,[r(b,{type:"primary",plain:"",onClick:a(_)},{default:i(()=>e[12]||(e[12]=[k("搜索",-1)])),_:1,__:[12]},8,["onClick"]),r(b,{plain:"",onClick:a(D)},{default:i(()=>e[13]||(e[13]=[k("重置",-1)])),_:1,__:[13]},8,["onClick"])])])])])])]),_:1},8,["model"])]),s("div",ks,[r(A,{spinning:a(y)},{default:i(()=>[s("table",gs,[s("thead",null,[s("tr",null,[s("th",null,[r(G,{sortField:a(o).sortField,"onUpdate:sortField":e[3]||(e[3]=t=>a(o).sortField=t),sortOrder:a(o).sortOrder,"onUpdate:sortOrder":e[4]||(e[4]=t=>a(o).sortOrder=t),sortName:"orderId",text:"退换货商品",onLoadData:e[5]||(e[5]=t=>a(v)())},null,8,["sortField","sortOrder"])]),e[15]||(e[15]=s("th",null,"售后原因",-1)),e[16]||(e[16]=s("th",null,"服务类型",-1)),e[17]||(e[17]=s("th",null,"售后状态",-1)),e[18]||(e[18]=s("th",null,"操作",-1))])])]),(l(!0),n(C,null,I(a(L),t=>(l(),n("table",hs,[s("thead",null,[s("tr",ws,[s("th",Cs,[s("span",Is,"订单编号："+u(t.orderSn),1),r(h,{direction:"vertical"}),s("span",Ns,"售后编号："+u(t.aftersalesSn),1),r(h,{direction:"vertical"}),s("span",Ss,"申请时间："+u(t.addTime),1),t.shippingTime?(l(),m(h,{key:0,direction:"vertical"})):d("",!0),t.userName?(l(),n("span",Ts,"发货时间："+u(t.shippingTime),1)):d("",!0),t.userName?(l(),m(h,{key:2,direction:"vertical"})):d("",!0),t.userName?(l(),n("span",xs,"申请人："+u(t.userName),1)):d("",!0)])])]),s("tbody",null,[(l(!0),n(C,null,I(t.aftersalesItems,(p,w)=>(l(),n("tr",null,[s("td",null,[s("div",Os,[r(a(Q),{picThumb:p.picThumb,productId:p.productId,productName:p.productName},null,8,["picThumb","productId","productName"]),s("div",Vs,[s("div",null,u(a(Z)(p.price)),1),s("div",null,[k(" × "+u(p.quantity),1),s("span",Fs,"(退货数量："+u(p.number)+")",1)]),e[19]||(e[19]=s("div",null,null,-1))])])]),w==0?(l(),n("td",{key:0,rowspan:t.aftersalesItems.length},[s("p",null,u(t.aftersaleReason||"-"),1)],8,zs)):d("",!0),w==0?(l(),n("td",{key:1,rowspan:t.aftersalesItems.length},[s("span",null,u(t.aftersalesTypeName),1)],8,Ls)):d("",!0),w==0?(l(),n("td",{key:2,rowspan:t.aftersalesItems.length},[s("span",{class:E({orange:t.status===0,black:t.status===1||t.status===2||t.status===4,gray:t.status===3,green:t.status===5})},u(t.statusName),3)],8,Ds)):d("",!0),w==0?(l(),n("td",{key:3,rowspan:t.aftersalesItems.length},[t.status===5||t.status===6||t.status===7?(l(),m(a(F),{key:0,params:{act:"detail",id:t.aftersaleId},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+t.aftersalesSn,width:"800px",onOkCallback:a(v),showClose:!1,showOnOk:!1},{default:i(()=>[r(b,{size:"small",text:"",type:"primary"},{default:i(()=>e[20]||(e[20]=[k(" 售后详情 ",-1)])),_:1,__:[20]})]),_:2},1032,["params","title","onOkCallback"])):(l(),m(a(F),{key:1,params:{act:"detail",id:t.aftersaleId},isDrawer:"",path:"order/aftersales/Info",title:"处理售后申请 "+t.aftersalesSn,width:"800px",onOkCallback:a(v),showClose:!1,showOnOk:!1},{default:i(()=>[r(b,{size:"small",text:"",type:"danger"},{default:i(()=>e[21]||(e[21]=[k(" 处理退款 ",-1)])),_:1,__:[21]})]),_:2},1032,["params","title","onOkCallback"]))],8,Ps)):d("",!0)]))),256))])]))),256)),a(y)||a(N)==0?(l(),n("div",Rs,[a(y)?d("",!0):(l(),n("div",Us,"暂无数据"))])):d("",!0)]),_:1},8,["spinning"]),a(N)>0?(l(),n("div",As,[r(a(H),{page:a(o).page,"onUpdate:page":e[6]||(e[6]=t=>a(o).page=t),size:a(o).size,"onUpdate:size":e[7]||(e[7]=t=>a(o).size=t),total:a(N),onCallback:a(v)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}}),Zs=M(Bs,[["__scopeId","data-v-720a6b2e"]]);export{Zs as default};
