/* empty css                                                                  */import{_ as S}from"./Checkbox.vue_vue_type_script_setup_true_lang-DPw77KJQ.js";import{d as C,cf as w,cU as L,o as R,r as A,v as j,a9 as D,J as H,e as I,f as v,g as i,y as r,k as b,l as o,j as f,i as n,K as p,h as u,t as U,F as B,m as z,_ as E,P as J}from"./index-BGgofOm4.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import"./index-BdoKLCH8.js";import{S as K}from"./SelectProduct-DqHrlW58.js";import{g as _}from"./article-BXudWWKl.js";/* empty css                                                                    */import{P as q}from"./Pagination-Nz0PhK3s.js";import{_ as G}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";/* empty css                                                                              */const Q={class:"lyecs-article-select-group"},W={key:2,class:"ml10"},X={key:0,class:"lyecs-article-selected-con"},Y={class:"article-selected-list"},Z={class:"article-selected-list-tr"},h={class:"col col2 article-info"},ee={class:"col col3"},le=["onClick"],te={key:0,class:"pagination-con"},ae=C({__name:"SelectArticle",props:w({max:{type:Number,default:-1},disabled:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!0}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:V}){const s=t,d=L(t,"modelValue");R(async()=>{d.value&&d.value.length>0&&await N(d.value)});const e=A([]),m=A(0),M=j(),a=A(!0),y=D({page:1,size:M.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),k=A(""),N=async c=>{a.value=!0;try{k.value=Array.isArray(c)?c.join(","):"";const l=await _({articleIds:k.value,...y});e.value=l.records,m.value=l.total}catch(l){H.error(l.message)}finally{a.value=!1}},T=c=>{let l=d.value;s.isMultiple==!1&&(l=[]);for(let g in c)l.push(c[g]);d.value=l,N(l)},P=()=>{e.value=[],d.value=[]},$=c=>{let l=e.value[c].articleId;d.value=d.value.filter(g=>g!==l),e.value.splice(c,1)};return V({modelValue:d,articleList:e}),(c,l)=>{const g=I("el-button"),F=I("el-space");return i(),v("div",Q,[r(F,null,{default:o(()=>[t.disabled?(i(),f(g,{key:1,disabled:t.max>0&&d.value.length>=t.max||t.disabled,type:"primary"},{default:o(()=>l[3]||(l[3]=[p("选择文章",-1)])),_:1,__:[3]},8,["disabled"])):(i(),f(n(G),{key:0,params:{selectedIds:d.value,isMultiple:s.isMultiple},isDrawer:"",path:"content/article/src/SelectArticle",title:"选择文章",width:"600px",onOkCallback:T},{default:o(()=>[r(g,{disabled:t.max>0&&d.value.length>=t.max,type:"primary"},{default:o(()=>l[2]||(l[2]=[p("选择文章",-1)])),_:1,__:[2]},8,["disabled"])]),_:1},8,["params"])),t.isMultiple&&d.value.length>0?(i(),v("span",W,[l[4]||(l[4]=p("已选择 ",-1)),u("b",null,U(d.value.length),1),l[5]||(l[5]=p(" 个文章",-1))])):b("",!0),t.isMultiple&&d.value.length>0?(i(),f(g,{key:3,disabled:t.disabled,onClick:P},{default:o(()=>l[6]||(l[6]=[p("清空",-1)])),_:1,__:[6]},8,["disabled"])):b("",!0)]),_:1}),e.value.length>0&&!a.value?(i(),v("div",X,[u("div",Y,[l[7]||(l[7]=u("div",{class:"article-selected-list-tr article-selected-list-th"},[u("div",{class:"col col2"},"文章名称"),u("div",{class:"col col3"},"操作")],-1)),(i(!0),v(B,null,z(e.value,(x,O)=>(i(),v("div",Z,[u("div",h,U(x.articleTitle),1),u("div",ee,[u("a",{class:"del-btn",onClick:de=>$(O)},"删除",8,le)])]))),256))]),m.value>0?(i(),v("div",te,[r(n(q),{page:y.page,"onUpdate:page":l[0]||(l[0]=x=>y.page=x),size:y.size,"onUpdate:size":l[1]||(l[1]=x=>y.size=x),total:m.value,onCallback:N,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):b("",!0)])):b("",!0)])}}}),se=E(ae,[["__scopeId","data-v-9ce1b16a"]]),ye=C({__name:"AdvancedInfo",props:w({id:{type:Number,default:0},shopId:{type:Number,default:0},examine:{type:Number,default:0},loading:{type:Boolean,default:!1}},{formState:{default:{}},formStateModifiers:{}}),emits:["update:formState"],setup(t){const V=J(),s=L(t,"formState");return(d,e)=>{const m=I("el-form-item"),M=I("TigInput");return i(),v(B,null,[n(V)==="admin"?(i(),f(m,{key:0,label:"加入推荐"},{default:o(()=>[r(n(S),{modelValue:s.value.isBest,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.isBest=a),disabled:t.examine==1},{default:o(()=>e[6]||(e[6]=[p(" 精品",-1)])),_:1},8,["modelValue","disabled"]),r(n(S),{modelValue:s.value.isNew,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.isNew=a),disabled:t.examine==1},{default:o(()=>e[7]||(e[7]=[p(" 新品",-1)])),_:1},8,["modelValue","disabled"]),r(n(S),{modelValue:s.value.isHot,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.isHot=a),disabled:t.examine==1},{default:o(()=>e[8]||(e[8]=[p(" 热销",-1)])),_:1},8,["modelValue","disabled"])]),_:1})):b("",!0),r(m,{label:"服务说明",prop:"productServiceIds"},{default:o(()=>[(i(!0),v(B,null,z(s.value.serviceList,(a,y)=>(i(),f(n(S),{key:y,modelValue:a.check,"onUpdate:modelValue":k=>a.check=k,disabled:t.examine==1},{default:o(()=>[p(U(a.productServiceName),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]))),128))]),_:1}),r(m,{class:"inner-item",label:"显示销量",prop:"virtualSales"},{default:o(()=>[u("div",null,[r(M,{modelValue:s.value.virtualSales,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.virtualSales=a),disabled:t.examine==1,class:"InputBox",type:"integer",width:"190px"},null,8,["modelValue","disabled"]),e[9]||(e[9]=u("div",{class:"extra"},"显示销量会随下单而增加，但不是真实销售数据",-1))])]),_:1}),r(m,{label:"相关商品",prop:"productRelated"},{default:o(()=>[t.loading?b("",!0):(i(),f(n(K),{key:0,ids:s.value.productRelated,"onUpdate:ids":e[4]||(e[4]=a=>s.value.productRelated=a),disabled:t.examine==1,max:10},null,8,["ids","disabled"])),e[10]||(e[10]=u("div",{class:"extra"},"最多添加10个商品，仅用于在商品详情页展示",-1))]),_:1,__:[10]}),n(V)==="admin"?(i(),f(m,{key:1,label:"关联文章",prop:"productArticleList"},{default:o(()=>[t.loading?b("",!0):(i(),f(n(se),{key:0,modelValue:s.value.productArticleList,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.productArticleList=a),disabled:t.examine==1,max:10},null,8,["modelValue","disabled"])),e[11]||(e[11]=u("div",{class:"extra"},"最多添加10篇文章",-1))]),_:1,__:[11]})):b("",!0)],64)}}});export{ye as _};
