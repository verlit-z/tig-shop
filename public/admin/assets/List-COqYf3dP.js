import{d as le,v as se,r as P,e as m,f as p,g as a,h as l,y as n,l as s,i as o,a0 as ae,K as _,j as u,k as i,t as f,ad as ne,J as de,_ as ie}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{P as O}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-DhDNvZWl.js";import{_ as re}from"./Switch.vue_vue_type_script_setup_true_lang-BQY033uH.js";import{D}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as ue}from"./Pagination-Nz0PhK3s.js";import{u as F,i as pe}from"./format-CpNC4fsQ.js";import{u as h,r as ce,c as me,g as _e,b as fe,a as ve}from"./product-DiKWBvyV.js";import{S as ke}from"./SelectBrand-DSwX5rvc.js";import{_ as be}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DH07CGtZ.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";/* empty css                                                                              */import ge from"./ProductStockPop-CNwGAJUI.js";import{u as ye}from"./useListRequest-DIT8yyoo.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";import"./brand-JXPhU1RM.js";import"./category-0ZzOrTFu.js";import"./time-BL_Iz6xX.js";const he={class:"container"},Ce={class:"content_wrapper"},Ie={class:"lyecs-table-list-warp"},Se={class:"list-table-tool lyecs-search-warp"},Pe={class:"advanced-search-warp list-table-tool-row"},Ae={class:"simple-form-warp"},xe={class:"simple-form-field"},Oe={class:"form-group"},De={class:"control-container"},qe={class:"simple-form-field"},Ve={class:"form-group"},Te={class:"control-container"},Ue={class:"simple-form-field"},Ne={class:"form-group"},ze={class:"control-container"},$e={class:"simple-form-field"},Be={class:"form-group"},Fe={class:"control-container"},Re={class:"simple-form-warp"},Ke={class:"simple-form-field"},Le={class:"control-container"},Ee={class:"list-table-tool-row"},We={class:"list-table-tool-col"},je={key:6},He={class:"table-container"},Je={class:"flex"},Ge={key:0,class:"span-pic"},Me=["href"],Qe=["src"],Xe={class:"span-product-con"},Ye={class:"span-product-name",style:{"word-break":"break-all"}},Ze={key:1},we={key:0,class:"span-product-brand"},et={class:"span-con"},tt={key:1,class:"span-product-brand"},ot={class:"span-con green"},lt={key:2,class:"span-product-brand"},st={class:"span-con green"},at={key:3,class:"span-product-brand"},nt={class:"span-con green"},dt={key:4},it={class:"span-con"},rt={key:1},ut={class:"span-con"},pt={key:1},ct={class:"status-switch"},mt={key:0},_t=["title"],ft=["title"],vt={key:0},kt={key:1},bt={key:1},gt={class:"flex flex-align-center"},yt={key:1},ht=["href"],Ct={class:"empty-warp"},It={key:0,class:"empty-bg"},St={key:0,class:"pagination-con"},Pt=le({__name:"List",setup(At){const R=se(),N=P(0),K=P(localStorage.getItem("adminType")),d=P(1),{listData:L,loading:q,total:V,selectedIds:y,filterParams:r,loadData:v,onSearchSubmit:C,onSortChange:E,onSelectChange:W,onBatchAction:j}=ye({apiFunction:ve,idKey:"productId",defaultParams:{page:1,size:R.get("pageSize"),sortField:"",sortOrder:"",keyword:"",introType:"",isDelete:0,searchShop:0,shopId:"",categoryId:"",brandId:"",productStatus:1,checkStatus:1}});v();const z=c=>{d.value=c,r.productStatus=c>=1&&c<=3?1:c>=4&&c<=6?0:void 0,r.checkStatus=c>=1&&c<=4?1:c===5?0:c===6?2:void 0,r.shopId=c===2?0:"",r.isDelete=c===7?1:0,r.searchShop=c===3?1:0,r.page=1,Object.keys(r).forEach(e=>{r[e]===void 0&&delete r[e]}),v()},H=()=>{r.sortField="",r.sortOrder="",r.keyword="",r.introType="",r.isDelete=0,r.searchShop=0,r.shopId="",r.categoryId="",r.brandId="",r.productStatus=1,r.checkStatus=1,z(d.value)},T=P([{label:"出售中的商品",value:1,isShow:!0},{label:"已下架商品",value:4,isShow:!0},{label:"商品回收站",value:7,isShow:!0},{label:"审核失败商品",value:6,isShow:K.value==="shop"}]),J=P();(async()=>{try{const c=await _e();N.value=c,T.value=T.value.map(e=>(e.value===5&&(e.count=N.value||0),e))}catch(c){de.error(c.message)}})();const I=async c=>{await j(c,fe)};return(c,e)=>{const G=m("TigTabs"),k=m("el-button"),M=m("TigInput"),U=m("el-option"),Q=m("el-select"),S=m("el-popconfirm"),$=m("el-space"),X=m("el-form"),b=m("el-table-column"),Y=m("el-icon"),Z=m("el-tooltip"),x=m("el-divider"),B=m("el-dropdown-item"),w=m("el-dropdown-menu"),ee=m("el-dropdown"),te=m("el-table"),oe=m("a-spin");return a(),p("div",he,[l("div",Ce,[l("div",Ie,[n(G,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),tabs:T.value,onOnTabChange:z},null,8,["modelValue","tabs"]),l("div",Se,[n(X,{model:o(r),name:"form"},{default:s(()=>[l("div",Pe,[l("div",Ae,[l("div",xe,[l("div",Oe,[e[14]||(e[14]=l("label",{class:"control-label"},[l("span",null,"商品名称：")],-1)),l("div",De,[n(M,{modelValue:o(r).keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>o(r).keyword=t),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:ae(o(C),["enter"]),clearable:"",onClear:o(C)},{append:s(()=>[n(k,{onClick:o(C)},{default:s(()=>e[13]||(e[13]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[13]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),l("div",qe,[l("div",Ve,[e[15]||(e[15]=l("label",{class:"control-label"},[l("span",null,"分类：")],-1)),l("div",Te,[n(o(be),{ref_key:"selectCategoryRef",ref:J,categoryId:o(r).categoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>o(r).categoryId=t)},null,8,["categoryId"])])])]),l("div",Ue,[l("div",Ne,[e[16]||(e[16]=l("label",{class:"control-label"},[l("span",null,"品牌：")],-1)),l("div",ze,[n(o(ke),{brandId:o(r).brandId,"onUpdate:brandId":e[3]||(e[3]=t=>o(r).brandId=t),onOnChange:o(C)},null,8,["brandId","onOnChange"])])])]),l("div",$e,[l("div",Be,[e[17]||(e[17]=l("label",{class:"control-label"},[l("span",null,"类型 ：")],-1)),l("div",Fe,[n(Q,{modelValue:o(r).introType,"onUpdate:modelValue":e[4]||(e[4]=t=>o(r).introType=t),clearable:"",onChange:o(C)},{default:s(()=>[n(U,{label:"精品",value:"isBest"}),n(U,{label:"热销",value:"isHot"}),n(U,{label:"新品",value:"isNew"})]),_:1},8,["modelValue","onChange"])])])])]),l("div",Re,[l("div",Ke,[e[20]||(e[20]=l("label",{class:"control-label"},null,-1)),l("div",Le,[n(k,{type:"primary",plain:"",onClick:o(C)},{default:s(()=>e[18]||(e[18]=[_("搜索",-1)])),_:1,__:[18]},8,["onClick"]),n(k,{plain:"",onClick:H},{default:s(()=>e[19]||(e[19]=[_("重置",-1)])),_:1,__:[19]})])])])]),l("div",Ee,[l("div",We,[n($,null,{default:s(()=>[n(o(A),{params:{act:"add"},isDrawer:"",path:"product/product/Info",title:"添加商品",width:"950px",onOkCallback:o(v)},{default:s(()=>[n(k,{type:"primary"},{default:s(()=>e[21]||(e[21]=[_("添加商品",-1)])),_:1,__:[21]})]),_:1},8,["onOkCallback"]),d.value==4||d.value==1?(a(),u(S,{key:0,title:"您确认要批量移入回收站吗？",onConfirm:e[5]||(e[5]=t=>I("recycle"))},{reference:s(()=>[n(k,{disabled:o(y).length===0},{default:s(()=>e[22]||(e[22]=[_("批量移入回收站",-1)])),_:1,__:[22]},8,["disabled"])]),_:1})):i("",!0),d.value==7?(a(),u(S,{key:1,title:"您确认要批量还原吗？",onConfirm:e[6]||(e[6]=t=>I("restore"))},{reference:s(()=>[n(k,{disabled:o(y).length===0},{default:s(()=>e[23]||(e[23]=[_("批量还原",-1)])),_:1,__:[23]},8,["disabled"])]),_:1})):i("",!0),d.value==7?(a(),u(S,{key:2,title:"您确认要批量删除吗？",onConfirm:e[7]||(e[7]=t=>I("del"))},{reference:s(()=>[n(k,{disabled:o(y).length===0},{default:s(()=>e[24]||(e[24]=[_("批量删除",-1)])),_:1,__:[24]},8,["disabled"])]),_:1})):i("",!0),d.value==4?(a(),u(S,{key:3,title:"您确认要批量上架吗？",onConfirm:e[8]||(e[8]=t=>I("up"))},{reference:s(()=>[n(k,{disabled:o(y).length===0},{default:s(()=>e[25]||(e[25]=[_("批量上架",-1)])),_:1,__:[25]},8,["disabled"])]),_:1})):i("",!0),d.value==1?(a(),u(S,{key:4,title:"您确认要批量下架吗？",onConfirm:e[9]||(e[9]=t=>I("down"))},{reference:s(()=>[n(k,{disabled:o(y).length===0},{default:s(()=>e[26]||(e[26]=[_("批量下架",-1)])),_:1,__:[26]},8,["disabled"])]),_:1})):i("",!0),d.value==5?(a(),u(S,{key:5,title:"您确认要批量通过审核吗？",onConfirm:e[10]||(e[10]=t=>I("audit"))},{reference:s(()=>[n(k,{disabled:o(y).length===0},{default:s(()=>e[27]||(e[27]=[_("批量通过审核",-1)])),_:1,__:[27]},8,["disabled"])]),_:1})):i("",!0),o(y).length>0?(a(),p("span",je,[e[28]||(e[28]=_(" 已选择：",-1)),l("b",null,f(o(y).length),1),e[29]||(e[29]=_(" 项 ",-1))])):i("",!0)]),_:1})])])]),_:1},8,["model"])]),l("div",He,[n(oe,{spinning:o(q)},{default:s(()=>[n(te,{data:o(L),total:o(V),"row-key":"productId",onSelectionChange:o(W),onSortChange:o(E)},{empty:s(()=>[l("div",Ct,[o(q)?i("",!0):(a(),p("div",It,"暂无数据"))])]),default:s(()=>[n(b,{type:"selection",width:"32"}),n(b,{label:"商品名称",prop:"productId",sortable:"custom","min-width":320},{default:s(({row:t})=>[l("div",Je,[t.picThumb?(a(),p("div",Ge,[l("a",{href:o(F)({path:"product",sn:t.productSn}),target:"_blank"},[l("img",{src:o(pe)(t.picThumb),height:"68",width:"68",alt:""},null,8,Qe)],8,Me)])):i("",!0),l("div",Xe,[l("div",Ye,[t.vendorProductId==null||t.vendorProductId<0?(a(),u(o(O),{key:0,max:100,"org-value":t.productName,"onUpdate:orgValue":g=>t.productName=g,params:{id:t.productId,field:"productName"},requestApi:o(h),label:"商品名称",type:"textarea"},{default:s(()=>[l("div",null,f(t.productName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])):(a(),p("div",Ze,f(t.productName),1))]),t.brandName?(a(),p("p",we,[e[30]||(e[30]=l("span",{class:"span-tit"},"商品：",-1)),l("span",et,f(t.brandName),1)])):i("",!0),t.shopSimple?(a(),p("p",tt,[e[31]||(e[31]=l("span",{class:"span-tit"},"店铺：",-1)),l("span",ot,f(t.shopSimple.shopTitle),1)])):i("",!0),t.shop?(a(),p("p",lt,[e[32]||(e[32]=l("span",{class:"span-tit"},"店铺：",-1)),l("span",st,f(t.shop.shopTitle),1)])):i("",!0),t.suppliersName?(a(),p("p",at,[e[33]||(e[33]=l("span",{class:"span-tit"},"供应商：",-1)),l("span",nt,f(t.suppliersName),1)])):i("",!0),t.type===2?(a(),p("p",dt,e[34]||(e[34]=[l("span",{class:"span-con green"},"【虚拟商品】",-1)]))):i("",!0)])])]),_:1}),n(b,{width:200,label:"商品信息"},{default:s(({row:t})=>[l("div",null,[l("div",null,[e[35]||(e[35]=l("span",{class:"span-tit"},"编码：",-1)),l("div",it,[t.vendorProductId==null||t.vendorProductId<0?(a(),u(o(O),{key:0,"org-value":t.productSn,"onUpdate:orgValue":g=>t.productSn=g,params:{id:t.productId,field:"productSn"},requestApi:o(h),label:"货号",max:20},{default:s(()=>[l("div",null,f(t.productSn||"--"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])):(a(),p("div",rt,f(t.productSn||"--"),1))])]),l("div",null,[e[36]||(e[36]=l("span",{class:"span-tit"},"售价：",-1)),l("div",ut,[t.vendorProductId==null||t.vendorProductId<0?(a(),u(o(O),{key:0,extra:"请输入商品价格",isPrice:"","org-value":t.productPrice,"onUpdate:orgValue":g=>t.productPrice=g,params:{id:t.productId,field:"productPrice"},requestApi:o(h),label:"售价",type:"decimal"},{default:s(()=>[l("div",null,f(t.productPrice||0),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])):(a(),p("div",pt,f(t.productPrice||0),1))])])])]),_:1}),d.value!=7&&d.value!=5&&d.value!=6?(a(),u(b,{key:0,width:100,label:"是否上架"},{default:s(({row:t})=>[l("div",ct,[t.checkStatus==1?(a(),p("div",mt,[n(o(re),{checked:t.productStatus,"onUpdate:checked":g=>t.productStatus=g,params:{id:t.productId,field:"productStatus"},requestApi:o(h)},null,8,["checked","onUpdate:checked","params","requestApi"])])):i("",!0)])]),_:1})):i("",!0),d.value===5||d.value===6?(a(),u(b,{key:1,width:100,label:"审核状态"},{default:s(({row:t})=>[t.checkStatus===2?(a(),p("span",{key:0,class:"red tips-hover",title:t.checkReason},e[37]||(e[37]=[_("审核失败 ",-1),l("i",{class:"ico-font"},"",-1)]),8,_t)):i("",!0),t.checkStatus===0?(a(),p("span",{key:1,class:"tips-hover gray",title:t.checkReason},"审核中",8,ft)):i("",!0),e[38]||(e[38]=l("br",null,null,-1))]),_:1})):i("",!0),d.value===6?(a(),u(b,{key:2,width:120,label:"失败原因","show-overflow-tooltip":""},{default:s(({row:t})=>[_(f(t.checkReason),1)]),_:1})):i("",!0),d.value!=7?(a(),u(b,{key:3,width:100,label:"库存",prop:"productStock",sortable:"custom"},{default:s(({row:t})=>[t.productExist?(a(),p("a",vt,f(t.productStock),1)):(a(),p("div",kt,[t.vendorProductId==null||t.vendorProductId<0&&!o(q)?(a(),u(ge,{key:0,params:{id:t.productId,productInfo:t},requestApi:o(h),onCallback:o(v)},{default:s(()=>[l("div",null,f(t.productStock),1)]),_:2},1032,["params","requestApi","onCallback"])):i("",!0),t.vendorProductId!=null&&t.vendorProductId>0?(a(),p("div",bt,f(t.productStock),1)):i("",!0)]))]),_:1})):i("",!0),d.value!=7?(a(),u(b,{key:4,width:110,label:"排序",prop:"sortOrder",sortable:"custom"},{header:s(()=>[n(Z,{class:"box-item",effect:"light",placement:"top","show-after":"300"},{content:s(()=>e[39]||(e[39]=[l("div",{style:{width:"100px",padding:"5px 10px"}},"排序数值越小，用户端展示越靠前",-1)])),default:s(()=>[l("div",gt,[e[40]||(e[40]=l("div",null,"排序",-1)),n(Y,{style:{"margin-left":"5px"},size:"14",color:"#999"},{default:s(()=>[n(o(ne))]),_:1})])]),_:1})]),default:s(({row:t})=>[t.vendorProductId==null||t.vendorProductId<0?(a(),u(o(O),{key:0,"org-value":t.sortOrder,"onUpdate:orgValue":g=>t.sortOrder=g,params:{id:t.productId,field:"sortOrder"},requestApi:o(h),label:"排序",type:"integer"},{default:s(()=>[l("div",null,f(t.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])):(a(),p("div",yt,f(t.sortOrder),1))]),_:1})):i("",!0),n(b,{width:150,fixed:"right",label:"操作"},{default:s(({row:t})=>[n($,{size:0},{default:s(()=>[d.value==5&&t.checkStatus===0?(a(),u(o(A),{key:0,maskClose:!1,params:{act:"detail",id:t.productId,examine:1},showClose:!1,showOnOk:!1,isDrawer:"",path:"product/product/Info",title:"商品详情",width:"900px",onOkCallback:o(v)},{default:s(()=>e[41]||(e[41]=[l("a",{class:"btn-link"},"详情",-1)])),_:2,__:[41]},1032,["params","onOkCallback"])):i("",!0),d.value==5&&t.checkStatus===0?(a(),u(x,{key:1,direction:"vertical"})):i("",!0),d.value==6&&t.checkStatus===2?(a(),u(o(A),{key:2,maskClose:!1,params:{act:"again",id:t.productId},dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"修改商品（重新审核）",width:"600px",onOkCallback:o(v)},{default:s(()=>e[42]||(e[42]=[l("a",{class:"btn-link"},"重新审核",-1)])),_:2,__:[42]},1032,["params","onOkCallback"])):i("",!0),d.value==5&&t.checkStatus===0?(a(),u(o(A),{key:3,maskClose:!1,params:{act:"detail",id:t.productId},dialogClass:"noPadding",isDrawer:"",path:"product/product/Examine",title:"商品审核",width:"600px",onOkCallback:o(v)},{default:s(()=>e[43]||(e[43]=[l("a",{class:"btn-link"},"去处理",-1)])),_:2,__:[43]},1032,["params","onOkCallback"])):i("",!0),d.value!=7&&d.value!=5&&d.value!=6?(a(),u(o(A),{key:4,maskClose:!1,params:{act:"detail",id:t.productId,shopId:t.shopId||0},isDrawer:"",path:"product/product/Info",title:"编辑商品",width:"950px",onOkCallback:o(v)},{default:s(()=>e[44]||(e[44]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[44]},1032,["params","onOkCallback"])):i("",!0),d.value!=7?(a(),u(x,{key:5,direction:"vertical"})):i("",!0),d.value!=7&&d.value!=5&&d.value!=6?(a(),p("a",{key:6,class:"btn-link",href:o(F)({path:"product",sn:t.productSn}),target:"_blank"},"查看",8,ht)):i("",!0),d.value!=7&&d.value!=5&&d.value!=6?(a(),u(x,{key:7,direction:"vertical"})):i("",!0),d.value===7?(a(),u(o(D),{key:8,params:{id:t.productId,field:"isDelete",val:0},requestApi:o(h),title:"确定还原该商品吗？",onAfterDelete:o(v)},{default:s(()=>e[45]||(e[45]=[_(" 还原 ",-1)])),_:2,__:[45]},1032,["params","requestApi","onAfterDelete"])):i("",!0),d.value===7?(a(),u(x,{key:9,direction:"vertical"})):i("",!0),d.value===7?(a(),u(o(D),{key:10,params:{id:t.productId,field:"del",val:0},requestApi:o(h),title:"确定彻底删除该商品吗？",onAfterDelete:o(v)},{default:s(()=>e[46]||(e[46]=[_(" 删除 ",-1)])),_:2,__:[46]},1032,["params","requestApi","onAfterDelete"])):i("",!0),d.value!=7?(a(),u(ee,{key:11,trigger:"hover","hide-on-click":!1},{dropdown:s(()=>[n(w,null,{default:s(()=>[n(o(D),{params:{id:t.productId,isDelete:1},requestApi:o(ce),title:"确定把该商品移入回收站吗？",onAfterDelete:o(v)},{default:s(()=>[n(B,null,{default:s(()=>[n(k,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>e[47]||(e[47]=[_("移入回收站",-1)])),_:1,__:[47]})]),_:1})]),_:2},1032,["params","requestApi","onAfterDelete"]),n(o(D),{params:{productId:t.productId},requestApi:o(me),title:"确定复制该商品吗？",onAfterDelete:o(v)},{default:s(()=>[n(B,null,{default:s(()=>[n(k,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>e[48]||(e[48]=[_("复制",-1)])),_:1,__:[48]})]),_:1})]),_:2},1032,["params","requestApi","onAfterDelete"])]),_:2},1024)]),default:s(()=>[e[49]||(e[49]=l("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2,__:[49]},1024)):i("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),o(V)>0?(a(),p("div",St,[n(o(ue),{page:o(r).page,"onUpdate:page":e[11]||(e[11]=t=>o(r).page=t),size:o(r).size,"onUpdate:size":e[12]||(e[12]=t=>o(r).size=t),total:o(V),onCallback:o(v)},null,8,["page","size","total","onCallback"])])):i("",!0)])])])])}}}),Qt=ie(Pt,[["__scopeId","data-v-e88b91e0"]]);export{Qt as default};
