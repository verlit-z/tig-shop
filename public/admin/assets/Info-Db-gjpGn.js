import{d as F,r as f,a as L,a2 as j,o as E,e as m,f as g,g as d,h as C,j as U,k as T,y as l,l as t,E as z,i as b,F as B,K as J,I as K,J as y}from"./index-BGgofOm4.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import"./index-BdoKLCH8.js";/* empty css                                                                    */import{_ as M}from"./SelectRankList.vue_vue_type_script_setup_true_lang-w0arOoGG.js";/* empty css                                                                              */import{b as O,e as $}from"./user-DX0YfmVA.js";import"./time-BL_Iz6xX.js";import"./index-BS7Hjr9I.js";import"./userRank-BYo4ZadJ.js";const A={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},te=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:S,emit:x}){const p=x,n=I,i=f(!0),V=L().currentRoute.value.query,c=f(n.isDialog?n.act:String(V.act)),_=f(n.isDialog?n.id:Number(V.id)),v=c.value==="add"?"create":"update",w=j(),e=f({balance:0,frozenBalance:0,avatar:"",password:"",pwdConfirm:""}),N=async()=>{try{i.value=!0;const r=await O(c.value,{id:_.value});Object.assign(e.value,r)}catch(r){y.error(r.message),p("close")}finally{i.value=!1}};E(()=>{c.value==="detail"?N():i.value=!1});const k=async()=>{await w.value.validate();try{p("update:confirmLoading",!0);const r=await $(v,{id:_.value,...e.value});p("submitCallback",r),y.success("操作成功")}catch(r){y.error(r.message)}finally{p("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{k()}}),(r,a)=>{const u=m("TigInput"),s=m("el-form-item"),q=m("el-button"),D=m("el-form"),R=m("a-spin");return d(),g("div",A,[C("div",G,[C("div",H,[i.value?T("",!0):(d(),U(D,{key:0,ref_key:"formRef",ref:w,model:e.value,"label-width":"auto"},{default:t(()=>[b(v)==="create"?(d(),U(s,{key:0,rules:[{required:!0,message:"会员名称不能为空!"}],label:"会员名称",prop:"username"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:e.value.username,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.username=o)},null,8,["modelValue"])]),_:1})):T("",!0),l(s,{label:"手机号码",prop:"mobile"},{default:t(()=>[l(u,{classType:"tig-form-input",type:"integer",modelValue:e.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.mobile=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"邮箱地址",prop:"email"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.email=o)},null,8,["modelValue"])]),_:1}),b(v)==="create"?(d(),g(B,{key:1},[l(s,{rules:[{required:!0,message:"新密码不能为空!"}],label:"新密码",prop:"password"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:e.value.password,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.password=o)},null,8,["modelValue"])]),_:1}),l(s,{rules:[{required:!0,message:"确认密码不能为空!"}],label:"确认密码",prop:"pwdConfirm"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:e.value.pwdConfirm,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.pwdConfirm=o)},null,8,["modelValue"])]),_:1})],64)):(d(),g(B,{key:2},[l(s,{label:"新密码",prop:"password"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:e.value.password,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.password=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"确认密码",prop:"pwdConfirm"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:e.value.pwdConfirm,"onUpdate:modelValue":a[6]||(a[6]=o=>e.value.pwdConfirm=o)},null,8,["modelValue"])]),_:1})],64)),l(s,{label:"会员等级",prop:"rankId"},{default:t(()=>[l(b(M),{modelValue:e.value.rankId,"onUpdate:modelValue":a[7]||(a[7]=o=>e.value.rankId=o)},null,8,["modelValue"])]),_:1}),z(l(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[l(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:t(()=>a[8]||(a[8]=[J("提交",-1)])),_:1,__:[8]},512)]),_:1},512),[[K,!n.isDialog]])]),_:1},8,["model"])),l(R,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{te as default};
