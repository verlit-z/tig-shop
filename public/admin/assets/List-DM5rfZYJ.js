import{d as G,v as H,a as J,r as Q,R as W,o as X,e as r,f as p,g as u,h as t,y as a,l as s,i as e,a0 as Y,F as D,m as A,K as _,k as b,t as v}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{D as Z}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as ee}from"./Pagination-Nz0PhK3s.js";import{d as le,b as te,g as oe}from"./feedback-CdCZeLof.js";import{u as ae}from"./useListRequest-DIT8yyoo.js";import{_ as I}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const se={class:"container"},ne={class:"content_wrapper"},ie={class:"lyecs-table-list-warp"},re={class:"list-table-tool lyecs-search-warp"},de={class:"advanced-search-warp list-table-tool-row"},pe={class:"simple-form-warp"},ue={class:"simple-form-field"},ce={class:"form-group"},me={class:"control-container"},_e={class:"simple-form-field"},fe={class:"form-group"},be={class:"control-container"},ve={class:"simple-form-field"},ye={class:"form-group"},ge={class:"control-container"},ke={class:"simple-form-warp"},he={class:"simple-form-field"},Ce={class:"control-container"},we={class:"list-table-tool-row"},Se={class:"list-table-tool-col"},Ve={class:"simple-form-field"},Ne={class:"form-group"},De={key:0},Ae={class:"table-container"},Ie={key:0},xe={key:0,style:{color:"#999"}},ze={key:1,style:{color:"#999"}},Fe={class:"empty-warp"},Te={key:0,class:"empty-bg"},Oe={key:0,class:"pagination-con"},Ge=G({__name:"List",setup(qe){const x=[{label:"建议",value:0},{label:"投诉",value:1},{label:"商品",value:2},{label:"其他",value:3},{label:"店铺投诉",value:4},{label:"订单问题",value:5},{label:"订单咨询",value:6}],z=[{label:"待回复",value:0},{label:"已回复",value:1},{label:"无效",value:2}],F=H(),d=J().currentRoute.value.query,y=Q([]),{listData:T,loading:k,total:h,selectedIds:C,filterParams:n,loadData:f,onSearchSubmit:c,onSortChange:O,onSelectChange:q,onBatchAction:B,resetParams:K}=ae({apiFunction:oe,idKey:"id",defaultParams:{sortField:"",sortOrder:"",keyword:"",type:"",status:"",page:1,size:F.get("pageSize")}});W(n,i=>{i.type||(y.value=[])});const P=i=>{n.type=i.join(","),f()},R=async i=>{await B(i,te)};return X(()=>{if(d&&d.type){let i;typeof d.type=="string"?i=d.type.split(",").map(Number):Array.isArray(d.type)?i=d.type.map(Number):i=[],y.value=i}d&&d.status&&(n.status=Number(d.status)),f()}),(i,l)=>{const g=r("el-button"),U=r("TigInput"),w=r("el-option"),S=r("el-select"),L=r("el-popconfirm"),V=r("el-space"),$=r("el-form"),m=r("el-table-column"),j=r("el-divider"),E=r("el-table"),M=r("a-spin");return u(),p("div",se,[t("div",ne,[t("div",ie,[t("div",re,[a($,{model:e(n)},{default:s(()=>[t("div",de,[t("div",pe,[t("div",ue,[t("div",ce,[l[7]||(l[7]=t("label",{class:"control-label"},[t("span",null,"留言内容：")],-1)),t("div",me,[a(U,{modelValue:e(n).keyword,"onUpdate:modelValue":l[0]||(l[0]=o=>e(n).keyword=o),name:"keyword",placeholder:"输入留言内容",onKeyup:Y(e(c),["enter"]),clearable:"",onClear:e(c)},{append:s(()=>[a(g,{onClick:e(c)},{default:s(()=>l[6]||(l[6]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[6]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),t("div",_e,[t("div",fe,[l[8]||(l[8]=t("label",{class:"control-label"},[t("span",null,"留言类型：")],-1)),t("div",be,[a(S,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=o=>y.value=o),multiple:"",clearable:"",placeholder:"请选择",onClear:e(c),onChange:P},{default:s(()=>[(u(),p(D,null,A(x,o=>a(w,{label:o.label,value:o.value,key:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onClear"])])])]),t("div",ve,[t("div",ye,[l[9]||(l[9]=t("label",{class:"control-label"},[t("span",null,"回复状态：")],-1)),t("div",ge,[a(S,{modelValue:e(n).status,"onUpdate:modelValue":l[2]||(l[2]=o=>e(n).status=o),clearable:"",placeholder:"请选择",onClear:e(c),onChange:e(c)},{default:s(()=>[(u(),p(D,null,A(z,o=>a(w,{label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","onClear","onChange"])])])]),t("div",ke,[t("div",he,[l[12]||(l[12]=t("label",{class:"control-label"},null,-1)),t("div",Ce,[a(g,{type:"primary",plain:"",onClick:e(c)},{default:s(()=>l[10]||(l[10]=[_("搜索",-1)])),_:1,__:[10]},8,["onClick"]),a(g,{plain:"",onClick:e(K)},{default:s(()=>l[11]||(l[11]=[_("重置",-1)])),_:1,__:[11]},8,["onClick"])])])])])]),t("div",we,[t("div",Se,[a(V,null,{default:s(()=>[t("div",Ve,[t("div",Ne,[a(V,null,{default:s(()=>[a(L,{title:"您确认要批量删除所选数据吗？",onConfirm:l[3]||(l[3]=o=>R("del"))},{reference:s(()=>[a(g,{disabled:e(C).length===0},{default:s(()=>l[13]||(l[13]=[_("批量删除",-1)])),_:1,__:[13]},8,["disabled"])]),_:1}),e(C).length>0?(u(),p("span",De,[l[14]||(l[14]=_(" 已选择：",-1)),t("b",null,v(e(C).length),1),l[15]||(l[15]=_(" 项 ",-1))])):b("",!0)]),_:1})])])]),_:1})])])]),_:1},8,["model"])]),t("div",Ae,[a(M,{spinning:e(k)},{default:s(()=>[a(E,{data:e(T),loading:e(k),total:e(h),"row-key":"id",onSelectionChange:e(q),onSortChange:e(O)},{empty:s(()=>[t("div",Fe,[e(k)?b("",!0):(u(),p("div",Te,"暂无数据"))])]),default:s(()=>[a(m,{type:"selection",width:"32"}),a(m,{width:120,label:"会员名称",prop:"username"}),a(m,{label:"类型",prop:"typeName"},{default:s(({row:o})=>{var N;return[t("p",null,v(o.typeName),1),a(e(I),{params:{act:"detail",id:o.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+o.orderSn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:e(f)},{default:s(()=>[o.orderSn?(u(),p("a",Ie,v(o.orderSn),1)):b("",!0)]),_:2},1032,["params","title","onCallback"]),o.shopId&&o.store?(u(),p("div",xe,v(o.store.storeTitle),1)):b("",!0),o.productId>0?(u(),p("div",ze,v(((N=o.product)==null?void 0:N.productName)||"--"),1)):b("",!0)]}),_:1}),a(m,{label:"留言内容",prop:"content"},{default:s(({row:o})=>[_(v(o.content),1)]),_:1}),a(m,{width:160,label:"留言时间",prop:"addTime"}),a(m,{width:80,label:"回复",prop:"statusName"}),a(m,{width:150,fixed:"right",label:"操作"},{default:s(({row:o})=>[a(e(I),{params:{act:"detail",id:o.id},isDrawer:"",path:"user/feedback/Info",title:"回复会员留言",width:"560px",onOkCallback:e(f)},{default:s(()=>l[16]||(l[16]=[t("a",{class:"btn-link"},"回复",-1)])),_:2,__:[16]},1032,["params","onOkCallback"]),a(j,{direction:"vertical"}),a(e(Z),{params:{id:o.id},requestApi:e(le),onAfterDelete:e(f)},{default:s(()=>l[17]||(l[17]=[_("删除 ",-1)])),_:2,__:[17]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(h)>0?(u(),p("div",Oe,[a(e(ee),{page:e(n).page,"onUpdate:page":l[4]||(l[4]=o=>e(n).page=o),size:e(n).size,"onUpdate:size":l[5]||(l[5]=o=>e(n).size=o),total:e(h),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):b("",!0)])])])])}}});export{Ge as default};
