import{d as q,v as G,P as R,e as i,f as u,g as d,h as t,y as o,l as s,i as e,K as _,k as m,t as C,a0 as M,j as w,_ as $}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{_ as j}from"./Switch.vue_vue_type_script_setup_true_lang-BQY033uH.js";/* empty css                                                                    */import{P as E}from"./Pagination-Nz0PhK3s.js";import{i as T}from"./format-CpNC4fsQ.js";import{u as H,g as J}from"./user-DX0YfmVA.js";import"./Verify.vue_vue_type_style_index_0_lang-BlxcdrWa.js";import"./zh-cn-CbKWuMQl.js";import{T as Q}from"./Tag-Cb4hewVe.js";import{M as W}from"./MobileCard-BC3dXj5F.js";import{U as X}from"./UserCard-5M92JKDN.js";import{u as Y}from"./useListRequest-DIT8yyoo.js";import{_ as g}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const Z={class:"container"},ee={class:"content_wrapper"},te={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ae={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},se={class:"simple-form-field"},ne={class:"form-group"},ie={class:"control-container"},re={class:"simple-form-field"},de={class:"form-group"},pe={class:"control-container"},me={class:"simple-form-field"},ce={class:"form-group"},ue={class:"control-container"},_e={class:"simple-form-field"},fe={class:"form-group"},be={class:"control-container"},ge={class:"simple-form-field"},ke={class:"form-group"},ve={class:"control-container"},Ce={class:"simple-form-warp"},he={class:"simple-form-field"},ye={class:"control-container"},we={class:"list-table-tool-row"},Ve={class:"list-table-tool-col"},Te={key:0},xe={class:"table-container"},Oe={class:"avatar-info"},Ue={class:"info"},Ie={key:1},Se={class:"rank-container"},Le={class:"text"},ze={key:0,style:{color:"#999999"}},Ae={class:"empty-warp"},De={key:0,class:"empty-bg"},Pe={key:0,class:"pagination-con"},Ne=q({__name:"List",setup(Be){const x=G(),O=R(),{listData:U,loading:h,total:y,selectedIds:k,filterParams:n,loadData:c,onSearchSubmit:p,onSortChange:I,onSelectChange:S,resetParams:L}=Y({apiFunction:J,idKey:"userId",defaultParams:{sortField:"",sortOrder:"",keyword:"",fromTag:"",balance:"",pointsLt:"",pointsGt:"",rankId:0,page:1,size:x.get("pageSize")}});return c(),(Fe,l)=>{const f=i("el-button"),v=i("TigInput"),b=i("el-option"),z=i("el-select"),A=i("el-space"),D=i("el-form"),r=i("el-table-column"),P=i("el-avatar"),N=i("el-image"),V=i("el-divider"),B=i("el-table"),F=i("a-spin");return d(),u("div",Z,[t("div",ee,[t("div",te,[t("div",le,[o(D,{model:e(n),onKeyup:M(e(p),["enter"])},{default:s(()=>[t("div",ae,[t("div",oe,[t("div",se,[t("div",ne,[l[8]||(l[8]=t("label",{class:"control-label"},[t("span",null,"用户信息：")],-1)),t("div",ie,[o(v,{modelValue:e(n).keyword,"onUpdate:modelValue":l[0]||(l[0]=a=>e(n).keyword=a),name:"keyword",placeholder:"输入会员名称/手机号/邮箱",clearable:"",onClear:e(p)},{append:s(()=>[o(f,{onClick:e(p)},{default:s(()=>l[7]||(l[7]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[7]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),t("div",re,[t("div",de,[l[9]||(l[9]=t("label",{class:"control-label"},[t("span",null,"用户筛选：")],-1)),t("div",pe,[o(z,{modelValue:e(n).fromTag,"onUpdate:modelValue":l[1]||(l[1]=a=>e(n).fromTag=a),clearable:"",onChange:e(p)},{default:s(()=>[o(b,{value:1,label:"微信公众号"}),o(b,{value:2,label:"微信小程序"}),o(b,{value:3,label:"H5"}),o(b,{value:4,label:"PC"}),o(b,{value:5,label:"APP"})]),_:1},8,["modelValue","onChange"])])])]),t("div",me,[t("div",ce,[l[10]||(l[10]=t("label",{class:"control-label"},[t("span",null,"余额大于：")],-1)),t("div",ue,[o(v,{type:"decimal",modelValue:e(n).balance,"onUpdate:modelValue":l[2]||(l[2]=a=>e(n).balance=a),clearable:"",onClear:e(p)},null,8,["modelValue","onClear"])])])]),t("div",_e,[t("div",fe,[l[11]||(l[11]=t("label",{class:"control-label"},[t("span",null,"积分大于：")],-1)),t("div",be,[o(v,{type:"integer",modelValue:e(n).pointsGt,"onUpdate:modelValue":l[3]||(l[3]=a=>e(n).pointsGt=a),clearable:"",onClear:e(p)},null,8,["modelValue","onClear"])])])]),t("div",ge,[t("div",ke,[l[12]||(l[12]=t("label",{class:"control-label"},[t("span",null,"积分小于：")],-1)),t("div",ve,[o(v,{type:"integer",modelValue:e(n).pointsLt,"onUpdate:modelValue":l[4]||(l[4]=a=>e(n).pointsLt=a),clearable:"",onClear:e(p)},null,8,["modelValue","onClear"])])])]),t("div",Ce,[t("div",he,[l[15]||(l[15]=t("label",{class:"control-label"},null,-1)),t("div",ye,[o(f,{type:"primary",plain:"",onClick:e(p)},{default:s(()=>l[13]||(l[13]=[_("搜索",-1)])),_:1,__:[13]},8,["onClick"]),o(f,{plain:"",onClick:e(L)},{default:s(()=>l[14]||(l[14]=[_("重置",-1)])),_:1,__:[14]},8,["onClick"])])])])])]),t("div",we,[t("div",Ve,[o(A,null,{default:s(()=>[o(e(g),{params:{act:"add"},isDrawer:"",path:"user/user/Info",title:"添加会员",width:"560px",onOkCallback:e(c)},{default:s(()=>[o(f,{type:"primary"},{default:s(()=>l[16]||(l[16]=[_("添加会员",-1)])),_:1,__:[16]})]),_:1},8,["onOkCallback"]),o(e(g),{params:{act:"setRank",ids:e(k)},isDrawer:"",path:"user/user/BatchRank",title:"批量修改会员等级",width:"600px",onOkCallback:e(c)},{default:s(()=>[o(f,{disabled:e(k).length===0},{default:s(()=>l[17]||(l[17]=[_("批量修改会员等级",-1)])),_:1,__:[17]},8,["disabled"])]),_:1},8,["params","onOkCallback"]),e(k).length>0?(d(),u("span",Te,[l[18]||(l[18]=_(" 已选择：",-1)),t("b",null,C(e(k).length),1),l[19]||(l[19]=_(" 项 ",-1))])):m("",!0)]),_:1})])])]),_:1},8,["model","onKeyup"])]),t("div",xe,[o(F,{spinning:e(h)},{default:s(()=>[o(B,{data:e(U),loading:e(h),total:e(y),"row-key":"userId",onSelectionChange:e(S),onSortChange:e(I)},{empty:s(()=>[t("div",Ae,[e(h)?m("",!0):(d(),u("div",De,"暂无数据"))])]),default:s(()=>[o(r,{type:"selection",width:"32"}),o(r,{width:200,label:"会员名称",prop:"username",sortable:"custom"},{default:s(({row:a})=>[t("div",Oe,[o(P,{size:30,src:e(T)(a.avatar)},null,8,["src"]),t("div",Ue,[a.username!=a.mobile?(d(),w(X,{key:0,user:a.username,isCompanyAuth:a.isCompanyAuth},null,8,["user","isCompanyAuth"])):m("",!0),o(W,{mobile:a.mobile},null,8,["mobile"]),a.fromTagName?(d(),u("div",Ie,[o(e(Q),{color:a.fromTag===2||a.fromTag===5?"#31c19e":"#1890FF",text:a.fromTagName,transparent:!1,style:{"margin-left":"0"}},null,8,["color","text"])])):m("",!0)])])]),_:1}),o(r,{width:140,label:"会员等级",prop:"rankName"},{default:s(({row:a})=>[t("div",Se,[a.rankLogo?(d(),w(N,{key:0,src:e(T)(a.rankLogo),class:"image",fit:"contain"},null,8,["src"])):m("",!0),t("div",Le,C(a.rankName),1)])]),_:1}),e(O)=="admin"?(d(),w(r,{key:0,width:140,label:"是否启用",prop:"status"},{default:s(({row:a})=>[o(e(j),{checked:a.status,"onUpdate:checked":K=>a.status=K,params:{id:a.userId,field:"status"},requestApi:e(H)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1})):m("",!0),o(r,{label:"余额",prop:"balance",sortable:"custom"},{default:s(({row:a})=>[t("ul",null,[t("li",null,C(a.balance),1),a.frozenBalance>0?(d(),u("li",ze,"(冻结："+C(a.frozenBalance)+")",1)):m("",!0)])]),_:1}),o(r,{width:130,label:"消费积分",prop:"points",sortable:"custom"}),o(r,{width:140,label:"累计消费次数",prop:"orderCount",sortable:"custom"}),o(r,{width:140,label:"累计消费金额",prop:"orderAmount",sortable:"custom"}),o(r,{width:160,label:"注册日期",prop:"regTime",sortable:"custom"}),o(r,{width:200,fixed:"right",label:"操作"},{default:s(({row:a})=>[o(e(g),{params:{act:"detail",id:a.userId},isDrawer:"",path:"user/user/Detail",title:"会员管理",width:"800px",onOkCallback:e(c),onCallback:e(c),showClose:!1,showOnOk:!1},{default:s(()=>l[20]||(l[20]=[t("a",{class:"btn-link"},"查看",-1)])),_:2,__:[20]},1032,["params","onOkCallback","onCallback"]),o(V,{direction:"vertical"}),o(e(g),{params:{act:"user",id:a.userId},showOnOk:!1,isDrawer:"",path:"order/order/List",title:a.username+" - 查看订单",width:"1200px"},{default:s(()=>l[21]||(l[21]=[t("a",{class:"btn-link"},"查看订单",-1)])),_:2,__:[21]},1032,["params","title"]),o(V,{direction:"vertical"}),o(e(g),{params:{id:a.userId},isDrawer:"",path:"user/user/AccountLog",title:"会员"+a.username+"的账目明细",width:"800px",onOkCallback:e(c)},{default:s(()=>l[22]||(l[22]=[t("a",{class:"btn-link"},"账目明细",-1)])),_:2,__:[22]},1032,["params","title","onOkCallback"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(y)>0?(d(),u("div",Pe,[o(e(E),{page:e(n).page,"onUpdate:page":l[5]||(l[5]=a=>e(n).page=a),size:e(n).size,"onUpdate:size":l[6]||(l[6]=a=>e(n).size=a),total:e(y),onCallback:e(c)},null,8,["page","size","total","onCallback"])])):m("",!0)])])])])}}}),tt=$(Ne,[["__scopeId","data-v-64c84e6a"]]);export{tt as default};
