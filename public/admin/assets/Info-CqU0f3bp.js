import{d as q,r as b,a as E,a2 as K,o as J,e as g,f as d,g as n,h as f,y as a,j as P,k as v,l as o,F as N,m as O,i as G,E as H,K as m,I as Q,J as T,_ as X}from"./index-BGgofOm4.js";import{a as Y,b as Z}from"./messageType-9danloUX.js";const $={class:"container"},h={class:"content_wrapper"},ee={class:"lyecs-form-table"},ae={key:0},le={class:"tznr"},te={class:"fl1 right-div"},oe={key:1},se={key:1},ue={key:2},ne={key:3},me={key:4},pe={key:5},de=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:C,emit:z}){const y=z,_=S,M=b(!0),U=E().currentRoute.value.query,w=b(_.isDialog?_.act:String(U.act)),k=b(_.isDialog?_.id:Number(U.id)),B=w.value==="add"?"create":"update",x=K(),l=b({templateMessage:{wechatData:{},appData:{},dingData:{},messageData:{},miniProgramData:{},msgData:{}}}),r=b("站内信"),A=i=>{console.log(i)};let I=b([{prop:"isMessage",label:"站内信"},{prop:"isMsg",label:"短信通知"},{prop:"isWechat",label:"微信模板消息"},{prop:"isMiniProgram",label:"小程序订阅消息"}]);const F=async()=>{try{const i=await Y(w.value,{id:k.value});Object.assign(l.value,i);for(const e of I.value){const D=l.value[e.prop];if(typeof D=="number"&&D>-1){r.value=e.label;break}}}catch(i){T.error(i.message),y("close")}finally{M.value=!1}};J(()=>{w.value==="detail"?F():M.value=!1});const R=async()=>{await x.value.validate();try{y("update:confirmLoading",!0);const i=await Z(B,{id:k.value,...l.value});y("submitCallback",i),T.success("操作成功")}catch(i){T.error(i.message)}finally{y("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{R()}}),(i,e)=>{const D=g("el-tab-pane"),L=g("el-tabs"),u=g("TigInput"),s=g("el-form-item"),p=g("el-radio"),V=g("el-radio-group"),W=g("el-button"),c=g("el-form"),j=g("a-spin");return n(),d("div",$,[f("div",h,[f("div",ee,[a(L,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:A},{default:o(()=>[(n(!0),d(N,null,O(G(I),t=>(n(),d(N,null,[l.value[t.prop]>-1?(n(),P(D,{key:0,label:t.label,name:t.label},null,8,["label","name"])):v("",!0)],64))),256))]),_:1},8,["modelValue"]),M.value?v("",!0):(n(),P(c,{key:0,ref_key:"formRef",ref:x,model:l.value,"label-width":"auto"},{default:o(()=>[r.value==="站内信"?(n(),d("div",ae,[a(s,{label:"通知标题",prop:"templateName"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.messageData.templateName,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.templateMessage.messageData.templateName=t)},null,8,["modelValue"])]),_:1}),a(s,{label:"通知内容",prop:"content"},{default:o(()=>[f("div",le,[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.messageData.content,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.templateMessage.messageData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"]),f("div",te,[e[24]||(e[24]=f("p",null,"请输入模板消息详细内容对应的变量，关键字个数需与添加的模板一致。可以使用如下变量：",-1)),l.value.templateMessage.messageData.messageId==3?(n(),d(N,{key:0},[e[21]||(e[21]=f("p",null,"{orderSn}订单编号",-1)),e[22]||(e[22]=f("p",null,"{logisticsName}物流公司",-1)),e[23]||(e[23]=f("p",null,"{trackingNo}物流单号",-1))],64)):(n(),d("p",oe," {orderSn}订单编号"))])])]),_:1}),a(s,{label:"是否开启",prop:"isMessage"},{default:o(()=>[a(V,{modelValue:l.value.isMessage,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.isMessage=t)},{default:o(()=>[a(p,{value:1},{default:o(()=>e[25]||(e[25]=[m("是",-1)])),_:1,__:[25]}),a(p,{value:0},{default:o(()=>e[26]||(e[26]=[m("否",-1)])),_:1,__:[26]})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),r.value==="短信通知"?(n(),d("div",se,[a(s,{label:"短信模板ID",prop:"templateId"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.msgData.templateId,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.templateMessage.msgData.templateId=t)},null,8,["modelValue"])]),_:1}),a(s,{label:"通知内容",prop:"content"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.msgData.content,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.templateMessage.msgData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"是否开启",prop:"isMsg"},{default:o(()=>[a(V,{modelValue:l.value.isMsg,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.isMsg=t)},{default:o(()=>[a(p,{value:1},{default:o(()=>e[27]||(e[27]=[m("是",-1)])),_:1,__:[27]}),a(p,{value:0},{default:o(()=>e[28]||(e[28]=[m("否",-1)])),_:1,__:[28]})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),r.value==="微信模板消息"?(n(),d("div",ue,[a(s,{label:"通知标题",prop:"templateName"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.wechatData.templateName,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.templateMessage.wechatData.templateName=t),disabled:""},null,8,["modelValue"])]),_:1}),a(s,{label:"模板ID",prop:"templateId"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.wechatData.templateId,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.templateMessage.wechatData.templateId=t),disabled:""},null,8,["modelValue"])]),_:1}),a(s,{label:"模板",prop:"content"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.wechatData.content,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.templateMessage.wechatData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"是否开启",prop:"isWechat"},{default:o(()=>[a(V,{modelValue:l.value.isWechat,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.isWechat=t)},{default:o(()=>[a(p,{value:1},{default:o(()=>e[29]||(e[29]=[m("是",-1)])),_:1,__:[29]}),a(p,{value:0},{default:o(()=>e[30]||(e[30]=[m("否",-1)])),_:1,__:[30]})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),r.value==="小程序订阅消息"?(n(),d("div",ne,[a(s,{label:"通知标题",prop:"templateName"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.miniProgramData.templateName,"onUpdate:modelValue":e[11]||(e[11]=t=>l.value.templateMessage.miniProgramData.templateName=t),disabled:""},null,8,["modelValue"])]),_:1}),a(s,{label:"模板ID",prop:"templateId"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.miniProgramData.templateId,"onUpdate:modelValue":e[12]||(e[12]=t=>l.value.templateMessage.miniProgramData.templateId=t),disabled:""},null,8,["modelValue"])]),_:1}),a(s,{label:"模板",prop:"content"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.miniProgramData.content,"onUpdate:modelValue":e[13]||(e[13]=t=>l.value.templateMessage.miniProgramData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"是否开启",prop:"isMiniProgram"},{default:o(()=>[a(V,{modelValue:l.value.isMiniProgram,"onUpdate:modelValue":e[14]||(e[14]=t=>l.value.isMiniProgram=t)},{default:o(()=>[a(p,{value:1},{default:o(()=>e[31]||(e[31]=[m("是",-1)])),_:1,__:[31]}),a(p,{value:0},{default:o(()=>e[32]||(e[32]=[m("否",-1)])),_:1,__:[32]})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),r.value==="APP"?(n(),d("div",me,[a(s,{label:"通知标题",prop:"templateName"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.appData.templateName,"onUpdate:modelValue":e[15]||(e[15]=t=>l.value.templateMessage.appData.templateName=t)},null,8,["modelValue"])]),_:1}),a(s,{label:"通知内容",prop:"content"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.appData.content,"onUpdate:modelValue":e[16]||(e[16]=t=>l.value.templateMessage.appData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"是否开启",prop:"isApp"},{default:o(()=>[a(V,{modelValue:l.value.isApp,"onUpdate:modelValue":e[17]||(e[17]=t=>l.value.isApp=t)},{default:o(()=>[a(p,{value:1},{default:o(()=>e[33]||(e[33]=[m("是",-1)])),_:1,__:[33]}),a(p,{value:0},{default:o(()=>e[34]||(e[34]=[m("否",-1)])),_:1,__:[34]})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),r.value==="钉钉"?(n(),d("div",pe,[a(s,{label:"选择钉钉成员",prop:"templateName"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.dingData.templateName,"onUpdate:modelValue":e[18]||(e[18]=t=>l.value.templateMessage.dingData.templateName=t)},null,8,["modelValue"])]),_:1}),a(s,{label:"通知内容",prop:"content"},{default:o(()=>[a(u,{classType:"tig-form-input",modelValue:l.value.templateMessage.dingData.content,"onUpdate:modelValue":e[19]||(e[19]=t=>l.value.templateMessage.dingData.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"是否开启",prop:"isApp"},{default:o(()=>[a(V,{modelValue:l.value.isDing,"onUpdate:modelValue":e[20]||(e[20]=t=>l.value.isDing=t)},{default:o(()=>[a(p,{value:1},{default:o(()=>e[35]||(e[35]=[m("是",-1)])),_:1,__:[35]}),a(p,{value:0},{default:o(()=>e[36]||(e[36]=[m("否",-1)])),_:1,__:[36]})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),H(a(s,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(W,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:R},{default:o(()=>e[37]||(e[37]=[m("提交",-1)])),_:1,__:[37]},512)]),_:1},512),[[Q,!_.isDialog]])]),_:1},8,["model"])),a(j,{spinning:M.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}}),fe=X(de,[["__scopeId","data-v-f01271de"]]);export{fe as default};
