import{d as C,r as p,c as g,R as k,e as V,f as b,g as A,E,aH as I,k as R,I as $,y as B,_ as F}from"./index-BGgofOm4.js";/* empty css                                                             */const N={class:"countdown-box"},j=C({__name:"View",props:{countdownType:{default:"dailyCycle"},valueStyle:{default:()=>({})},dailyTime:{default:()=>[]},specifyTime:{default:0},format:{default:"HH:mm:ss"}},emits:["change","finish"],setup(h,{expose:S,emit:D}){const t=h,u=D,c=p(null),v=g(()=>{if(t.countdownType==="specifyTime")return t.specifyTime;if(t.countdownType==="dailyCycle"){const e=H(),n=Date.now();return Array.isArray(t.dailyTime)&&n<e.dailyStartTime?e.dailyStartTime:e.dailyEndTime}return 0}),H=()=>{const e=new Date,n=new Date(e);n.setDate(e.getDate()+1);let s=0,o=0;if(typeof t.dailyTime=="number"){const a=new Date(t.dailyTime).getHours(),i=new Date(t.dailyTime).getMinutes(),r=new Date(t.dailyTime).getSeconds();o=new Date(e.setHours(a,i,r,0)).getTime(),o<=Date.now()&&(o=new Date(n.setHours(a,i,r,0)).getTime())}else if(Array.isArray(t.dailyTime)&&t.dailyTime.length>=2){const a=new Date(t.dailyTime[0]),i=new Date(t.dailyTime[1]),r=a.getHours(),m=a.getMinutes(),y=a.getSeconds(),f=i.getHours(),w=i.getMinutes(),T=i.getSeconds();s=new Date(e.setHours(r,m,y,0)).getTime(),o=new Date(e.setHours(f,w,T,0)).getTime(),s<=Date.now()&&(s=new Date(n.setHours(r,m,y,0)).getTime()),o<=Date.now()&&(o=new Date(n.setHours(f,w,T,0)).getTime())}return{dailyStartTime:s,dailyEndTime:o}},l=p(0),d=g(()=>{const e=Math.floor(l.value/1e3),n=Math.floor(e/(24*60*60)),s=Math.floor(e%(24*60*60)/(60*60)),o=Math.floor(e%(60*60)/60),a=e%60;return{days:n.toString().padStart(2,"0"),hours:s.toString().padStart(2,"0"),minutes:o.toString().padStart(2,"0"),seconds:a.toString().padStart(2,"0")}}),_=e=>{l.value=e,u("change",e)},M=()=>{u("finish")};return k(()=>[t.countdownType,t.dailyTime,t.specifyTime],()=>{},{deep:!0}),S({countdownRef:c}),(e,n)=>{const s=V("el-countdown");return A(),b("div",N,[E(B(s,{ref_key:"countdownRef",ref:c,onChange:_,onFinish:M,"value-style":e.valueStyle,format:e.format,value:v.value},null,8,["value-style","format","value"]),[[$,!e.$slots.default]]),e.$slots.default?I(e.$slots,"default",{key:0,days:d.value.days,hours:d.value.hours,minutes:d.value.minutes,seconds:d.value.seconds},void 0,!0):R("",!0)])}}}),z=F(j,[["__scopeId","data-v-b19b9a05"]]);export{z as default};
