/* empty css             */import"./index-BdoKLCH8.js";import{P as x}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-DhDNvZWl.js";import{d as T,L as j,v as E,r as C,e as r,f as v,g as _,h as i,y as o,l as n,j as G,k as b,i as e,K as u,t as I}from"./index-BGgofOm4.js";import{_ as J}from"./Switch.vue_vue_type_script_setup_true_lang-BQY033uH.js";import{D as M}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as Q}from"./Pagination-Nz0PhK3s.js";import{u as S,d as X,b as Y,a as Z}from"./region-BHgAbnXc.js";import{u as ee}from"./useListRequest-DIT8yyoo.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const te={class:"container"},ae={class:"content_wrapper"},oe={class:"lyecs-table-list-warp"},ne={class:"list-table-tool lyecs-search-warp"},ie={class:"list-table-tool-row"},se={class:"list-table-tool-col"},le={key:1},re={class:"table-container"},de={style:{position:"relative"}},pe=["onClick"],ce={class:"empty-warp"},ue={key:0,class:"empty-bg"},me={key:0,class:"pagination-con"},xe=T({__name:"List",setup(_e){j();const q=E(),{listData:z,loading:h,total:k,selectedIds:y,filterParams:s,loadData:d,onSortChange:P,onSelectChange:U,onBatchAction:V}=ee({apiFunction:Z,idKey:"regionId",defaultParams:{sortField:"",sortOrder:"",keyword:"",parentId:0,page:1,size:q.get("pageSize")}}),B=async l=>{await V(l,Y)};d();const F=l=>{l&&typeof l=="number"&&(s.parentId=l),d()},g=C([]),f=C([]),O=()=>{d()},A=C(""),R=(l,a,c)=>{g.value.push(l),f.value.push(c),s.parentId=a,A.value=c,d()},$=()=>{s.parentId=g.value[g.value.length-1],A.value=f.value[f.value.length-1],g.value.pop(),f.value.pop(),d()};return(l,a)=>{const c=r("el-button"),L=r("el-popconfirm"),W=r("el-space"),w=r("el-form"),m=r("el-table-column"),N=r("el-divider"),H=r("el-table"),K=r("a-spin");return _(),v("div",te,[i("div",ae,[i("div",oe,[i("div",ne,[o(w,{model:e(s)},{default:n(()=>[i("div",ie,[i("div",se,[o(W,null,{default:n(()=>[e(s).parentId>0?(_(),G(c,{key:0,onClick:$},{default:n(()=>a[3]||(a[3]=[i("i",{class:"iconfont icon-fanhui",style:{"font-size":"14px","padding-right":"5px"}},null,-1),u(" 返回上一级 ",-1)])),_:1,__:[3]})):b("",!0),o(e(D),{params:{act:"add",regionId:e(s).parentId},isDrawer:"",path:"setting/region/Info",title:"添加地区",width:"580px",onOkCallback:e(d)},{default:n(()=>[o(c,{type:"primary"},{default:n(()=>a[4]||(a[4]=[u("添加地区",-1)])),_:1,__:[4]})]),_:1},8,["params","onOkCallback"]),o(L,{title:"您确认要批量删除所选数据吗？",onConfirm:a[0]||(a[0]=t=>B("del"))},{reference:n(()=>[o(c,{disabled:e(y).length===0},{default:n(()=>a[5]||(a[5]=[u("批量删除",-1)])),_:1,__:[5]},8,["disabled"])]),_:1}),e(y).length>0?(_(),v("span",le,[a[6]||(a[6]=u(" 已选择：",-1)),i("b",null,I(e(y).length),1),a[7]||(a[7]=u(" 项 ",-1))])):b("",!0)]),_:1})])])]),_:1},8,["model"])]),i("div",re,[o(K,{spinning:e(h)},{default:n(()=>[o(H,{data:e(z),loading:e(h),total:e(k),"row-key":"regionId",onSelectionChange:e(U),onSortChange:e(P)},{empty:n(()=>[i("div",ce,[e(h)?b("",!0):(_(),v("div",ue,"暂无数据"))])]),default:n(()=>[o(m,{type:"selection",width:"32"}),o(m,{width:200,label:"地区名称",prop:"regionId",sortable:"custom"},{default:n(({row:t})=>[i("div",de,[o(e(x),{"org-value":t.regionName,"onUpdate:orgValue":p=>t.regionName=p,max:30,params:{id:t.regionId,field:"regionName"},requestApi:e(S),label:"地区名称",type:"textarea"},{default:n(()=>[i("div",null,I(t.regionName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),o(m,{label:"首字母"},{default:n(({row:t})=>[o(e(x),{"org-value":t.firstWord,"onUpdate:orgValue":p=>t.firstWord=p,len:1,params:{id:t.regionId,field:"firstWord"},requestApi:e(S),label:"首字母",type:"input"},{default:n(()=>[i("div",null,I(t.firstWord||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(m,{label:"是否热门"},{default:n(({row:t})=>[o(e(J),{checked:t.isHot,"onUpdate:checked":p=>t.isHot=p,params:{id:t.regionId,field:"isHot"},requestApi:e(S)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(m,{width:200,fixed:"right",label:"操作"},{default:n(({row:t})=>[i("a",{class:"btn-link",onClick:p=>R(t.parentId,t.regionId,t.regionName)},"子地区",8,pe),o(N,{direction:"vertical"}),o(e(D),{params:{act:"add",regionId:t.regionId},isDrawer:"",path:"setting/region/Info",title:"添加子地区",width:"600",onOkCallback:e(d)},{default:n(()=>a[8]||(a[8]=[i("a",{class:"btn-link"},"添加子地区",-1)])),_:2,__:[8]},1032,["params","onOkCallback"]),o(N,{direction:"vertical"}),o(e(M),{params:{id:t.regionId},requestApi:e(X),onAfterDelete:p=>F(t.parentId)},{default:n(()=>a[9]||(a[9]=[u("删除 ",-1)])),_:2,__:[9]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(k)>0?(_(),v("div",me,[o(e(Q),{page:e(s).page,"onUpdate:page":a[1]||(a[1]=t=>e(s).page=t),size:e(s).size,"onUpdate:size":a[2]||(a[2]=t=>e(s).size=t),total:e(k),onCallback:O},null,8,["page","size","total"])])):b("",!0)])])])])}}});export{xe as default};
