import{f as N}from"./product-DiKWBvyV.js";import{_ as L}from"./PriceInput.vue_vue_type_script_setup_true_lang-3H48udRD.js";import"./index-BdoKLCH8.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import{d as U,cf as F,cU as B,r as M,e as s,f as m,g as p,j as x,k as b,l as i,y as a,K as u,h as d,F as T,m as w,i as I,J as j,_ as q}from"./index-BGgofOm4.js";import"./index-BS7Hjr9I.js";const E="/admin/assets/fixedShippingFee-Czd274cf.png",D={class:"flex"},O={class:"flex flex-justify-between"},P={key:0,class:"con-btn"},$={class:"fixed-shipping-type"},z={class:"flex flex-align-center"},J={class:"extra",style:{"margin-top":"5px","margin-left":"20px"}},K={class:"flex"},A={class:"flex flex-justify-between"},G={key:0,class:"con-btn"},H=U({__name:"LogisticsInfo",props:F({id:{type:Number,default:0},shopId:{type:Number,default:0},examine:{type:Number,default:0},loading:{type:Boolean,default:!1}},{formState:{default:{}},formStateModifiers:{}}),emits:["update:formState"],setup(o){const k=o,l=B(o,"formState"),c=(h,e,n)=>{if(!e||Number(e)!==0){if(l.value.fixedShippingType==1){if(e!==0&&!e){n(new Error("运费不能为空"));return}if(Number(e)>999999){n(new Error("运费不能超过999999"));return}n();return}n()}else n()},f=M(!1),g=async(h=!0)=>{f.value=!0;try{const e=await N({shopId:k.shopId});l.value.shippingTplList=e.shippingTplList}catch(e){j.error(e.message)}finally{setTimeout(()=>{f.value=!1},200)}};return(h,e)=>{const n=s("el-radio"),v=s("el-radio-group"),_=s("el-option"),V=s("el-select"),y=s("el-button"),r=s("el-form-item"),C=s("el-popover");return p(),m(T,null,[l.value.productType!=1?(p(),x(r,{key:0,rules:[{required:!0,message:"请选择配送方式!"}],label:"配送方式",prop:"noShipping"},{default:i(()=>[a(v,{modelValue:l.value.noShipping,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.noShipping=t),disabled:o.examine==1,style:{width:"100%","margin-bottom":"10px"}},{default:i(()=>[a(n,{value:1},{default:i(()=>e[7]||(e[7]=[u("无需配送",-1)])),_:1,__:[7]})]),_:1},8,["modelValue","disabled"]),a(v,{modelValue:l.value.noShipping,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.noShipping=t),disabled:o.examine==1||l.value.productType!=1,style:{width:"100%"}},{default:i(()=>[a(n,{value:0},{default:i(()=>[d("div",D,[e[11]||(e[11]=d("div",{class:"mr10"},"运费模板",-1)),a(r,{label:"",prop:"shippingTplId"},{default:i(()=>[d("div",O,[a(V,{modelValue:l.value.shippingTplId,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.shippingTplId=t),disabled:o.examine==1||l.value.productType!=1||l.value.noShipping==1,placeholder:"请选择",style:{width:"100%"}},{default:i(()=>[(p(!0),m(T,null,w(l.value.shippingTplList,t=>(p(),x(_,{key:t.shippingTplId,label:t.shippingTplName,value:t.shippingTplId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),o.examine!=1?(p(),m("div",P,[a(I(S),{params:{act:"add"},isDrawer:"",path:"setting/shippingTpl/Info",title:"添加运费模板",width:"900px",onOkCallback:g},{default:i(()=>[a(y,{link:"",type:"primary"},{default:i(()=>e[8]||(e[8]=[u("新建",-1)])),_:1,__:[8]})]),_:1}),e[10]||(e[10]=d("p",{class:"ml10 mr10",style:{"margin-bottom":"3px"}},"|",-1)),a(y,{loading:f.value,link:"",type:"primary",onClick:g},{default:i(()=>e[9]||(e[9]=[u("刷新 ",-1)])),_:1,__:[9]},8,["loading"])])):b("",!0)])]),_:1})])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})):b("",!0),l.value.productType==1?(p(),x(r,{key:1,rules:[{required:!0}],label:"快递运费",prop:"fixedShippingType"},{default:i(()=>[a(v,{modelValue:l.value.fixedShippingType,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.fixedShippingType=t),disabled:o.examine==1,style:{width:"100%","margin-bottom":"25px"}},{default:i(()=>[d("div",null,[a(n,{value:1},{default:i(()=>[d("div",$,[d("div",z,[e[12]||(e[12]=d("div",{class:"mr10"},"固定运费",-1)),a(r,{rules:[{required:!0,validator:c}],class:"inner-item",label:"",prop:"fixedShippingFee"},{default:i(()=>[a(L,{modelValue:l.value.fixedShippingFee,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.fixedShippingFee=t),disabled:o.examine==1||l.value.fixedShippingType==2,placeholder:"请输入运费",width:"200px"},null,8,["modelValue","disabled"])]),_:1},8,["rules"])])])]),_:1}),d("div",J,[e[15]||(e[15]=u(" 设置固定运费为0时，前台展示为包邮。 ",-1)),a(C,{width:400,placement:"right-end",trigger:"click"},{reference:i(()=>e[13]||(e[13]=[d("a",null,"查看示例",-1)])),default:i(()=>e[14]||(e[14]=[d("img",{src:E,style:{width:"380px"}},null,-1)])),_:1})])])]),_:1},8,["modelValue","disabled"]),a(v,{modelValue:l.value.fixedShippingType,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.fixedShippingType=t),disabled:o.examine==1||l.value.productType!=1,style:{width:"100%"}},{default:i(()=>[a(n,{value:2},{default:i(()=>[d("div",K,[e[19]||(e[19]=d("div",{class:"mr10"},"运费模板",-1)),a(r,{label:"",prop:"shippingTplId"},{default:i(()=>[d("div",A,[a(V,{modelValue:l.value.shippingTplId,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.shippingTplId=t),disabled:o.examine==1||l.value.productType!=1||l.value.fixedShippingType==1,placeholder:"请选择",style:{width:"100%"}},{default:i(()=>[(p(!0),m(T,null,w(l.value.shippingTplList,t=>(p(),x(_,{key:t.shippingTplId,label:t.shippingTplName,value:t.shippingTplId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),o.examine!=1?(p(),m("div",G,[a(I(S),{params:{act:"add"},isDrawer:"",path:"setting/shippingTpl/Info",title:"添加运费模板",width:"900px",onOkCallback:g},{default:i(()=>[a(y,{link:"",type:"primary"},{default:i(()=>e[16]||(e[16]=[u("新建",-1)])),_:1,__:[16]})]),_:1}),e[18]||(e[18]=d("p",{class:"ml10 mr10",style:{"margin-bottom":"3px"}},"|",-1)),a(y,{loading:f.value,link:"",type:"primary",onClick:g},{default:i(()=>e[17]||(e[17]=[u("刷新 ",-1)])),_:1,__:[17]},8,["loading"])])):b("",!0)])]),_:1})])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})):b("",!0)],64)}}}),ee=q(H,[["__scopeId","data-v-0b4db54f"]]);export{ee as default};
