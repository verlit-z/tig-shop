/* empty css             */import{d as U,r as p,v as E,a9 as O,o as j,e as s,f as v,g as y,h as a,y as o,k as S,l as n,K as w,n as A,t as D,i as J,J as K,_ as L}from"./index-BGgofOm4.js";/* empty css                                                                    */import{P as q}from"./Pagination-Nz0PhK3s.js";import{g as H}from"./productGroup-DT5Tex1G.js";const Q={class:"container",style:{position:"relative",height:"100%"}},W={class:"content_wrapper"},X={class:"",style:{display:"flex","flex-direction":"column",width:"100%",height:"100%",position:"absolute"}},Y={class:"list-table-tool lyecs-search-warp",style:{flex:"0"}},Z={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},$={class:"list-table-tool-col"},ee={style:{"padding-right":"15px","box-sizing":"border-box"}},te={class:"empty-warp"},oe={key:0,class:"empty-bg"},le={key:0,class:"pagination-con",style:{"flex-shrink":"0"}},se=U({__name:"SelectProductGroup",props:{selectedIds:{type:Array,default:[]},modelValue:{type:Object,default:{}},isMultiple:{type:Boolean,default:!0},index:{type:Number,default:0}},emits:["submitCallback","okType","update:modelValue"],setup(h,{expose:C,emit:I}){const m=h,d=I;d("okType",!1);const i=p([]),u=p(!0),_=p(0),V=E(),k=p([]),l=O({page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),f=async()=>{u.value=!0;try{const t=await H({...l});k.value=t.records,_.value=t.total}catch(t){K.error(t.message)}finally{u.value=!1}};j(()=>{f()});const x=()=>{f()},g=p(),z=t=>{if(m.isMultiple){let e=[];t.forEach(c=>{e.push(c.productGroupId)}),i.value=e,d("okType",i.value.length>0)}},G=(t,e)=>{if(!m.isMultiple){if(g.value.clearSelection(),t.length==0){i.value=[];return}g.value.toggleRowSelection(e,!0),i.value.length=0,i.value.push(e.productGroupId),d("okType",i.value.length>0)}d("update:modelValue",e)},T=(t,e)=>{var c;return!((c=m.selectedIds)!=null&&c.includes(t.productGroupId))};return C({onFormSubmit:()=>{d("submitCallback",{ids:i.value,index:m.index})}}),(t,e)=>{const c=s("TigInput"),N=s("el-button"),P=s("el-space"),F=s("el-form"),b=s("el-table-column"),M=s("el-table"),B=s("a-spin"),R=s("perfect-scrollbar");return y(),v("div",Q,[a("div",W,[a("div",X,[a("div",Y,[o(F,{model:l,name:"form",onFinish:x},{default:n(()=>[a("div",Z,[a("div",$,[o(P,null,{default:n(()=>[o(c,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=r=>l.keyword=r),placeholder:"商品分组名称"},null,8,["modelValue"]),o(N,{onClick:x},{default:n(()=>e[3]||(e[3]=[w("搜索",-1)])),_:1,__:[3]})]),_:1})]),e[4]||(e[4]=a("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),o(R,{class:"table-container",style:{flex:"1"}},{default:n(()=>[o(B,{spinning:u.value},{default:n(()=>[a("div",ee,[o(M,{ref_key:"tableRef",ref:g,class:A([h.isMultiple?"":"hide-checkbox","result-table"]),data:k.value,loading:u.value,total:_.value,"row-key":"productGroupId",onSelect:G,onSelectionChange:z},{empty:n(()=>[a("div",te,[u.value?S("",!0):(y(),v("div",oe,"暂无数据"))])]),default:n(()=>[o(b,{selectable:T,type:"selection",width:"32"}),o(b,{label:"分组名称",prop:"productGroupName"}),o(b,{label:"分组商品数量",prop:"productIds",align:"center"},{default:n(({row:r})=>[w(D(r.productIds.length)+"个 ",1)]),_:1})]),_:1},8,["class","data","loading","total"])])]),_:1},8,["spinning"])]),_:1}),_.value>0?(y(),v("div",le,[o(J(q),{page:l.page,"onUpdate:page":e[1]||(e[1]=r=>l.page=r),size:l.size,"onUpdate:size":e[2]||(e[2]=r=>l.size=r),total:_.value,onCallback:f,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):S("",!0)])])])}}}),ue=L(se,[["__scopeId","data-v-9b1dd357"]]);export{ue as default};
