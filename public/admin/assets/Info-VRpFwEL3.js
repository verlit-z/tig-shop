import{d as E,r as v,a as L,a2 as j,o as G,J as g,e as d,f as J,g as p,h as y,y as l,l as a,j as _,E as M,k as C,i as T,K as i,I as O}from"./index-BGgofOm4.js";import{F as P}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-CloSefEz.js";import"./index-BdoKLCH8.js";import"./vuedraggable.umd-CLczY9wy.js";import{a as $,c as z}from"./article-BXudWWKl.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import{S as Q}from"./SelectProduct-DqHrlW58.js";/* empty css                                                                    */import{S as W}from"./SelectArticleCategory-BZqt2_5P.js";import{_ as X}from"./Editor.vue_vue_type_style_index_0_lang-CJqyZ8fW.js";import{B as Y}from"./BusinessData-Dur53bjV.js";import"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import"./format-CpNC4fsQ.js";import"./BusinessImg-Dt_2PeVb.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";import"./time-BL_Iz6xX.js";import"./product-DiKWBvyV.js";import"./Pagination-Nz0PhK3s.js";import"./articleCategory-CLgK1IN2.js";/* empty css                                                                              */const Z={class:"container"},h={class:"content_wrapper"},ee={class:"lyecs-form-table"},ke=E({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(A,{expose:B,emit:D}){const b=D,m=A,S=v(1),f=v(!0),U=L().currentRoute.value.query,c=v(m.isDialog?m.act:String(U.act)),w=v(m.isDialog?m.id:Number(U.id)),N=c.value==="add"?"create":"update",I=j(),t=v({isShow:1,isHot:0,isTop:0,articleType:1,articleCategoryId:[],productIds:[]}),K=(r,e,u)=>{if(e.length>10){g.error("最多添加10个商品"),u(new Error("最多添加10个商品"));return}u()};G(()=>{c.value==="detail"?R():f.value=!1});const R=async()=>{try{f.value=!0;const r=await $(c.value,{id:w.value});Object.assign(t.value,r)}catch(r){g.error(r.message),b("close")}finally{f.value=!1}},x=async()=>{await I.value.validate();try{b("update:confirmLoading",!0);const r=await z(N,{id:w.value,...t.value});b("submitCallback",r),g.success("操作成功")}catch(r){g.error(r.message)}finally{b("update:confirmLoading",!1)}};return B({onFormSubmit:()=>{x()}}),(r,e)=>{const u=d("el-form-item"),n=d("TigInput"),s=d("el-radio"),V=d("el-radio-group"),q=d("el-button"),k=d("el-tab-pane"),F=d("el-tabs"),H=d("el-form");return p(),J("div",Z,[y("div",h,[y("div",ee,[l(H,{ref_key:"formRef",ref:I,model:t.value,"label-width":"auto"},{default:a(()=>[l(F,{activeKey:S.value,"onUpdate:activeKey":e[15]||(e[15]=o=>S.value=o),class:"lyecs-tabs","tab-position":"top"},{default:a(()=>[(p(),_(k,{key:1,label:"基本信息"},{default:a(()=>[l(u,{rules:[{required:!0,message:"文章标题不能为空!"}],extra:"sfs",label:"文章标题",prop:"articleTitle"},{default:a(()=>[l(Y,{modelValue:t.value.articleTitle,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.articleTitle=o),placeholder:"请输入文章标题",dataType:6,dataId:w.value},null,8,["modelValue","dataId"])]),_:1}),l(u,{label:"文章编号",prop:"articleSn"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleSn,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.articleSn=o)},null,8,["modelValue"]),e[16]||(e[16]=y("div",{class:"extra"},"编号用于前台调用某些指定的文章",-1))]),_:1,__:[16]}),l(u,{label:"文章分类",prop:"articleCategoryId"},{default:a(()=>[f.value?C("",!0):(p(),_(T(W),{key:0,modelValue:t.value.articleCategoryId,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.articleCategoryId=o),"min-width":"100%"},null,8,["modelValue"]))]),_:1}),l(u,{label:"缩略图",prop:"articleThumb"},{default:a(()=>[l(T(P),{photo:t.value.articleThumb,"onUpdate:photo":e[3]||(e[3]=o=>t.value.articleThumb=o)},null,8,["photo"]),e[17]||(e[17]=y("div",{class:"extra"},"请统一上传比例为1:2的图片，宽100px，高200px（高清）",-1))]),_:1,__:[17]}),l(u,{label:"文章作者",prop:"articleAuthor"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleAuthor,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.articleAuthor=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"关键字",prop:"keywords"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.keywords,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.keywords=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"标签",prop:"articleTag"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleTag,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.articleTag=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"描述",prop:"description"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.description=o),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"相关链接",prop:"link"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.link,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.link=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"文章类型",prop:"articleType"},{default:a(()=>[l(V,{modelValue:t.value.articleType,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.articleType=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[18]||(e[18]=[i("普通文章",-1)])),_:1,__:[18]}),l(s,{value:2},{default:a(()=>e[19]||(e[19]=[i("帮助文章",-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否置顶",prop:"isTop"},{default:a(()=>[l(V,{modelValue:t.value.isTop,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.isTop=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[20]||(e[20]=[i("是",-1)])),_:1,__:[20]}),l(s,{value:0},{default:a(()=>e[21]||(e[21]=[i("否",-1)])),_:1,__:[21]})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否热门",prop:"isHot"},{default:a(()=>[l(V,{modelValue:t.value.isHot,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.isHot=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[22]||(e[22]=[i("是",-1)])),_:1,__:[22]}),l(s,{value:0},{default:a(()=>e[23]||(e[23]=[i("否",-1)])),_:1,__:[23]})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否显示",prop:"isShow"},{default:a(()=>[l(V,{modelValue:t.value.isShow,"onUpdate:modelValue":e[12]||(e[12]=o=>t.value.isShow=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[24]||(e[24]=[i("是",-1)])),_:1,__:[24]}),l(s,{value:0},{default:a(()=>e[25]||(e[25]=[i("否",-1)])),_:1,__:[25]})]),_:1},8,["modelValue"])]),_:1}),M(l(u,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[l(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:x},{default:a(()=>e[26]||(e[26]=[i("提交 ",-1)])),_:1,__:[26]},512)]),_:1},512),[[O,!m.isDialog]])]),_:1})),(p(),_(k,{key:2,label:"文章内容"},{default:a(()=>[l(T(X),{html:t.value.content,"onUpdate:html":e[13]||(e[13]=o=>t.value.content=o)},null,8,["html"])]),_:1})),(p(),_(k,{key:3,label:"关联商品"},{default:a(()=>[l(u,{label:"",prop:"productIds",rules:[{required:!0,validator:K}]},{default:a(()=>[f.value?C("",!0):(p(),_(T(Q),{key:0,ids:t.value.productIds,"onUpdate:ids":e[14]||(e[14]=o=>t.value.productIds=o),max:10},null,8,["ids"])),e[27]||(e[27]=y("div",{class:"extra"},"最多添加10个商品，添加的商品会在结算后自动加入订单（不会计价格）",-1))]),_:1,__:[27]},8,["rules"])]),_:1}))]),_:1},8,["activeKey"])]),_:1},8,["model"])])])])}}});export{ke as default};
