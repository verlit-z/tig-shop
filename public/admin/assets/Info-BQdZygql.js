import{d as F,r as s,a as T,a2 as L,o as j,e as u,f as b,g as d,h as a,y as i,k as h,t as o,j as q,l as k,J as m,_ as U}from"./index-BGgofOm4.js";import{a as E,u as J}from"./feedback-CdCZeLof.js";const M={class:"container"},O={class:"lyecs-form-table"},z={key:0},A={class:"lyecs-form-table"},G={style:{"text-align":"end"}},H={class:"content_wrapper"},K={class:"lyecs-form-table"},P=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:N,emit:w}){const n=w,l=I,p=s(!0),f=T().currentRoute.value.query,_=s(l.isDialog?l.act:String(f.act)),v=s(l.isDialog?l.id:Number(f.id)),x=_.value==="add"?"create":"update",y=L(),e=s({product:{productId:0,productName:""}}),c=s({product:{productId:0,productName:""}}),S=async()=>{try{const t=await E(_.value,{id:v.value});Object.assign(e.value,t)}catch(t){m.error(t.message),n("close")}finally{p.value=!1}};j(()=>{S()});const C=async()=>{await y.value.validate();try{n("update:confirmLoading",!0);let t=0;e.value.status==1&&(t=e.value.id);const r=await J(x,{id:v.value,parentId:t,...c.value});n("submitCallback",r),m.success("操作成功")}catch(t){m.error(t.message)}finally{n("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{C()}}),(t,r)=>{const g=u("el-divider"),R=u("TigInput"),V=u("el-form-item"),B=u("el-form");return d(),b("div",M,[a("div",O,[a("h2",null,[a("span",null,"类型:"+o(e.value.typeName),1),e.value.productId?(d(),b("span",z,"【 "+o(e.value.product.productName)+" 】",1)):h("",!0)])]),i(g),a("div",A,[a("p",null,"主题:"+o(e.value.title),1),a("p",null,"内容: "+o(e.value.content),1),a("p",G,"【 留言板 】"+o(e.value.username)+" @ "+o(e.value.addTime),1)]),i(g),a("div",H,[a("div",K,[p.value?h("",!0):(d(),q(B,{key:0,ref_key:"formRef",ref:y,model:c.value,"label-width":"auto"},{default:k(()=>[i(V,{label:"回复内容",prop:"content"},{default:k(()=>[i(R,{classType:"tig-form-input",type:"textarea",rows:5,modelValue:c.value.content,"onUpdate:modelValue":r[0]||(r[0]=D=>c.value.content=D)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))])])])}}}),Y=U(P,[["__scopeId","data-v-9c1c3f2a"]]);export{Y as default};
