import{d as H,r as k,e as y,f as m,g as r,h as t,y as i,F as V,m as U,k as S,i as _,a4 as W,t as D,l as s,j as L,K as f,_ as q,cU as G}from"./index-BGgofOm4.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import"./index-BdoKLCH8.js";/* empty css                                                                    *//* empty css                                                                              */import"./vuedraggable.umd-CLczY9wy.js";import{s as J}from"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_06740008_lang-Cfj1a4LM.js";import{l as Q}from"./lodash-Bsq5Emyt.js";import{i as E}from"./format-CpNC4fsQ.js";import{_ as M}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import{M as X}from"./index-BS7Hjr9I.js";import{_ as Y}from"./Edit.vue_vue_type_script_setup_true_lang-CwSshqUe.js";import{_ as Z}from"./Edit.vue_vue_type_script_setup_true_lang-DVOmuTUT.js";import"./time-BL_Iz6xX.js";import"./SelectLink-BgkTQE9W.js";import"./SelectColor.vue_vue_type_script_setup_true_lang-CwwgaVpn.js";import"./PicSelect-Cgsc9hKX.js";import"./index-BHii7OAM.js";/* empty css                                                             *//* empty css                                                             */const ee={class:"dec-pic-group dec-pic-hotarea-group"},te={class:"dec-pic-group-list"},oe={class:"dec-pic-group-item","data-index":"{$smarty.foreach.picList.index}"},ae={class:"dec-pic-group-item-con"},se={class:"item-image"},le={class:"item-image-con"},ie=["onClick","src"],ne=["onClick"],de={class:"area_box_con_text"},re=["onClick"],ce={class:"hotarea-edit-dialog-warp"},ue={class:"hotarea-edit-dialog-con"},pe={class:"hotarea-edit-box-wrap"},me={class:"hotarea-edit-box"},_e=["src"],ve={class:"hotarea-edit-box-area"},ge={class:"area-bg"},he={class:"area_box_con_text"},fe={class:"input-with-clear"},ke={class:"dec-pic-add-con"},ye=328,xe=H({__name:"ImageHotarea",props:{photos:{type:Array,default:[]},defaultValue:{type:Object}},setup(w){const u=w,g=k(!1),o=k(u.photos),C=(a,e)=>{Object.assign(o.value[e.index],a[0])},v=a=>{o.value.push(...a)},P=a=>{o.value.splice(a,1)},h=k(0),O=a=>{g.value=!0,h.value=a,l.value=Q.cloneDeep(o.value[h.value].hotarea)||[],console.log(l.value)},l=k([]),c=k(0),j=()=>{l.value.push({height:100,width:100,left:10,top:10})},B=a=>{c.value=a},N=(a,e)=>{l.value[c.value].left=parseInt(a),l.value[c.value].top=parseInt(e)},T=(a,e,b,I)=>{l.value[c.value].left=parseInt(a),l.value[c.value].top=parseInt(e),l.value[c.value].width=parseInt(b),l.value[c.value].height=parseInt(I)},z=a=>{l.value.splice(a,1)},F=()=>{g.value=!1,o.value[h.value].hotarea=l.value,console.log("editPicIndex.value",h.value),console.log("photos.value",o.value)},x=a=>a/500*ye,R=(a,e)=>{c.value=e.index,l.value[c.value].link=a,console.log(l.value)};return(a,e)=>{const b=y("a-menu-item"),I=y("a-menu"),K=y("a-dropdown"),$=y("a-button");return r(),m("div",ee,[t("div",te,[(r(!0),m(V,null,U(o.value,(n,p)=>(r(),m("div",oe,[t("div",ae,[t("div",se,[t("div",le,[n.picUrl?(r(),m("img",{key:0,onClick:d=>O(p),class:"item-image-src",src:_(E)(n.picUrl)},null,8,ie)):S("",!0),n.hotarea?(r(!0),m(V,{key:1},U(n.hotarea,(d,Ie)=>{var A;return r(),m("div",{onClick:$e=>O(p),class:"image-hotarea-link",style:W({width:x(d.width)+"px",height:x(d.height)+"px",top:x(d.top)+"px",left:x(d.left)+"px"})},[t("span",de,D((A=d.link)==null?void 0:A.name),1)],12,ne)}),256)):S("",!0),i(_(M),{type:"gallery",class:"",onOkCallback:C,params:{isMultiple:!1},data:{index:p},style:{width:"100%"}},{default:s(()=>e[2]||(e[2]=[t("span",{class:"change-image"},"更换图片",-1)])),_:2,__:[2]},1032,["data"])])]),t("div",{class:"del-item",onClick:d=>P(p)},e[3]||(e[3]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,re)])]))),256))]),i(_(X),{open:g.value,"onUpdate:open":e[1]||(e[1]=n=>g.value=n),width:"500px",destroyOnClose:!0,title:"绘制热区",class:"noPadding"},{footer:s(()=>[i($,{style:{"margin-right":"8px"},onClick:j},{default:s(()=>e[6]||(e[6]=[f("添加区域",-1)])),_:1,__:[6]}),i($,{style:{"margin-right":"8px"},type:"primary",onClick:F},{default:s(()=>e[7]||(e[7]=[f("保存",-1)])),_:1,__:[7]}),i($,{onClick:e[0]||(e[0]=n=>g.value=!1)},{default:s(()=>e[8]||(e[8]=[f("取消",-1)])),_:1,__:[8]})]),default:s(()=>[t("div",ce,[t("div",ue,[t("div",pe,[t("div",me,[o.value[h.value].picUrl?(r(),m("img",{key:0,class:"bgImg",src:_(E)(o.value[h.value].picUrl)},null,8,_e)):S("",!0),t("div",ve,[(r(!0),m(V,null,U(l.value,(n,p)=>(r(),L(_(J),{class:"",parent:!0,"min-width":30,"min-height":30,w:n.width,h:n.height,x:n.left,y:n.top,onResizing:T,onActivated:d=>B(p),onDragstop:N},{default:s(()=>[i(K,{trigger:["contextmenu"],style:{width:"100%",height:"100%"}},{overlay:s(()=>[i(I,null,{default:s(()=>[i(_(M),{params:{act:"edit",id:1,type:"mobile"},data:{index:p},isDrawer:"",path:"link/LinkSelect",style:{width:"100%"},title:"选择链接",width:"700px",onOkCallback:R},{default:s(()=>[t("div",fe,[i(b,null,{default:s(()=>e[4]||(e[4]=[f("编辑链接",-1)])),_:1,__:[4]})])]),_:2},1032,["data"]),i(b,{onClick:d=>z(p)},{default:s(()=>e[5]||(e[5]=[f("删除区域",-1)])),_:2,__:[5]},1032,["onClick"])]),_:2},1024)]),default:s(()=>{var d;return[t("div",ge,[t("span",he,D(((d=n.link)==null?void 0:d.name)||"右键编辑"),1)])]}),_:2},1024)]),_:2},1032,["w","h","x","y","onActivated"]))),256))])])])])])]),_:1},8,["open"]),t("div",ke,[i(_(M),{type:"gallery",class:"",onOkCallback:v,params:{isMultiple:!0},style:{width:"100%"}},{default:s(()=>e[9]||(e[9]=[t("div",{class:"dec-pic-add-btn"},[t("i",{class:"ico-decorate icon-dec-jia"}),f("添加新热图")],-1)])),_:1,__:[9]})])])}}}),be=q(xe,[["__scopeId","data-v-b8aa4539"]]),we={class:"dec-edit-group dec-edit-group-block"},Ce={class:"dec-edit-group-con"},qe=H({__name:"Edit",props:{module:{default:()=>({})},moduleModifiers:{}},emits:["update:module"],setup(w){k({picType:{1:"一行一个",2:"轮播",3:"横向滑动-大图",4:"横向滑动-小图",5:"一行两个",6:"一行三个",7:"一行四个"},picPageType:{1:"样式一",2:"样式二",3:"样式三 "}});const u=G(w,"module");return(g,o)=>{const C=y("perfect-scrollbar");return r(),L(C,{class:"decorate-edit-con"},{default:s(()=>[o[4]||(o[4]=t("div",{class:"dec-edit-title"},[t("h3",null,"绘制热区")],-1)),t("div",we,[o[3]||(o[3]=t("div",{class:"dec-edit-group-desc"},[t("div",{class:"pic-change-desc"},"提示：添加图片后，点击图片进入绘制")],-1)),t("div",Ce,[i(_(be),{photos:u.value.picList,"onUpdate:photos":o[0]||(o[0]=v=>u.value.picList=v)},null,8,["photos"])])]),i(Z,{modelValue:u.value.frame,"onUpdate:modelValue":o[1]||(o[1]=v=>u.value.frame=v)},null,8,["modelValue"]),i(Y,{modelValue:u.value.title,"onUpdate:modelValue":o[2]||(o[2]=v=>u.value.title=v),decorateType:"mobile"},null,8,["modelValue"])]),_:1,__:[4]})}}});export{qe as default};
