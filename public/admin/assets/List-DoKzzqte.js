import{d as J,P as Q,v as W,r as X,e as d,f as r,g as l,h as a,y as o,k as p,l as s,i as e,K as h,t as _,p as Y,F as O,m as Z,j as ee,_ as te}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{P as V}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-DhDNvZWl.js";import{_ as P}from"./Switch.vue_vue_type_script_setup_true_lang-BQY033uH.js";import{D as oe}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as ae}from"./Pagination-Nz0PhK3s.js";import{i as x,u as se}from"./format-CpNC4fsQ.js";import{_ as I}from"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import{u as g,d as ne,b as le,g as ie}from"./comment-BCOa_18j.js";import{u as de}from"./useListRequest-DIT8yyoo.js";import{_ as T}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const re={class:"container"},ce={class:"content_wrapper"},me={key:0,class:"container"},pe={class:"lyecs-table-list-warp"},_e={class:"list-table-tool lyecs-search-warp"},ue={class:"list-table-tool-row"},fe={class:"simple-form-warp"},he={class:"simple-form-field"},be={class:"form-group"},ge={class:"control-container"},ke={key:0,class:"simple-form-field"},ve={class:"form-group"},ye={class:"simple-form-field"},Ce={class:"form-group"},we={key:0},Se={class:"table-container"},xe={class:"display-col"},Ie={key:0,class:"image avatar flex"},Ae={class:"text"},Oe={class:"display-col"},Ve={class:"image_comment"},Pe={class:"text_comment multiline_hiding"},Te=["href"],Ue={class:"text_comment"},qe={key:0,class:"image"},Re={key:1},De={class:"btn-link"},Fe={class:"empty-warp"},ze={key:0,class:"empty-bg"},Ne={key:0,class:"pagination-con"},Be=J({__name:"List",setup(Le){const u=Q(),U=W(),{listData:q,loading:k,total:v,selectedIds:y,filterParams:c,loadData:f,onSearchSubmit:C,onSortChange:R,onSelectChange:D,onBatchAction:F}=de({apiFunction:ie,idKey:"commentId",defaultParams:{sortField:"",sortOrder:"",keyword:"",isShowed:-1,page:1,size:U.get("pageSize")}}),z=async b=>{await F(b,le)};f();const w=X(-1),N=b=>{c.isShowed=b,c.page=1,f()};return(b,n)=>{const A=d("el-tab-pane"),B=d("el-tabs"),S=d("el-button"),L=d("TigInput"),$=d("el-popconfirm"),K=d("el-form"),i=d("el-table-column"),j=d("el-tooltip"),E=d("el-divider"),M=d("el-table"),G=d("a-spin");return l(),r("div",re,[a("div",ce,[o(B,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=t=>w.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:N},{default:s(()=>[o(A,{name:-1,label:"全部评价"}),o(A,{name:1,label:"有晒单"})]),_:1},8,["modelValue"]),w.value!=null?(l(),r("div",me,[a("div",pe,[a("div",_e,[o(K,{model:e(c),onSubmit:Y(e(C),["prevent"])},{default:s(()=>[a("div",ue,[a("div",fe,[a("div",he,[a("div",be,[a("div",ge,[o(L,{modelValue:e(c).keyword,"onUpdate:modelValue":n[1]||(n[1]=t=>e(c).keyword=t),name:"keyword",placeholder:"请输入评价内容",clearable:"",onClear:e(C)},{append:s(()=>[o(S,{onClick:e(C)},{default:s(()=>n[5]||(n[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),e(u)==="admin"?(l(),r("div",ke,[a("div",ve,[o(e(T),{params:{act:"add"},isDrawer:"",path:"product/comment/Info",title:"添加用户评论",width:"600px",onOkCallback:e(f)},{default:s(()=>[o(S,{type:"primary"},{default:s(()=>n[6]||(n[6]=[h("添加用户评论",-1)])),_:1,__:[6]})]),_:1},8,["onOkCallback"])])])):p("",!0),a("div",ye,[a("div",Ce,[o($,{title:"您确认要批量删除所选数据吗？",onConfirm:n[2]||(n[2]=t=>z("del"))},{reference:s(()=>[o(S,{disabled:e(y).length===0},{default:s(()=>n[7]||(n[7]=[h("批量删除",-1)])),_:1,__:[7]},8,["disabled"])]),_:1}),e(y).length>0?(l(),r("span",we,[n[8]||(n[8]=h(" 已选择：",-1)),a("b",null,_(e(y).length),1),n[9]||(n[9]=h(" 项 ",-1))])):p("",!0)])])])])]),_:1},8,["model","onSubmit"])]),a("div",Se,[o(G,{spinning:e(k)},{default:s(()=>[o(M,{data:e(q),loading:e(k),total:e(v),"row-key":"commentId",onSelectionChange:e(D),onSortChange:e(R)},{empty:s(()=>[a("div",Fe,[e(k)?p("",!0):(l(),r("div",ze,"暂无数据"))])]),default:s(()=>[o(i,{type:"selection",width:"32"}),o(i,{width:150,label:"用户名称",prop:"username",sortable:"custom"},{default:s(({row:t})=>[a("div",xe,[t.avatar?(l(),r("div",Ie,[o(e(I),{src:e(x)(t.avatar),class:"image-style",fit:"cover"},null,8,["src"])])):p("",!0),o(j,{class:"box-item",effect:"light",content:t.username,placement:"bottom"},{default:s(()=>[a("div",Ae,_(t.username),1)]),_:2},1032,["content"])])]),_:1}),o(i,{width:260,label:"评论对象"},{default:s(({row:t})=>[a("div",Oe,[a("div",Ve,[o(e(I),{src:e(x)(t.picThumb),class:"image-style shopPics",fit:"contain"},null,8,["src"])]),a("div",Pe,[a("a",{href:e(se)({path:"product",id:t.productId}),target:"_blank"},_(t.productName),9,Te)])])]),_:1}),o(i,{width:260,label:"评价内容",prop:"content"},{default:s(({row:t})=>[a("div",Ue,_(t.content),1)]),_:1}),o(i,{width:250,label:"晒单",prop:"showPics"},{default:s(({row:t})=>[t.showPics?(l(),r("div",qe,[t.showPics.length>0?(l(!0),r(O,{key:0},Z(t.showPics,(m,H)=>(l(),r(O,null,[H<4?(l(),ee(e(I),{key:0,class:"shopPics",src:e(x)(m.picThumb),width:"50",style:{},fit:"contain"},null,8,["src"])):p("",!0)],64))),256)):p("",!0)])):(l(),r("div",Re,"--"))]),_:1}),o(i,{label:"评论等级",prop:"commentRank",sortable:"custom",width:"100"},{default:s(({row:t})=>[o(e(V),{"org-value":t.commentRank,"onUpdate:orgValue":m=>t.commentRank=m,params:{id:t.commentId,field:"commentRank"},type:"integer",minNum:1,maxNum:5,requestApi:e(g),label:"评论等级"},{default:s(()=>[a("div",null,_(t.commentRank)+"星",1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(i,{label:"评论日期",prop:"addTime",sortable:"custom",width:"160"}),o(i,{label:"是否置顶",prop:"isTop",sortable:"custom",width:"100"},{default:s(({row:t})=>[o(e(P),{checked:t.isTop,"onUpdate:checked":m=>t.isTop=m,params:{id:t.commentId,field:"isTop"},requestApi:e(g)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(i,{label:"是否推荐",prop:"isRecommend",sortable:"custom",width:"100"},{default:s(({row:t})=>[o(e(P),{checked:t.isRecommend,"onUpdate:checked":m=>t.isRecommend=m,params:{id:t.commentId,field:"isRecommend"},requestApi:e(g)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(i,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:s(({row:t})=>[o(e(V),{"org-value":t.sortOrder,"onUpdate:orgValue":m=>t.sortOrder=m,params:{id:t.commentId,field:"sortOrder"},requestApi:e(g),type:"integer",label:"排序"},{default:s(()=>[a("div",null,_(t.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(i,{width:"100",fixed:"right",label:"操作"},{default:s(({row:t})=>[o(e(T),{params:{act:"detail",id:t.commentId,examine:e(u)==="admin"?0:1},isDrawer:"",showClose:e(u)==="admin",showOnOk:e(u)==="admin",path:"product/comment/Info",title:e(u)==="admin"?"编辑":"查看用户评论",width:"700px",onOkCallback:e(f)},{default:s(()=>[a("a",De,_(e(u)==="admin"?"编辑":"查看"),1)]),_:2},1032,["params","showClose","showOnOk","title","onOkCallback"]),o(E,{direction:"vertical"}),o(e(oe),{params:{id:t.commentId},requestApi:e(ne),onAfterDelete:e(f)},{default:s(()=>n[10]||(n[10]=[h("删除",-1)])),_:2,__:[10]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(v)>0?(l(),r("div",Ne,[o(e(ae),{page:e(c).page,"onUpdate:page":n[3]||(n[3]=t=>e(c).page=t),size:e(c).size,"onUpdate:size":n[4]||(n[4]=t=>e(c).size=t),total:e(v),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])):p("",!0)])])}}}),tt=te(Be,[["__scopeId","data-v-db0523fc"]]);export{tt as default};
