/* empty css             */import"./index-BdoKLCH8.js";import{d as P,Q as T,v as I,a2 as M,r as g,o as B,dH as U,J as _,e as p,f as b,g as y,y as t,l,h as o,k as E,K as i,t as h,i as c,a4 as L,dI as D,_ as N}from"./index-BGgofOm4.js";import{c as q}from"./format-CpNC4fsQ.js";import{u as z}from"./theme-B1rnHTnX.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const j={class:"container"},F={class:"content_wrapper"},H={key:0,class:"web-content"},J={class:"wechat-config"},K={class:"flex flex-align-center",style:{gap:"10px"}},Q={class:"secret-txt line1",style:{"max-width":"380px"}},$={class:"flex flex-align-center",style:{gap:"10px"}},G={class:"secret-txt line1",style:{"max-width":"380px"}},X={class:"content_wrapper"},Y={class:"content_wrapper"},Z={class:"selected-action"},ee=P({__name:"LoginSetting",setup(te){const{themeInfo:W}=z();T(),I();const x=M(),m=g(!1),a=g({openEmailRegister:void 0,isOpenMobileAreaCode:void 0,usernamePrefix:"",openWechatRegister:void 0,wechatRegisterBindPhone:void 0,openWechatOauth:void 0,googleLoginOn:void 0,googleClientId:"",googleClientSecret:"",facebookLoginOn:void 0,facebookClientId:"",facebookClientSecret:"",wechatAppId:"",wechatAppSecret:"",wechatServerUrl:"",wechatServerToken:"",wechatServerSecret:""}),C=n=>{a.value.openWechatRegister=n,a.value.wechatRegisterBindPhone=n},k=n=>{a.value.wechatRegisterBindPhone=n};B(async()=>{await R()});const w=g(!0),R=async()=>{try{const n=await U();Object.assign(a.value,q(n))}catch(n){_.error(n.message)}finally{w.value=!1}},A=async()=>{await x.value.validate(),m.value=!0;try{const n=await D(a.value);_.success("修改成功")}catch(n){_.error(n.message)}finally{m.value=!1}};return(n,e)=>{const d=p("el-radio"),u=p("el-radio-group"),r=p("el-form-item"),v=p("TigInput"),f=p("el-button"),S=p("el-form"),O=p("a-spin");return y(),b("div",j,[t(O,{spinning:w.value},{default:l(()=>[t(S,{ref_key:"formRef",ref:x,model:a.value,"label-width":"160px",style:{display:"flex",gap:"12px","flex-direction":"column"}},{default:l(()=>[o("div",F,[e[25]||(e[25]=o("div",{class:"title"},"微信登录",-1)),t(r,{label:"开启公众号授权登录",prop:"openWechatOauth",class:"WidthMax"},{default:l(()=>[t(u,{modelValue:a.value.openWechatOauth,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.openWechatOauth=s),class:"itemWidth",onChange:C},{default:l(()=>[t(d,{value:1},{default:l(()=>e[10]||(e[10]=[i("是",-1)])),_:1,__:[10]}),t(d,{value:0},{default:l(()=>e[11]||(e[11]=[i("否",-1)])),_:1,__:[11]})]),_:1},8,["modelValue"]),e[12]||(e[12]=o("div",{class:"extra"},"此项设置控制是否开启微信注册及注册绑定手机，若为否将不支持开启微信注册及注册绑定手机",-1))]),_:1,__:[12]}),a.value.openWechatOauth==1?(y(),b("div",H,[t(r,{label:"",prop:""},{default:l(()=>[o("div",J,[t(S,{model:a.value,"label-width":"130px"},{default:l(()=>[t(r,{label:"微信APPID",prop:"wechatAppId"},{default:l(()=>[o("div",null,[t(v,{classType:"tig-form-input",modelValue:a.value.wechatAppId,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.wechatAppId=s),placeholder:"请输入微信APPID"},null,8,["modelValue"]),e[13]||(e[13]=o("div",{class:"extra"},"请从微信公众号后台获取，链接：https://mp.weixin.qq.com",-1))])]),_:1}),t(r,{label:"微信AppSecret",prop:"wechatAppSecret"},{default:l(()=>[o("div",null,[o("div",K,[o("div",Q,h(a.value.wechatAppSecret),1),t(c(V),{maskClose:!1,isDrawer:!1,params:{title:"微信AppSecret",content:a.value.wechatAppSecret},path:"setting/config/src/EditSecret",title:"微信AppSecret",width:"600px",onOkCallback:e[2]||(e[2]=s=>a.value.wechatAppSecret=s)},{default:l(()=>[t(f,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:l(()=>e[14]||(e[14]=[i(" 编辑 ",-1)])),_:1,__:[14]})]),_:1},8,["params"])]),e[15]||(e[15]=o("div",{class:"extra"},"请从微信公众号后台获取，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的微信AppSecret",-1))])]),_:1}),t(r,{label:"微信服务器Token",prop:"wechatServerToken"},{default:l(()=>[o("div",null,[t(v,{classType:"tig-form-input",modelValue:a.value.wechatServerToken,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.wechatServerToken=s),placeholder:"请输入微信服务器Token"},null,8,["modelValue"]),e[16]||(e[16]=o("div",{class:"extra"},"请从微信公众号后台获取",-1))])]),_:1}),t(r,{label:"微信服务器Secret",prop:"wechatServerSecret"},{default:l(()=>[o("div",null,[o("div",$,[o("div",G,h(a.value.wechatServerSecret),1),t(c(V),{maskClose:!1,isDrawer:!1,params:{title:"微信服务器Secret",content:a.value.wechatServerSecret},path:"setting/config/src/EditSecret",title:"微信服务器Secret",width:"600px",onOkCallback:e[4]||(e[4]=s=>a.value.wechatServerSecret=s)},{default:l(()=>[t(f,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:l(()=>e[17]||(e[17]=[i(" 编辑 ",-1)])),_:1,__:[17]})]),_:1},8,["params"])]),e[18]||(e[18]=o("div",{class:"extra"}," 请从微信公众号后台获取，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的微信服务器Secret ",-1))])]),_:1})]),_:1},8,["model"])])]),_:1})])):E("",!0),t(r,{label:"PC微信扫码登录",prop:"openWechatRegister",class:"WidthMax"},{default:l(()=>[t(u,{modelValue:a.value.openWechatRegister,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.openWechatRegister=s),class:"itemWidth",onChange:k,disabled:a.value.openWechatOauth==0},{default:l(()=>[t(d,{value:1},{default:l(()=>e[19]||(e[19]=[i("是",-1)])),_:1,__:[19]}),t(d,{value:0},{default:l(()=>e[20]||(e[20]=[i("否",-1)])),_:1,__:[20]})]),_:1},8,["modelValue","disabled"]),e[21]||(e[21]=o("div",{class:"extra"},"如果选是，PC端将显示微信扫码登录，小程序端将显示一键登录",-1))]),_:1,__:[21]}),t(r,{label:"是否需要绑定手机号",prop:"wechatRegisterBindPhone",class:"WidthMax"},{default:l(()=>[t(u,{modelValue:a.value.wechatRegisterBindPhone,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.wechatRegisterBindPhone=s),class:"itemWidth",disabled:a.value.openWechatOauth==0||a.value.openWechatRegister==0},{default:l(()=>[t(d,{value:1},{default:l(()=>e[22]||(e[22]=[i("是",-1)])),_:1,__:[22]}),t(d,{value:0},{default:l(()=>e[23]||(e[23]=[i("否",-1)])),_:1,__:[23]})]),_:1},8,["modelValue","disabled"]),e[24]||(e[24]=o("div",{class:"extra"}," 如果选是在微信登录时需绑定手机号方可注册，便于全站统一账号；若选择否，则不需要绑定手机，直接注册但不利于账号管理 ",-1))]),_:1,__:[24]})]),o("div",X,[e[29]||(e[29]=o("div",{class:"title"},"邮箱登录",-1)),t(r,{label:"是否开启邮箱注册",prop:"openEmailRegister",class:"WidthMax"},{default:l(()=>[t(u,{modelValue:a.value.openEmailRegister,"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.openEmailRegister=s),class:"itemWidth"},{default:l(()=>[t(d,{value:1},{default:l(()=>e[26]||(e[26]=[i("开启",-1)])),_:1,__:[26]}),t(d,{value:0},{default:l(()=>e[27]||(e[27]=[i("关闭",-1)])),_:1,__:[27]})]),_:1},8,["modelValue"]),e[28]||(e[28]=o("div",{class:"extra"},"开启邮箱注册后，账号登录时可使用邮箱。",-1))]),_:1,__:[28]})]),o("div",Y,[e[34]||(e[34]=o("div",{class:"title"},"基础设置",-1)),t(r,{label:"手机是否选择区号",prop:"isOpenMobileAreaCode",class:"WidthMax"},{default:l(()=>[t(u,{modelValue:a.value.isOpenMobileAreaCode,"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.isOpenMobileAreaCode=s),class:"itemWidth"},{default:l(()=>[t(d,{value:1},{default:l(()=>e[30]||(e[30]=[i("开启",-1)])),_:1,__:[30]}),t(d,{value:0},{default:l(()=>e[31]||(e[31]=[i("关闭",-1)])),_:1,__:[31]})]),_:1},8,["modelValue"]),e[32]||(e[32]=o("div",{class:"extra"},"如果开启则会将区号存入数据库，请谨慎选择（开启后不建议关闭）。",-1))]),_:1,__:[32]}),t(r,{label:"用户名前缀",prop:"usernamePrefix "},{default:l(()=>[o("div",null,[t(v,{classType:"tig-form-input",modelValue:a.value.usernamePrefix,"onUpdate:modelValue":e[9]||(e[9]=s=>a.value.usernamePrefix=s),placeholder:"可不填"},null,8,["modelValue"]),e[33]||(e[33]=o("div",{class:"extra"},"仅用在自动注册生成username时有效，参考格式：Tigshop_",-1))])]),_:1})])]),_:1},8,["model"]),e[36]||(e[36]=o("div",{style:{height:"20px"}},null,-1)),o("div",{class:"selected-action-warp selected-warp-left",style:L({left:c(W).layout!=="topMenu"?"369px":"270px"})},[o("div",Z,[t(f,{loading:m.value,class:"form-submit-btn",size:"large",type:"primary",onClick:A},{default:l(()=>e[35]||(e[35]=[i("提 交",-1)])),_:1,__:[35]},8,["loading"])])],4)]),_:1,__:[36]},8,["spinning"])])}}}),de=N(ee,[["__scopeId","data-v-703505ec"]]);export{de as default};
