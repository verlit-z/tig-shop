import{d as T,r as c,a as R,a2 as h,o as P,e as i,f as U,g as f,h as V,j as w,k as G,y as t,l,E as q,i as L,K as j,I as E,J as v}from"./index-BGgofOm4.js";import{a as F,u as J}from"./productGroup-DT5Tex1G.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import"./index-BdoKLCH8.js";import{S as K}from"./SelectProduct-DqHrlW58.js";/* empty css                                                                    *//* empty css                                                                              */import"./time-BL_Iz6xX.js";import"./index-BS7Hjr9I.js";import"./format-CpNC4fsQ.js";import"./product-DiKWBvyV.js";import"./Pagination-Nz0PhK3s.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";const M={class:"container"},O={class:"content_wrapper"},z={class:"lyecs-form-table"},se=T({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:N}){const p=N,s=S,u=c(!0),_=R().currentRoute.value.query,d=c(s.isDialog?s.act:String(_.act)),g=c(s.isDialog?s.id:Number(_.id)),D=d.value==="add"?"create":"update",y=h(),e=c({productIds:[]}),I=async()=>{try{const a=await F(d.value,{id:g.value});Object.assign(e.value,a)}catch(a){v.error(a.message),p("close")}finally{u.value=!1}};P(()=>{console.log(d.value),d.value==="detail"?I():u.value=!1});const b=async()=>{await y.value.validate();try{p("update:confirmLoading",!0);const a=await J(D,{id:g.value,...e.value});p("submitCallback",a),v.success("操作成功")}catch(a){v.error(a.message)}finally{p("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{b()}}),(a,o)=>{const m=i("TigInput"),n=i("el-form-item"),x=i("el-button"),C=i("el-form"),B=i("a-spin");return f(),U("div",M,[V("div",O,[V("div",z,[u.value?G("",!0):(f(),w(C,{key:0,ref_key:"formRef",ref:y,model:e.value,"label-width":"auto"},{default:l(()=>[t(n,{rules:[{required:!0,message:"分组名称不能为空!"}],label:"分组名称",prop:"productGroupName"},{default:l(()=>[t(m,{classType:"tig-form-input",modelValue:e.value.productGroupName,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value.productGroupName=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组别名",prop:"productGroupSn"},{default:l(()=>[t(m,{classType:"tig-form-input",modelValue:e.value.productGroupSn,"onUpdate:modelValue":o[1]||(o[1]=r=>e.value.productGroupSn=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组描述",prop:"productGroupDescription"},{default:l(()=>[t(m,{classType:"tig-form-input",modelValue:e.value.productGroupDescription,"onUpdate:modelValue":o[2]||(o[2]=r=>e.value.productGroupDescription=r),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(n,{label:"分组商品",prop:"productIds"},{default:l(()=>[u.value?G("",!0):(f(),w(L(K),{key:0,ids:e.value.productIds,"onUpdate:ids":o[3]||(o[3]=r=>e.value.productIds=r)},null,8,["ids"]))]),_:1}),q(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(x,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:l(()=>o[4]||(o[4]=[j("提交",-1)])),_:1,__:[4]},512)]),_:1},512),[[E,!s.isDialog]])]),_:1},8,["model"])),t(B,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{se as default};
