import"./index-BdoKLCH8.js";import{d as _}from"./vuedraggable.umd-CLczY9wy.js";import{u as M,i as k}from"./format-CpNC4fsQ.js";import{d as y,cf as C,r,Y as x,cU as b,o as B,Z as I,f as L,g as j,y as m,i as d,l as u,h as s}from"./index-BGgofOm4.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";const A={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},E={class:"dec-goods-group-item-con"},N={class:"item-goods-con"},S=["href","title"],F=["src"],P=["onClick"],T=y({__name:"ProductSelect",props:C({ids:{type:Array,default:[]},productList:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1}},{ids:{default:[]},idsModifiers:{}}),emits:["update:ids"],setup(n){r(null);const i=n,{isMultiple:V}=x(i),a=r(i.productList),t=b(n,"ids"),g=()=>{t.value=a.value.map(e=>e.productId)};B(async()=>{t.value&&p()});const l=r(0);function p(){t.value.length>0?I({url:"product/product/list",method:"get",params:{ids:t.value.join(","),size:100,page:1}}).then(e=>{a.value=e.records,l.value=e.total}):(a.value=[],l.value=0)}const f=e=>{console.log(t.value),i.isMultiple==!1&&(t.value=[]);for(let o in e)t.value.push(e[o]);l.value=t.value.length,p()},v=e=>{t.value.splice(e,1),a.value.splice(e,1)};return(e,o)=>(j(),L("div",null,[m(d(_),{class:"dec-goods-group-list","item-key":"prodcutId",list:a.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:o[0]||(o[0]=()=>{}),onEnd:g},{item:u(({element:c,index:h})=>[s("div",A,[s("div",E,[s("div",N,[s("a",{href:d(M)({path:"product",id:c.productId}),target:"_blank",title:c.productName},[s("img",{class:"item-goods-img",src:d(k)(c.picThumb)},null,8,F)],8,S)]),s("div",{class:"del-item",onClick:$=>v(h)},o[1]||(o[1]=[s("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,P)])])]),footer:u(()=>[m(d(w),{isDrawer:"",onOkCallback:f,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selectedIds:t.value,isMultiple:i.isMultiple}},{default:u(()=>o[2]||(o[2]=[s("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[s("div",{class:"dec-goods-group-item-con"},[s("div",{class:"item-goods-con"},[s("a",{href:"javascript:;"},[s("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])),_:1,__:[2]},8,["params"])]),_:1},8,["list"])]))}});export{T as _};
