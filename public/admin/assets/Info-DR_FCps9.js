import{d as C,r as c,a as B,a2 as L,o as A,e as r,f as I,g as b,h as w,j as q,k as T,y as t,l,E as U,K as j,I as E,J as p}from"./index-BGgofOm4.js";import{a as F,c as J}from"./adminRole-B2CrM35I.js";import K from"./AuthoritySelect-CCBB3oup.js";const M={class:"container"},O={class:"content_wrapper"},z={class:"lyecs-form-table"},W=C({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:h,emit:k}){const i=k,s=V,u=c(!0),f=B().currentRoute.value.query,d=c(s.isDialog?s.act:String(f.act)),_=c(s.isDialog?s.id:Number(f.id)),N=d.value==="add"?"create":"update",v=L(),e=c({}),D=async()=>{try{const o=await F(d.value,{id:_.value});Object.assign(e.value,o)}catch(o){p.error(o.message),i("close")}finally{u.value=!1}};A(()=>{d.value==="detail"?D():u.value=!1});const y=async()=>{await v.value.validate();try{i("update:confirmLoading",!0);const o=await J(N,{id:_.value,...e.value});i("submitCallback",o),p.success("操作成功")}catch(o){p.error(o.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{y()}}),(o,a)=>{const g=r("TigInput"),m=r("el-form-item"),R=r("el-button"),S=r("el-form"),x=r("a-spin");return b(),I("div",M,[w("div",O,[w("div",z,[u.value?T("",!0):(b(),q(S,{key:0,ref_key:"formRef",ref:v,model:e.value,"label-width":"auto"},{default:l(()=>[t(m,{rules:[{required:!0,message:"权限组名称不能为空!"}],label:"权限组名称",prop:"roleName"},{default:l(()=>[t(g,{width:"100%",modelValue:e.value.roleName,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.roleName=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"权限组描述",prop:"roleDesc"},{default:l(()=>[t(g,{width:"100%",modelValue:e.value.roleDesc,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.roleDesc=n),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(m,{label:"",prop:"authorityList"},{default:l(()=>[t(K,{modelValue:e.value.authorityList,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.authorityList=n)},null,8,["modelValue"])]),_:1}),U(t(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>a[3]||(a[3]=[j("提交",-1)])),_:1,__:[3]},512)]),_:1},512),[[E,!s.isDialog]])]),_:1},8,["model"])),t(x,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{W as default};
