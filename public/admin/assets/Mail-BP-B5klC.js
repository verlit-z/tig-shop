/* empty css             */import{Z as y,d as P,r as g,a2 as B,o as F,e as d,f as I,g as k,h as o,y as l,l as t,K as i,a4 as A,i as E,F as G,J as f,_ as N}from"./index-BGgofOm4.js";import{c as H}from"./format-CpNC4fsQ.js";import{u as L}from"./theme-B1rnHTnX.js";const R=()=>y({url:"setting/config/mailSettings",method:"get"}),z=v=>y({url:"setting/config/saveMail",method:"post",data:v}),Q=v=>y({url:"setting/config/sendTestEmail",method:"post",params:v}),W={class:"container"},j={class:"content_wrapper"},q={class:"selected-action"},J=P({__name:"Mail",emits:["submitCallback","update:confirmLoading","close"],setup(v,{expose:T,emit:K}){const{themeInfo:M}=L(),m=g(!1),V=g(!0),x=B(),a=g({mailService:void 0,smtpSsl:void 0,mailCharset:void 0}),U=async()=>{try{const n=await R();Object.assign(a.value,H(n))}catch(n){f.error(n.message)}finally{V.value=!1}};F(()=>{U()});const w=async()=>{m.value=!0;try{const n=await Q({testMailAddress:a.value.testMailAddress});f.success("操作成功")}catch(n){f.error(n.message)}finally{m.value=!1}},b=async()=>{m.value=!0;try{const n=await z(a.value);f.success("修改成功")}catch(n){f.error(n.message)}finally{m.value=!1}};return T({onFormSubmit:()=>{b()}}),(n,e)=>{const r=d("el-radio"),_=d("el-radio-group"),u=d("el-form-item"),p=d("TigInput"),S=d("el-button"),c=d("el-form"),C=d("a-spin");return k(),I(G,null,[o("div",W,[o("div",j,[e[21]||(e[21]=o("div",{class:"notice-warp"},[o("p",null,"提示：推荐使用QQ的域名邮箱（免费），设置流程请看Tigshop教程，另外请确保服务器防火墙未拦截邮箱发送，且对应的端口开放。")],-1)),l(C,{spinning:V.value,style:{width:"100%","margin-top":"100px"}},{default:t(()=>[l(c,{ref_key:"formRef",ref:x,model:a.value,"label-width":"auto"},{default:t(()=>[l(u,{label:"邮件服务",prop:"mailService"},{default:t(()=>[l(_,{modelValue:a.value.mailService,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.mailService=s),class:"itemWidth"},{default:t(()=>[l(r,{value:0},{default:t(()=>e[9]||(e[9]=[i("本地邮件服务器",-1)])),_:1,__:[9]}),l(r,{value:1},{default:t(()=>e[10]||(e[10]=[i("SMTP服务",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"]),e[11]||(e[11]=o("div",{class:"extra"},"如果您选择了采用服务器内置的 Mail 服务，您不需要填写下面的内容。",-1))]),_:1,__:[11]}),l(u,{label:"是否加密连接(SSL)",prop:"smtpSsl"},{default:t(()=>[l(_,{modelValue:a.value.smtpSsl,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.smtpSsl=s),class:"itemWidth"},{default:t(()=>[l(r,{value:1},{default:t(()=>e[12]||(e[12]=[i("是",-1)])),_:1,__:[12]}),l(r,{value:0},{default:t(()=>e[13]||(e[13]=[i("否",-1)])),_:1,__:[13]})]),_:1},8,["modelValue"]),e[14]||(e[14]=o("div",{class:"extra"},"SMTP一般要求加密",-1))]),_:1,__:[14]}),l(u,{label:"发送邮件服务器地址(SMTP)",prop:"smtpHost"},{default:t(()=>[o("div",null,[l(p,{classType:"tig-form-input",modelValue:a.value.smtpHost,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.smtpHost=s),type:"text"},null,8,["modelValue"]),e[15]||(e[15]=o("div",{class:"extra"},"邮件服务器主机地址。如果本机可以发送邮件则设置为localhost",-1))])]),_:1}),l(u,{label:"服务器端口",prop:"smtpPort"},{default:t(()=>[l(p,{classType:"tig-form-input",TigInput:"",type:"integer",modelValue:a.value.smtpPort,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.smtpPort=s)},null,8,["modelValue"])]),_:1}),l(u,{label:"邮件发送帐号",prop:"smtpUser"},{default:t(()=>[o("div",null,[l(p,{classType:"tig-form-input",modelValue:a.value.smtpUser,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.smtpUser=s),type:"text"},null,8,["modelValue"]),e[16]||(e[16]=o("div",{class:"extra"},"发送邮件所需的认证帐号，如果没有就为空着",-1))])]),_:1}),l(u,{label:"帐号密码",prop:"smtpPass"},{default:t(()=>[l(p,{classType:"tig-form-input",modelValue:a.value.smtpPass,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.smtpPass=s),type:"password"},null,8,["modelValue"])]),_:1}),l(u,{label:"邮件回复地址",prop:"smtpMail"},{default:t(()=>[l(p,{classType:"tig-form-input",modelValue:a.value.smtpMail,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.smtpMail=s),type:"text"},null,8,["modelValue"])]),_:1}),l(u,{label:"邮件编码",prop:"mailCharset"},{default:t(()=>[l(_,{modelValue:a.value.mailCharset,"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.mailCharset=s)},{default:t(()=>[l(r,{label:"UTF8"},{default:t(()=>e[17]||(e[17]=[i("国际编码(UTF8)",-1)])),_:1,__:[17]}),l(r,{label:"GB2312"},{default:t(()=>e[18]||(e[18]=[i("简体中文(GB2312)",-1)])),_:1,__:[18]}),l(r,{label:"BIG5"},{default:t(()=>e[19]||(e[19]=[i("繁体中文(BIG5)",-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"测试邮件地址",prop:"testMailAddress"},{default:t(()=>[l(p,{classType:"tig-form-input",modelValue:a.value.testMailAddress,"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.testMailAddress=s),type:"text"},{append:t(()=>[l(S,{loading:m.value,onClick:w},{default:t(()=>e[20]||(e[20]=[i("发送测试邮件 ",-1)])),_:1,__:[20]},8,["loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])]),o("div",{class:"selected-action-warp selected-warp-left",style:A({left:E(M).layout!=="topMenu"?"369px":"270px"})},[o("div",q,[l(S,{loading:m.value,class:"form-submit-btn",size:"large",type:"primary",onClick:b},{default:t(()=>e[22]||(e[22]=[i("提 交",-1)])),_:1,__:[22]},8,["loading"])])],4)],64)}}}),$=N(J,[["__scopeId","data-v-9775dbb4"]]);export{$ as default};
