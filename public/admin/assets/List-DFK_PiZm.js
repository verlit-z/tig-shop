import{d as Y,P as Z,v as ee,r as D,c as ae,e as m,f as y,g as n,h as l,k as d,y as s,l as o,i as e,a0 as W,K as u,j as p,t as h,J as U}from"./index-BGgofOm4.js";/* empty css             */import{i as te}from"./format-CpNC4fsQ.js";import{_ as le}from"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import"./index-BdoKLCH8.js";import{P as q}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-DhDNvZWl.js";import{_ as F}from"./Switch.vue_vue_type_script_setup_true_lang-BQY033uH.js";import{D as se}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as oe}from"./Pagination-Nz0PhK3s.js";import{g as ne,a as de,u as I,d as ie,b as re,c as pe,e as ue}from"./brand-JXPhU1RM.js";import{u as ce}from"./useListRequest-DIT8yyoo.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const me={class:"container"},_e={class:"content_wrapper"},be={class:"lyecs-table-list-warp"},fe={class:"list-table-tool lyecs-search-warp"},ke={class:"advanced-search-warp list-table-tool-row"},ve={class:"simple-form-warp"},ge={class:"simple-form-field"},ye={class:"form-group"},he={class:"control-container"},Ce={class:"simple-form-field"},Ie={class:"form-group"},Ve={class:"control-container"},Se={key:0,class:"simple-form-field"},Ae={class:"form-group"},we={class:"control-container"},xe={key:1,class:"simple-form-field"},Oe={class:"form-group"},Ue={class:"control-container"},qe={class:"simple-form-field"},Be={class:"form-group"},De={class:"control-container"},We={class:"simple-form-warp"},Fe={class:"simple-form-field"},Ne={class:"control-container"},Pe={class:"list-table-tool-row"},Ke={class:"list-table-tool-col"},ze={key:1},Te={class:"table-container"},He={key:0,class:"span-product-brand"},Le={class:"span-con green"},Re={key:1},$e={class:"empty-warp"},je={key:0,class:"empty-bg"},Ee={key:0,class:"pagination-con"},ia=Y({__name:"List",setup(Je){const _=Z(),N=ee(),i=D(1),P=D(0),K={1:de,2:ne},z=ae(()=>K[i.value]),{listData:T,loading:w,total:x,selectedIds:S,filterParams:r,loadData:b,onSearchSubmit:f,onSortChange:H,onSelectChange:L,onBatchAction:R,resetParams:$}=ce({apiFunction:z,idKey:"brandId",defaultParams:{page:1,isShow:"",brandIsHot:"",size:N.get("pageSize"),sortField:"",sortOrder:"",keyword:"",firstWord:"",shopId:"",status:_=="admin"?1:-1}}),j=async k=>{await R(k,re)};b();const E=async()=>{try{const k=await pe();P.value=k}catch(k){U.error(k.message)}b()},J=async()=>{try{const k=await ue();U.success("操作成功"),b()}catch(k){U.error(k.message)}};return(k,t)=>{const C=m("el-button"),B=m("TigInput"),g=m("el-option"),O=m("el-select"),G=m("el-popconfirm"),M=m("el-space"),c=m("el-table-column"),A=m("el-divider"),Q=m("el-table"),X=m("a-spin");return n(),y("div",me,[l("div",_e,[l("div",be,[l("div",fe,[l("div",ke,[l("div",ve,[l("div",ge,[l("div",ye,[t[9]||(t[9]=l("label",{class:"control-label"},[l("span",null,"商品品牌：")],-1)),l("div",he,[s(B,{modelValue:e(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>e(r).keyword=a),name:"keyword",placeholder:"输入品牌名称",onKeyup:W(e(f),["enter"]),clearable:"",onClear:e(f)},{append:o(()=>[s(C,{onClick:e(f)},{default:o(()=>t[8]||(t[8]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[8]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),l("div",Ce,[l("div",Ie,[t[10]||(t[10]=l("label",{class:"control-label"},[l("span",null,"是否显示：")],-1)),l("div",Ve,[s(O,{modelValue:e(r).isShow,"onUpdate:modelValue":t[1]||(t[1]=a=>e(r).isShow=a),clearable:"",onChange:e(f)},{default:o(()=>[s(g,{value:0,label:"不显示"}),s(g,{value:1,label:"显示"})]),_:1},8,["modelValue","onChange"])])])]),e(_)==="admin"?(n(),y("div",Se,[l("div",Ae,[t[11]||(t[11]=l("label",{class:"control-label"},[l("span",null,"是否热门：")],-1)),l("div",we,[s(O,{modelValue:e(r).brandIsHot,"onUpdate:modelValue":t[2]||(t[2]=a=>e(r).brandIsHot=a),clearable:"",onChange:e(f)},{default:o(()=>[s(g,{value:0,label:"否"}),s(g,{value:1,label:"是"})]),_:1},8,["modelValue","onChange"])])])])):d("",!0),e(_)==="shop"||i.value===2?(n(),y("div",xe,[l("div",Oe,[t[12]||(t[12]=l("label",{class:"control-label"},[l("span",null,"审核状态：")],-1)),l("div",Ue,[s(O,{modelValue:e(r).status,"onUpdate:modelValue":t[3]||(t[3]=a=>e(r).status=a),clearable:"",onChange:e(f)},{default:o(()=>[s(g,{value:-1,label:"请选择..."}),s(g,{value:0,label:"待审核"}),s(g,{value:1,label:"审核通过"}),s(g,{value:2,label:"审核拒绝"})]),_:1},8,["modelValue","onChange"])])])])):d("",!0),l("div",qe,[l("div",Be,[t[13]||(t[13]=l("label",{class:"control-label"},[l("span",null,"首字母：")],-1)),l("div",De,[s(B,{modelValue:e(r).firstWord,"onUpdate:modelValue":t[4]||(t[4]=a=>e(r).firstWord=a),onKeyup:W(e(f),["enter"]),clearable:"",onClear:e(f)},null,8,["modelValue","onKeyup","onClear"])])])]),l("div",We,[l("div",Fe,[t[16]||(t[16]=l("label",{class:"control-label"},null,-1)),l("div",Ne,[s(C,{type:"primary",plain:"",onClick:e(f)},{default:o(()=>t[14]||(t[14]=[u("搜索",-1)])),_:1,__:[14]},8,["onClick"]),s(C,{plain:"",onClick:e($)},{default:o(()=>t[15]||(t[15]=[u("重置",-1)])),_:1,__:[15]},8,["onClick"])])])])])])]),l("div",Pe,[l("div",Ke,[s(M,null,{default:o(()=>[i.value===1?(n(),p(e(V),{key:0,params:{act:"add"},isDrawer:"",path:"product/brand/Info",title:"添加品牌",width:"600px",onOkCallback:e(b)},{default:o(()=>[s(C,{type:"primary"},{default:o(()=>t[17]||(t[17]=[u("添加品牌",-1)])),_:1,__:[17]})]),_:1},8,["onOkCallback"])):d("",!0),s(G,{title:"您确认要批量删除所选数据吗？",onConfirm:t[5]||(t[5]=a=>j("del"))},{reference:o(()=>[s(C,{disabled:e(S).length===0},{default:o(()=>t[18]||(t[18]=[u("批量删除",-1)])),_:1,__:[18]},8,["disabled"])]),_:1}),s(C,{loading:!1,disabled:e(S).length===0,onClick:J},{default:o(()=>t[19]||(t[19]=[u("批量更新品牌首字母 ",-1)])),_:1,__:[19]},8,["disabled"]),e(S).length>0?(n(),y("span",ze,[t[20]||(t[20]=u(" 已选择：",-1)),l("b",null,h(e(S).length),1),t[21]||(t[21]=u(" 项 ",-1))])):d("",!0)]),_:1})])]),l("div",Te,[s(X,{spinning:e(w)},{default:o(()=>[s(Q,{data:e(T),loading:e(w),total:e(x),"row-key":"brandId","show-overflow-tooltip":"",onSelectionChange:e(L),onSortChange:e(H)},{empty:o(()=>[l("div",$e,[e(w)?d("",!0):(n(),y("div",je,"暂无数据"))])]),default:o(()=>[s(c,{type:"selection",width:"32"}),s(c,{width:200,label:"品牌名称",prop:"brandId",sortable:"custom"},{default:o(({row:a})=>[s(e(q),{"org-value":a.brandName,"onUpdate:orgValue":v=>a.brandName=v,max:30,params:{id:a.brandId,field:"brandName"},requestApi:e(I),label:"品牌名称",type:"textarea"},{default:o(()=>[u(h(a.brandName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"]),a.shop?(n(),y("p",He,[t[22]||(t[22]=l("span",{class:"span-tit"},"店铺：",-1)),l("span",Le,h(a.shop.shopTitle),1)])):d("",!0)]),_:1}),s(c,{label:"品牌缩略图",width:"100"},{default:o(({row:a})=>[a.brandLogo?(n(),p(e(le),{key:0,src:e(te)(a.brandLogo),fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])):(n(),y("span",Re,"暂无图片"))]),_:1}),s(c,{label:"首字母"},{default:o(({row:a})=>[s(e(q),{"org-value":a.firstWord,"onUpdate:orgValue":v=>a.firstWord=v,len:1,params:{id:a.brandId,field:"firstWord"},requestApi:e(I),label:"首字母",type:"input"},{default:o(()=>[l("div",null,h(a.firstWord||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),e(_)==="admin"&&i.value===1?(n(),p(c,{key:0,label:"是否热销"},{default:o(({row:a})=>[s(e(F),{checked:a.brandIsHot,"onUpdate:checked":v=>a.brandIsHot=v,params:{id:a.brandId,field:"brandIsHot"},requestApi:e(I)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1})):d("",!0),s(c,{label:"是否显示",prop:"isShow",sortable:"custom"},{default:o(({row:a})=>[s(e(F),{checked:a.isShow,"onUpdate:checked":v=>a.isShow=v,params:{id:a.brandId,field:"isShow"},requestApi:e(I)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),e(_)==="shop"||i.value===2?(n(),p(c,{key:1,label:"审核状态",prop:"status"},{default:o(({row:a})=>[u(h(a.statusText),1)]),_:1})):d("",!0),e(_)==="shop"||i.value===2?(n(),p(c,{key:2,label:"审核备注",prop:"rejectRemark"},{default:o(({row:a})=>[u(h(a.rejectRemark||"-"),1)]),_:1})):d("",!0),e(_)==="admin"&&i.value===1?(n(),p(c,{key:3,label:"排序",prop:"sortOrder",sortable:"custom"},{default:o(({row:a})=>[s(e(q),{"org-value":a.sortOrder,"onUpdate:orgValue":v=>a.sortOrder=v,params:{id:a.brandId,field:"sortOrder"},requestApi:e(I),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"integer"},{default:o(()=>[l("div",null,h(a.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):d("",!0),s(c,{width:150,fixed:"right",label:"操作"},{default:o(({row:a})=>[i.value===1&&a.status!=0?(n(),p(e(V),{key:0,params:{act:"detail",id:a.brandId},isDrawer:"",path:"product/brand/Info",title:"编辑品牌",width:"600px",onOkCallback:e(b)},{default:o(()=>t[23]||(t[23]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[23]},1032,["params","onOkCallback"])):d("",!0),i.value===1&&a.status!=0?(n(),p(A,{key:1,direction:"vertical"})):d("",!0),e(_)==="shop"&&i.value===1&&a.status===0?(n(),p(e(V),{key:2,params:{act:"detail",id:a.brandId,examine:1},isDrawer:"",showClose:!1,showOnOk:!1,path:"product/brand/Info",title:"品牌详情",width:"600px",onOkCallback:e(b)},{default:o(()=>t[24]||(t[24]=[l("a",{class:"btn-link"},"详情",-1)])),_:2,__:[24]},1032,["params","onOkCallback"])):d("",!0),e(_)==="shop"&&i.value===1&&a.status===0?(n(),p(A,{key:3,direction:"vertical"})):d("",!0),i.value===2&&a.status!=0?(n(),p(e(V),{key:4,params:{act:"detail",id:a.brandId,examine:1},isDrawer:"",showClose:!1,showOnOk:!1,path:"product/brand/Info",title:"品牌详情",width:"600px",onOkCallback:e(b)},{default:o(()=>t[25]||(t[25]=[l("a",{class:"btn-link"},"详情",-1)])),_:2,__:[25]},1032,["params","onOkCallback"])):d("",!0),i.value===2&&a.status!=0?(n(),p(A,{key:5,direction:"vertical"})):d("",!0),i.value===2&&a.status===0?(n(),p(e(V),{key:6,dialogClass:"noPadding",params:{act:"detail",id:a.brandId},isDrawer:"",path:"product/brand/Examine",title:"品牌审核",width:"600px",onOkCallback:E},{default:o(()=>t[26]||(t[26]=[l("a",{class:"btn-link"},"去处理",-1)])),_:2,__:[26]},1032,["params"])):d("",!0),i.value===2&&a.status===0?(n(),p(A,{key:7,direction:"vertical"})):d("",!0),s(e(se),{params:{id:a.brandId},requestApi:e(ie),onAfterDelete:e(b)},{default:o(()=>t[27]||(t[27]=[u("删除 ",-1)])),_:2,__:[27]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(x)>0?(n(),y("div",Ee,[s(e(oe),{page:e(r).page,"onUpdate:page":t[6]||(t[6]=a=>e(r).page=a),size:e(r).size,"onUpdate:size":t[7]||(t[7]=a=>e(r).size=a),total:e(x),onCallback:e(b)},null,8,["page","size","total","onCallback"])])):d("",!0)])])])])}}});export{ia as default};
