import F from"./SignTag-CbSUBbBb.js";import{a9 as L,d as H,r as _,e as i,f as w,g as v,h as d,j as S,k as B,aH as K,l as a,y as s,i as f,F as $,m as P,K as j,t as q,aE as z,J as T}from"./index-BGgofOm4.js";import{s as G}from"./order-BPrSE32N.js";function M(n){return typeof n!="object"||n===null?n:JSON.parse(JSON.stringify(n))}function Q(n,c=M){const o=L(c(n));return[o,()=>{const p=c(n);Object.keys(o).forEach(u=>{u in p?o[u]=p[u]:delete o[u]})}]}const W={class:"header"},X={class:"header-title"},Y={class:"button-box"},oe=H({inheritAttrs:!1,__name:"EditSign",props:{item:{type:Object,default:()=>({})},ids:{type:Array,default:()=>[]}},emits:["callBack"],setup(n,{emit:c}){const o=n,y=c,p=_(),u=[{value:1,color:"#ff5050"},{value:2,color:"#ffba1f"},{value:3,color:"#2ecf92"},{value:4,color:"#16afff"},{value:5,color:"#792dff"}],g=_(!1),m=_(!1),b=_(!1),[r,C]=Q({adminNote:"",mark:0}),x=()=>{const{adminNote:l="",mark:e=0}=o.item;r.adminNote=l,r.mark=e,g.value=!0,m.value=!0},N=()=>{m.value=!1,C()},A=()=>{C(),V()},E=async()=>{V()},V=async()=>{try{const l={...r};o.item.orderId?l.id=o.item.orderId:o.ids&&o.ids.length>0&&(l.ids=o.ids.join(",")),await G(l),T.success("操作成功"),m.value=!1,y("callBack")}catch(l){T.error(l.message)}};return(l,e)=>{const I=i("el-radio"),O=i("el-radio-group"),k=i("el-form-item"),R=i("TigInput"),h=i("el-button"),D=i("el-form"),J=i("a-spin"),U=i("el-dialog");return v(),w($,null,[d("div",{class:"btn",onClick:x},[K(l.$slots,"default")]),g.value?(v(),S(U,z({key:0,class:"sign-dialog","append-to-body":!0,"show-close":!1,modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),width:"500",top:"35vh"},l.$attrs,{onClose:N,onClosed:e[5]||(e[5]=t=>g.value=!1)}),{header:a(()=>[d("div",W,[d("div",X,q(l.$attrs.title||"添加标记"),1),d("div",{class:"header-close",onClick:e[0]||(e[0]=t=>m.value=!1)},e[6]||(e[6]=[d("i",{class:"iconfont-admin icon-cha1"},null,-1)]))])]),default:a(()=>[s(J,{spinning:b.value,style:{width:"100%",height:"100%"}},{default:a(()=>[b.value?B("",!0):(v(),S(D,{key:0,ref_key:"formRef",ref:p,model:f(r),"label-width":"auto"},{default:a(()=>[s(k,{label:"标记",prop:"mark "},{default:a(()=>[s(O,{modelValue:f(r).mark,"onUpdate:modelValue":e[1]||(e[1]=t=>f(r).mark=t)},{default:a(()=>[(v(),w($,null,P(u,t=>s(I,{key:t.value,value:t.value},{default:a(()=>[s(F,{value:t.value},null,8,["value"])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),s(k,{label:"备注",prop:"adminNote"},{default:a(()=>[s(R,{classType:"tig-form-input",modelValue:f(r).adminNote,"onUpdate:modelValue":e[2]||(e[2]=t=>f(r).adminNote=t),rows:6,placeholder:"请输入备注",type:"textarea","show-word-limit":"",maxlength:200},null,8,["modelValue"])]),_:1}),s(k,null,{default:a(()=>[d("div",Y,[d("a",{class:"btn-link",onClick:A},"清除"),s(h,{onClick:N},{default:a(()=>e[7]||(e[7]=[j("取消",-1)])),_:1,__:[7]}),s(h,{type:"primary",onClick:e[3]||(e[3]=t=>E())},{default:a(()=>e[8]||(e[8]=[j("提交 ",-1)])),_:1,__:[8]})])]),_:1})]),_:1},8,["model"]))]),_:1},8,["spinning"])]),_:1},16,["modelValue"])):B("",!0)],64)}}});export{oe as _};
