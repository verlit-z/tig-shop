import{F as z}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-CloSefEz.js";import{d as q,r as U,Y as K,e as g,f as p,g as n,k as u,h as i,i as l,n as W,F as M,j as y,E as G,y as d,l as o,I as E,aH as H,ds as J,_ as P,cf as A,P as Y,cU as Q,o as X,m as Z,K as V,J as F}from"./index-BGgofOm4.js";import"./index-BdoKLCH8.js";import{d as ee}from"./vuedraggable.umd-CLczY9wy.js";import{_ as O}from"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import{i as B}from"./format-CpNC4fsQ.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import{j as le}from"./product-DiKWBvyV.js";import{R as te}from"./RadioType-BLsVTk5U.js";import{S as ae}from"./SelectBrand-DSwX5rvc.js";import{_ as ie}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DH07CGtZ.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";/* empty css                                                                    *//* empty css                                                                              */import{_ as de}from"./SelectShopProductCategory.vue_vue_type_script_setup_true_lang-CrgZMQ3v.js";import{B as oe}from"./BusinessData-Dur53bjV.js";import"./BusinessImg-Dt_2PeVb.js";import"./index-BS7Hjr9I.js";/* empty css                                                                  */import"./brand-JXPhU1RM.js";import"./category-0ZzOrTFu.js";import"./time-BL_Iz6xX.js";import"./shopProductCategory-o4waiUa_.js";const se={class:"gallery-pic"},re={class:"item-img add-photo-btn"},ne={class:"video-item-box-icon"},ue=["src"],me={class:"flex",style:{"flex-direction":"column",height:"80px",width:"80px","align-items":"center","justify-content":"center","line-height":"22px"}},pe={key:2,class:"flex",style:{"flex-direction":"column",height:"80px",width:"80px","align-items":"center","justify-content":"center","line-height":"22px"}},ye={key:0,class:"item-action"},ve={key:1,class:"gallery-list-warp"},ce={class:"item","data-id":"img.imgId"},fe={class:"img flex flex-justify-center"},ge={class:"lyecs-dialogImage"},be=["src"],xe=["onClick"],ke={key:0,class:"item gallery-add-item add-gallery-photo-btn",draggable:"false"},Ie={class:"item gallery-add-item add-gallery-photo-btn",draggable:"false"},Ve=q({__name:"FormAddGalleryVideo",props:{video:{type:Array,default:[]},videos:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:Number,default:1}},emits:["update:video","update:videos"],setup(a,{emit:$}){U(null);const f=a,{video:t,videos:k,isMultiple:w,disabled:v}=K(f),I=$,x=b=>{w.value==!0?I("update:videos",k.value.concat(b)):I("update:video",b)},h=b=>{w.value==!0?(k.value.splice(b,1),I("update:videos",k.value)):I("update:video",[])},S=()=>{I("update:videos",[])};return(b,m)=>{const c=g("SvgIcon"),e=g("el-icon");return n(),p("div",se,[!l(w)&&a.type==1?(n(),p("div",{key:0,class:W("gallery-pic-select "+(l(t).length>0?"have_image":"")+(l(v)?"disabled":""))},[i("div",re,[l(t).length>0?(n(),p(M,{key:0},[i("div",ne,[d(l(C),{type:"galleryVideo",disabled:l(v),class:"item item-edit",onOkCallback:x,width:"850px",params:{isMultiple:f.isMultiple}},{default:o(()=>m[3]||(m[3]=[i("i",{class:"iconfont-admin icon-shipin"},null,-1)])),_:1,__:[3]},8,["disabled","params"])]),l(t)[0].videoCover?(n(),y(l(O),{key:0,class:"gallery-img",src:l(B)(l(t)[0].videoCover)},null,8,["src"])):u("",!0),l(t)[0].videoCover?u("",!0):(n(),p("video",{key:1,src:l(B)(l(t)[0].videoUrl)},null,8,ue)),G(i("i",{onClick:m[0]||(m[0]=s=>h(0)),class:"btn-del iconfont icon-cha"},null,512),[[E,!l(v)]])],64)):(n(),p(M,{key:1},[l(t).length==0&&!l(v)?(n(),y(l(C),{key:0,type:"galleryVideo",class:"item-bg",onOkCallback:x,disabled:l(v),params:{isMultiple:f.isMultiple},width:"850px"},{default:o(()=>[i("div",me,[d(c,{name:"product-add-video",width:"20",height:"20"})])]),_:1},8,["disabled","params"])):u("",!0)],64)),l(v)?(n(),p("div",pe,[d(c,{name:"product-add-video",width:"20",height:"20"})])):u("",!0)]),l(t).length>0&&a.type==1?(n(),p("div",ye,[d(l(C),{type:"galleryVideo",disabled:l(v),class:"item item-edit",onOkCallback:x,width:"850px",params:{isMultiple:f.isMultiple}},{default:o(()=>m[4]||(m[4]=[i("span",{class:"iconfont icon-bianji1"},null,-1)])),_:1,__:[4]},8,["disabled","params"]),i("span",{onClick:S,class:"item item-remove iconfont icon-shanchu"})])):u("",!0)],2)):u("",!0),i("div",null,[a.type==2?(n(),y(l(C),{key:0,type:"galleryVideo",disabled:l(v),onOkCallback:x,params:{isMultiple:f.isMultiple},width:"850px"},{default:o(()=>[i("div",null,[H(b.$slots,"default",{},void 0,!0)])]),_:3},8,["disabled","params"])):u("",!0)]),l(w)?(n(),p("div",ve,[i("div",null,[d(l(ee),{class:"gallery-list-ul","item-key":"picId",list:l(k),"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:m[1]||(m[1]=()=>{}),onEnd:m[2]||(m[2]=()=>{})},{item:o(({element:s,index:_})=>[i("div",ce,[i("div",fe,[d(l(C),{type:"galleryVideo",disabled:l(v),onOkCallback:x,width:"850px",params:{isMultiple:f.isMultiple}},{default:o(()=>[i("a",ge,[m[5]||(m[5]=i("div",{class:"video-item-box-icon"},[i("i",{class:"iconfont-admin icon-shipin"})],-1)),s.videoCover?(n(),y(l(O),{key:0,class:"gallery-img",big:s.videoCover,src:l(B)(s.videoCover)},null,8,["big","src"])):u("",!0),s.videoCover?u("",!0):(n(),p("video",{key:1,src:l(B)(s.videoUrl)},null,8,be))])]),_:2},1032,["disabled","params"]),G(i("i",{onClick:L=>h(_),class:"btn-del iconfont icon-cha"},null,8,xe),[[E,!l(v)]])])])]),footer:o(()=>[l(v)?(n(),p("div",ke,m[6]||(m[6]=[i("i",{class:"iconfont icon-tianjiatupian"},null,-1)]))):(n(),y(l(C),{key:1,type:"galleryVideo",disabled:l(v),class:"",onOkCallback:x,params:{isMultiple:f.isMultiple},width:"850px"},{default:o(()=>[i("div",Ie,[d(e,{size:"25"},{default:o(()=>[d(l(J))]),_:1})])]),_:1},8,["disabled","params"]))]),_:1},8,["list"])])])):u("",!0)])}}}),Ce=P(Ve,[["__scopeId","data-v-84343f88"]]),we="/admin/assets/productBrief-7efAv92y.png",he={key:0,class:"extra mt10"},Se={class:"flex flex-justify-between"},Te={class:"flex flex-justify-between"},Me={key:1,class:"con-btn"},Be={class:"keywords"},Ue={class:"extra"},_e=q({__name:"BasicInfo",props:A({id:{type:Number,default:0},shopId:{type:Number,default:0},examine:{type:Number,default:0},loading:{type:Boolean,default:!1},type:{type:String,default:""},action:{type:String,default:""}},{formState:{default:{}},formStateModifiers:{}}),emits:A(["submitCallback","update:confirmLoading","close","closeConfirm"],["update:formState"]),setup(a,{emit:$}){const f=Y(),t=Q(a,"formState"),k=U([]);X(async()=>{k.value=[{key:1,title:"普通商品"}]});const w=(c,e,s)=>{if(e)s();else{s(new Error("商品名称不能为空"));return}},v=(c,e,s)=>{if(e)s();else{s(new Error("请选择商品图片"));return}},I=(c,e,s)=>{if(e)s();else{s(new Error("请选择商品类目"));return}},x=(c,e,s)=>{if(e)s();else{s(new Error("请选择电子卡券组"));return}},h=U(!1),S=U(),b=async()=>{h.value=!0;try{S.value.loaded=!1,await S.value.loadCategory()}catch(c){F.error(c.message)}finally{setTimeout(()=>{h.value=!1},200)}},m=async()=>{try{const c=await le({productName:t.value.productName});t.value.keywords=c}catch(c){F.error(c.message)}};return(c,e)=>{const s=g("el-form-item"),_=g("el-option"),L=g("el-select"),N=g("el-button"),T=g("TigInput"),D=g("el-popover"),j=g("el-radio"),R=g("el-radio-group");return n(),p(M,null,[d(s,{rules:[{required:!0}],label:"商品类型",prop:"productType"},{default:o(()=>[i("div",null,[e[14]||(e[14]=i("div",{class:"extra mb10",style:{"margin-top":"3px"}},"不同商品类型可编辑的字段内容不同，商品类型一旦发布后将不可更改",-1)),d(l(te),{modelValue:t.value.productType,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.productType=r),disabled:a.action=="detail",radioList:k.value},null,8,["modelValue","disabled","radioList"]),t.value.productType!=1?(n(),p("div",he,"该类型商品同样需要客户填写收货地址")):u("",!0)])]),_:1}),d(s,{rules:[{required:!0,validator:v}],label:"商品图片",prop:"imgList"},{default:o(()=>[a.loading?u("",!0):(n(),y(l(z),{key:0,photos:t.value.imgList,"onUpdate:photos":e[1]||(e[1]=r=>t.value.imgList=r),disabled:a.examine==1||a.type!=="",isMultiple:!0},null,8,["photos","disabled"])),e[15]||(e[15]=i("div",{class:"extra"},"您可以通过拖拽来调整相册图片顺序，第一张图将作为商品主图展示",-1))]),_:1,__:[15]},8,["rules"]),d(s,{label:"商品视频",prop:"productVideoInfo"},{default:o(()=>[a.loading?u("",!0):(n(),y(l(Ce),{key:0,video:t.value.productVideoInfo,"onUpdate:video":e[2]||(e[2]=r=>t.value.productVideoInfo=r),disabled:a.examine==1||a.type!==""},null,8,["video","disabled"])),e[16]||(e[16]=i("div",{class:"extra"},"如有商品视频则商品视频作为商品主图展示",-1))]),_:1,__:[16]}),t.value.productType==3?(n(),y(s,{key:0,rules:[{required:!0,validator:x}],class:"inner-item",label:"电子卡券分组",prop:"cardGroupId"},{default:o(()=>[i("div",Se,[d(L,{modelValue:t.value.cardGroupId,"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.cardGroupId=r),disabled:a.examine==1||a.type!=="",placeholder:"请选择",style:{width:"200px"}},{default:o(()=>[(n(!0),p(M,null,Z(t.value.eCardList,r=>(n(),y(_,{key:r.groupId,label:r.groupName,value:r.groupId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])]),_:1},8,["rules"])):u("",!0),d(s,{rules:[{required:!0,validator:w}],class:"inner-item",label:"商品名称",prop:"productName"},{default:o(()=>[d(oe,{modelValue:t.value.productName,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.productName=r),dataId:a.id,dataType:2,disabled:a.examine==1||a.type!=="",maxlength:100,placeholder:"请输入商品名称"},null,8,["modelValue","dataId","disabled"])]),_:1},8,["rules"]),d(s,{class:"inner-item",label:"商品品牌",prop:"brandId"},{default:o(()=>[a.loading?u("",!0):(n(),y(l(ae),{key:0,brandId:t.value.brandId,"onUpdate:brandId":e[5]||(e[5]=r=>t.value.brandId=r),disabled:a.examine==1||a.type!=="",style:{width:"200px"}},null,8,["brandId","disabled"]))]),_:1}),d(s,{rules:[{required:!0,message:"请选择商品类目!",validator:I}],class:"inner-item",label:"商品类目",prop:"categoryId"},{default:o(()=>[i("div",Te,[a.loading?u("",!0):(n(),y(l(ie),{key:0,ref_key:"selectCategory",ref:S,categoryId:t.value.categoryId,"onUpdate:categoryId":e[6]||(e[6]=r=>t.value.categoryId=r),disabled:a.examine==1||a.type!=="",multiple:!1,style:{width:"200px"}},null,8,["categoryId","disabled"])),a.examine!=1?(n(),p("div",Me,[l(f)==="admin"?(n(),p(M,{key:0},[d(l(C),{params:{act:"add",parentId:0},isDrawer:"",path:"product/category/Info",title:"添加分类",width:"600px",onOkCallback:b},{default:o(()=>[d(N,{link:"",type:"primary"},{default:o(()=>e[17]||(e[17]=[V("新建",-1)])),_:1,__:[17]})]),_:1}),e[18]||(e[18]=i("p",{class:"ml10 mr10",style:{"margin-bottom":"3px"}},"|",-1))],64)):u("",!0),d(N,{loading:h.value,link:"",type:"primary",onClick:b},{default:o(()=>e[19]||(e[19]=[V("刷新 ",-1)])),_:1,__:[19]},8,["loading"])])):u("",!0)])]),_:1},8,["rules"]),l(f)=="shop"?(n(),y(s,{key:1,class:"inner-item",label:"店铺商品分类",prop:"shopCategoryId"},{default:o(()=>[d(l(de),{categoryId:t.value.shopCategoryId,"onUpdate:categoryId":e[7]||(e[7]=r=>t.value.shopCategoryId=r),disabled:a.examine==1},null,8,["categoryId","disabled"])]),_:1})):u("",!0),a.type==""?(n(),y(s,{key:2,class:"inner-item",label:"商品重量",prop:"decimal"},{default:o(()=>[d(T,{modelValue:t.value.productWeight,"onUpdate:modelValue":e[8]||(e[8]=r=>t.value.productWeight=r),decimalPlaces:3,disabled:a.examine==1,class:"InputBox",placeholder:"请输入",type:"decimal",width:"200px"},{append:o(()=>e[20]||(e[20]=[V("Kg",-1)])),_:1},8,["modelValue","disabled"])]),_:1})):u("",!0),a.type==""?(n(),y(s,{key:3,class:"inner-item",label:"商品条码",prop:"productTsn"},{default:o(()=>[i("div",null,[d(T,{modelValue:t.value.productTsn,"onUpdate:modelValue":e[9]||(e[9]=r=>t.value.productTsn=r),disabled:a.examine==1,classType:"tig-form-input"},null,8,["modelValue","disabled"]),e[21]||(e[21]=i("div",{class:"extra"},"用于快速识商品所标记的编码，比如：69开头的13位标准码",-1))])]),_:1})):u("",!0),a.type==""?(n(),y(s,{key:4,class:"inner-item",label:"商品编码",prop:"productSn"},{default:o(()=>[i("div",null,[d(T,{modelValue:t.value.productSn,"onUpdate:modelValue":e[10]||(e[10]=r=>t.value.productSn=r),disabled:a.examine==1,classType:"tig-form-input"},null,8,["modelValue","disabled"]),e[22]||(e[22]=i("div",{class:"extra"},"如果您不输入商品编码，系统将自动生成一个唯一的编码",-1))])]),_:1})):u("",!0),d(s,{class:"inner-item",label:"搜索关键词",prop:"keywords"},{default:o(()=>[i("div",Be,[d(T,{modelValue:t.value.keywords,"onUpdate:modelValue":e[11]||(e[11]=r=>t.value.keywords=r),disabled:a.examine==1||a.type!=="",class:"InputBox",classType:"tig-form-input",placeholder:"例如：牙刷 自动 清洁"},null,8,["modelValue","disabled"]),d(N,{disabled:a.examine==1,onClick:m,style:{"margin-top":"2px"}},{default:o(()=>e[23]||(e[23]=[V("更新关键词",-1)])),_:1,__:[23]},8,["disabled"])]),e[24]||(e[24]=i("div",{class:"extra"},"用空格分隔，为空时会自动根据商品名称分词",-1))]),_:1,__:[24]}),d(s,{class:"inner-item",extra:"",label:"商品描述",prop:"productBrief"},{default:o(()=>[i("div",null,[d(T,{modelValue:t.value.productBrief,"onUpdate:modelValue":e[12]||(e[12]=r=>t.value.productBrief=r),disabled:a.examine==1||a.type!=="",rows:2,classType:"tig-form-input",placeholder:"例如：顺丰快递 又快又好",type:"textarea"},null,8,["modelValue","disabled"]),i("div",Ue,[e[27]||(e[27]=V(" 该描述可作为“商品卖点”的概述及促销信息补充 ",-1)),d(D,{width:400,placement:"right-end",trigger:"click"},{reference:o(()=>e[25]||(e[25]=[i("a",null,"查看示例",-1)])),default:o(()=>e[26]||(e[26]=[i("img",{src:we,style:{width:"380px"}},null,-1)])),_:1})])])]),_:1}),d(s,{class:"inner-item",label:"是否上架",prop:"productStatus"},{default:o(()=>[d(R,{modelValue:t.value.productStatus,"onUpdate:modelValue":e[13]||(e[13]=r=>t.value.productStatus=r),disabled:a.examine==1,style:{width:"100%"}},{default:o(()=>[d(j,{value:1},{default:o(()=>e[28]||(e[28]=[V("上架",-1)])),_:1,__:[28]}),d(j,{value:0},{default:o(()=>e[29]||(e[29]=[V("下架",-1)])),_:1,__:[29]})]),_:1},8,["modelValue","disabled"]),e[30]||(e[30]=i("div",{class:"extra"},"上架则允许销售（未审核的商品无法手动上架）",-1))]),_:1,__:[30]})],64)}}}),ll=P(_e,[["__scopeId","data-v-34a8a8f8"]]);export{ll as default};
