import{B as N}from"./BusinessData-Dur53bjV.js";import{B as j}from"./BusinessImg-Dt_2PeVb.js";import"./index-BdoKLCH8.js";import{_ as D}from"./Editor.vue_vue_type_style_index_0_lang-CJqyZ8fW.js";import{d as H}from"./vuedraggable.umd-CLczY9wy.js";import{i as g}from"./format-CpNC4fsQ.js";import{_ as h}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import{M as P}from"./index-BS7Hjr9I.js";import{d as E,r as y,o as L,c as S,e as q,j as z,g as o,l as r,h as t,f as c,k as f,y as d,i as n,K as w,_ as F}from"./index-BGgofOm4.js";const K={class:"goods-info-edit-row",style:{width:"100%"}},G={key:0,class:"goods-info-edit-warp"},J={class:"goods-info-edit-act flex"},Q={class:"goods-info-edit-con"},R={class:"info-edit-list-item",draggable:"false",style:{}},W={key:0,class:"edit-list-item-img"},X={class:"lyecs-dialogImage",draggable:"false"},Y=["src"],Z={key:1,class:"edit-list-item-img"},ee={class:"lyecs-dialogImage",draggable:"false"},te=["src"],se={key:2,class:"edit-list-item-text"},le=["onClick"],ie=["onClick"],ae={class:"relative"},oe=["innerHTML"],de={key:2,class:"goods-detail-preview-warp"},ne={key:0,class:"extra"},re=E({__name:"ProductDesc",props:{descArr:{type:[Object,Array],default:[]},disabled:{type:Boolean,default:!1},productType:{type:Number,default:1},label:{type:String,default:"商品详情"}},emits:["update:descArr"],setup(p,{emit:x}){const l=y(p.descArr||[]),m=y(!1),a=y({html:""}),u=y(0),C=x;L(()=>{C("update:descArr",l)});const V=s=>{for(let e in s)l.value.push({pic:s[e].picUrl,type:"pic"})},b=(s,e)=>{l.value[u.value]={pic:s[0].picUrl,type:"pic"}},T=(s,e)=>{l.value[u.value]={cover:s[0].videoCover,type:"video"}},B=s=>{console.log(s)},k=S(()=>{let s=[];for(let e in l.value)l.value[e].type=="pic"?s.push('<div class="desc-pic-item"><img src="'+g(l.value[e].pic)+'"></div>'):l.value[e].type=="video"?s.push(`
                <div class="desc-video-item" @click="${B(l.value[e])}">
                    <div class="desc-video-item-wrap">
                        <i class="iconfont-admin icon-shipin"></i>
                    </div>
                    <img src="${g(l.value[e].cover)}">
                </div>
            `):s.push(l.value[e].html);return s.join("<div data-division=1></div>")}),M=()=>{m.value=!0,a.value.html=""},A=s=>{a.value.html=l.value[s].html,u.value=s+1,m.value=!0},O=s=>{l.value.splice(s,1)},U=s=>{l.value.splice(s,1)},$=()=>{u.value>0?l.value[u.value-1]={html:a.value.html,type:"text"}:l.value.push({html:a.value.html,type:"text"}),u.value=0,m.value=!1};return(s,e)=>{const I=q("el-form-item");return o(),z(I,{label:p.label,rules:[{required:p.productType==4}]},{default:r(()=>[t("div",K,[p.disabled?f("",!0):(o(),c("div",G,[t("div",J,[d(n(h),{type:"gallery",class:"item-bg",onOkCallback:V,params:{isMultiple:!0}},{default:r(()=>e[6]||(e[6]=[t("a",{class:"add-item info-pic-add"},[t("i",{class:"iconfont icon-tianjiatupian"}),w("添加图片")],-1)])),_:1,__:[6]}),t("a",{class:"add-item info-text-add",onClick:M},e[7]||(e[7]=[t("i",{class:"iconfont icon-wenben",style:{"font-size":"14px"}},null,-1),w("添加文本",-1)])),e[8]||(e[8]=t("span",null,"点击按钮添加图片或者文本，您还可以通过拖拽进行排序",-1))]),t("div",Q,[d(n(H),{class:"info-edit-con-list","item-key":"",list:l.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:r(({element:i,index:v})=>[t("div",R,[i.type=="pic"?(o(),c("div",W,[d(j,{modelValue:i.pic,"onUpdate:modelValue":_=>i.pic=_,picThumb:i.pic,dataType:7,onDelete:U,style:{width:"100px",height:"100px"},edit:!1,data:{index:v},onEdit:b},{default:r(()=>[t("a",X,[t("img",{src:n(g)(i.pic),draggable:"false"},null,8,Y)])]),_:2},1032,["modelValue","onUpdate:modelValue","picThumb","data"]),d(n(h),{type:"gallery",class:"item-bg",onOkCallback:b,params:{isMultiple:!1},data:{index:v}},{default:r(()=>e[9]||(e[9]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2,__:[9]},1032,["data"])])):f("",!0),i.type=="video"?(o(),c("div",Z,[t("a",ee,[t("img",{src:n(g)(i.cover),draggable:"false"},null,8,te)]),d(n(h),{type:"galleryVideo",class:"item-bg",onOkCallback:T,params:{isMultiple:!1},data:{index:v}},{default:r(()=>e[10]||(e[10]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2,__:[10]},1032,["data"])])):f("",!0),i.type=="text"?(o(),c("div",se,[e[11]||(e[11]=t("p",null,[t("i",{class:"iconfont icon-1fuwenben"})],-1)),e[12]||(e[12]=t("p",null,"文本",-1)),t("div",{class:"btn-edit",onClick:_=>A(v)},"修改",8,le)])):f("",!0),t("i",{class:"btn-del iconfont icon-cha",onClick:_=>O(v)},null,8,ie)])]),_:1},8,["list"])]),d(n(P),{open:m.value,"onUpdate:open":e[4]||(e[4]=i=>m.value=i),title:"添加文本",onOk:e[5]||(e[5]=i=>$()),destroyOnClose:!0,width:800},{default:r(()=>[t("div",ae,[d(n(D),{html:a.value.html,"onUpdate:html":e[2]||(e[2]=i=>a.value.html=i),height:"300px"},null,8,["html"]),d(N,{modelValue:a.value.html,"onUpdate:modelValue":e[3]||(e[3]=i=>a.value.html=i),dataType:9,type:"editor"},null,8,["modelValue"])])]),_:1},8,["open"])])),k.value?(o(),c("div",{key:1,class:"goods-detail-preview-warp",innerHTML:k.value},null,8,oe)):(o(),c("div",de,e[13]||(e[13]=[t("div",{class:"preview-warp"},"商品描述预览区域",-1)])))]),p.productType==4?(o(),c("div",ne,"此处填写内容，将在商品付费后展示")):f("",!0)]),_:1},8,["label","rules"])}}}),be=F(re,[["__scopeId","data-v-f177c4ec"]]);export{be as default};
