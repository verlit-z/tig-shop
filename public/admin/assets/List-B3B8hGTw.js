import{_ as $,f as c,g as i,d as L,v as R,e as r,h as t,y as n,K as l,l as s,i as e,k as _,t as u,p as E,j as S}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{P as b}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-DhDNvZWl.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-BQY033uH.js";import{D as j}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as G}from"./Pagination-Nz0PhK3s.js";import{u as g,d as H,b as J,g as Q}from"./coupon-CE2JR07k.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";/* empty css                                                                              */import{u as W}from"./useListRequest-DIT8yyoo.js";import{_ as I}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";import"./time-BL_Iz6xX.js";const X={};function Y(D,A){return i(),c("div")}const Z=$(X,[["render",Y]]),ee={class:"container"},oe={class:"content_wrapper"},te={class:"bonus-wrap"},ae={class:"card-wrap"},ne={class:"card-wrap__container"},se={class:"item-bg coupon-cards-item"},le={class:"item-bg coupon-cards-item"},ie={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},pe={class:"list-table-tool-row"},re={class:"simple-form-warp"},ue={key:0,class:"simple-form-field"},ce={class:"form-group"},me={class:"control-container"},_e={class:"simple-form-field"},fe={class:"form-group"},ge={class:"control-container"},ve={class:"simple-form-field"},be={class:"form-group"},ye={key:0},he={class:"table-container"},ke={style:{position:"relative"}},Ce={key:0,class:"green"},Se={key:1,class:"green"},Ie={key:1},Ae={class:"empty-warp"},Ue={key:0,class:"empty-bg"},De={key:0,class:"pagination-con"},Ee=L({__name:"List",setup(D){const A=R(),{listData:V,loading:y,total:h,selectedIds:k,filterParams:d,loadData:f,onSearchSubmit:C,onSortChange:q,onSelectChange:O,onBatchAction:x}=W({apiFunction:Q,idKey:"couponId",defaultParams:{sortField:"",sortOrder:"",keyword:"",isShow:-1,shopId:0,page:1,size:A.get("pageSize")}}),N=async U=>{await x(U,J)};return f(),(U,a)=>{const v=r("el-button"),T=r("TigInput"),w=r("el-popconfirm"),z=r("el-space"),B=r("el-form"),m=r("el-table-column"),M=r("el-divider"),P=r("el-table"),F=r("a-spin");return i(),c("div",ee,[t("div",oe,[t("div",te,[a[9]||(a[9]=t("p",{class:"subtitle"},"按使用场景快速创建",-1)),t("div",ae,[t("div",ne,[t("div",se,[a[6]||(a[6]=t("div",null,[t("div",{class:"title"},"满减券"),t("div",{class:"desc"},[t("p",null,[l("例：满100元减20元"),t("br"),l("便于合理控制活动成本")])])],-1)),n(e(I),{isDrawer:"",onOkCallback:e(f),title:"添加满减券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",couponType:1}},{default:s(()=>[n(v,{type:"primary"},{default:s(()=>a[5]||(a[5]=[l("立即新建",-1)])),_:1,__:[5]})]),_:1},8,["onOkCallback"])]),t("div",le,[a[8]||(a[8]=t("div",null,[t("div",{class:"title"},"折扣券"),t("div",{class:"desc"},[t("p",null,[l("例：满100元打9折"),t("br"),l("提高店铺销量和客单价")])])],-1)),n(e(I),{isDrawer:"",onOkCallback:e(f),title:"添加折扣券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",couponType:2}},{default:s(()=>[n(v,{type:"primary"},{default:s(()=>a[7]||(a[7]=[l("立即新建",-1)])),_:1,__:[7]})]),_:1},8,["onOkCallback"])])])])]),t("div",ie,[t("div",de,[n(B,{model:e(d),onSubmit:E(e(C),["prevent"])},{default:s(()=>[t("div",pe,[t("div",re,[e(d).shopId==-1?(i(),c("div",ue,[t("div",ce,[t("div",me,[n(e(Z),{shopId:e(d).shopId,"onUpdate:shopId":a[0]||(a[0]=o=>e(d).shopId=o)},null,8,["shopId"])])])])):_("",!0),t("div",_e,[t("div",fe,[t("div",ge,[n(T,{modelValue:e(d).keyword,"onUpdate:modelValue":a[1]||(a[1]=o=>e(d).keyword=o),name:"keyword",placeholder:"输入优惠券名称",clearable:"",onClear:e(C)},{append:s(()=>[n(v,{onClick:e(C)},{default:s(()=>a[10]||(a[10]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[10]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])]),t("div",ve,[t("div",be,[n(z,null,{default:s(()=>[n(w,{title:"您确认要批量删除所选数据吗？",onConfirm:a[2]||(a[2]=o=>N("del"))},{reference:s(()=>[n(v,{disabled:e(k).length===0},{default:s(()=>a[11]||(a[11]=[l("批量删除",-1)])),_:1,__:[11]},8,["disabled"])]),_:1}),e(k).length>0?(i(),c("span",ye,[a[12]||(a[12]=l(" 已选择：",-1)),t("b",null,u(e(k).length),1),a[13]||(a[13]=l(" 项 ",-1))])):_("",!0)]),_:1})])])])])]),_:1},8,["model","onSubmit"])]),t("div",he,[n(F,{spinning:e(y)},{default:s(()=>[n(P,{data:e(V),"row-key":"couponId",onSelectionChange:e(O),total:e(h),onSortChange:e(q),loading:e(y)},{empty:s(()=>[t("div",Ae,[e(y)?_("",!0):(i(),c("div",Ue,"暂无数据"))])]),default:s(()=>[n(m,{type:"selection",width:"32"}),n(m,{label:"优惠券名称",prop:"couponId",width:200},{default:s(({row:o})=>[t("div",ke,[n(e(b),{label:"优惠券名称",type:"textarea",requestApi:e(g),"org-value":o.couponName,"onUpdate:orgValue":p=>o.couponName=p,params:{id:o.couponId,field:"couponName"}},{default:s(()=>[t("div",null,u(o.couponName),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),n(m,{label:"发放类型"},{default:s(({row:o})=>[l(u(o.couponType==1?"满减券":"折扣券")+" ",1),o.isNewUser==1?(i(),c("span",Ce,"(新人专享)")):_("",!0),o.limitUserRank.length?(i(),c("span",Se,"(会员专享)")):_("",!0)]),_:1}),n(m,{label:"优惠券金额(折扣)",prop:"couponMoney",sortable:"custom"},{default:s(({row:o})=>[o.couponType==1?(i(),S(e(b),{key:0,label:"优惠券金额",type:"decimal",requestApi:e(g),"org-value":o.couponMoney,"onUpdate:orgValue":p=>o.couponMoney=p,params:{id:o.couponId,field:"couponMoney"}},{default:s(()=>[t("div",null,u(o.couponMoney||"0"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):_("",!0),o.couponType==2?(i(),S(e(b),{key:1,label:"优惠券折扣",type:"decimal",requestApi:e(g),"org-value":o.couponDiscount,"onUpdate:orgValue":p=>o.couponDiscount=p,params:{id:o.couponId,field:"couponDiscount"}},{default:s(()=>[t("div",null,u(o.couponDiscount||"0")+"折",1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):_("",!0)]),_:1}),n(m,{label:"优惠门槛",prop:"minOrderAmount",sortable:"custom"},{default:s(({row:o})=>[o.reduceType==1?(i(),S(e(b),{key:0,label:"优惠门槛",type:o.couponUnit==1?"decimal":"integer",requestApi:e(g),"org-value":o.minOrderAmount,"onUpdate:orgValue":p=>o.minOrderAmount=p,params:{id:o.couponId,field:"minOrderAmount"}},{default:s(()=>[t("div",null,u(o.minOrderAmount||"0")+u(o.couponUnit==1?"元":"件"),1)]),_:2},1032,["type","requestApi","org-value","onUpdate:orgValue","params"])):(i(),c("div",Ie,"无门槛券"))]),_:1}),n(m,{label:"是否展示",prop:"isShow",sortable:"custom"},{default:s(({row:o})=>[n(e(K),{checked:o.isShow,"onUpdate:checked":p=>o.isShow=p,requestApi:e(g),params:{id:o.couponId,field:"isShow"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),n(m,{label:"活动时间",prop:"time"},{default:s(({row:o})=>[l(u(o.useStartDate)+" - "+u(o.useEndDate),1)]),_:1}),n(m,{label:"操作",fixed:"right"},{default:s(({row:o})=>[n(e(I),{isDrawer:"",onOkCallback:e(f),title:"编辑优惠券",width:"800px",path:"promotion/coupon/Info",params:{act:"detail",id:o.couponId}},{default:s(()=>a[14]||(a[14]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[14]},1032,["onOkCallback","params"]),n(M,{direction:"vertical"}),n(e(j),{onAfterDelete:e(f),requestApi:e(H),params:{id:o.couponId}},{default:s(()=>a[15]||(a[15]=[l("删除",-1)])),_:2,__:[15]},1032,["onAfterDelete","requestApi","params"])]),_:1})]),_:1},8,["data","onSelectionChange","total","onSortChange","loading"])]),_:1},8,["spinning"]),e(h)>0?(i(),c("div",De,[n(e(G),{page:e(d).page,"onUpdate:page":a[3]||(a[3]=o=>e(d).page=o),size:e(d).size,"onUpdate:size":a[4]||(a[4]=o=>e(d).size=o),total:e(h),onCallback:e(f)},null,8,["page","size","total","onCallback"])])):_("",!0)])])])])}}});export{Ee as default};
