import{d as K,L,r as v,a as q,a2 as E,o as H,e as u,f as P,g as _,h as y,j as U,k as V,y as o,l,E as $,i as N,K as p,I as j,J as b}from"./index-BGgofOm4.js";import{F as A}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-CloSefEz.js";import"./index-BdoKLCH8.js";import"./vuedraggable.umd-CLczY9wy.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-CdQ8MEGg.js";import{_ as G}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DH07CGtZ.js";/* empty css                                                                    *//* empty css                                                                              */import{e as J,f as M,u as z}from"./category-0ZzOrTFu.js";import{B as Q}from"./BusinessData-Dur53bjV.js";import"./Image.vue_vue_type_script_setup_true_lang-oDjiJjwB.js";import"./format-CpNC4fsQ.js";import"./BusinessImg-Dt_2PeVb.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";import"./time-BL_Iz6xX.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},ye=K({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:x,emit:B}){L();const m=B,n=C,i=v(!0),w=q().currentRoute.value.query,c=v(n.isDialog?n.act:String(w.act)),g=v(n.isDialog?n.id:Number(w.id)),S=c.value==="add"?"create":"update",I=E(),t=v({isShow:1,sortOrder:50}),D=async()=>{try{const s=await J(c.value,{id:g.value});Object.assign(t.value,s)}catch(s){b.error(s.message),m("close")}finally{i.value=!1}};H(()=>{c.value==="detail"?D():i.value=!1,S==="create"&&(t.value.parentId=n.parentId,console.log(t.value.parentId))});const k=async()=>{await I.value.validate();try{m("update:confirmLoading",!0);const s=await M(S,{id:g.value,...t.value});m("submitCallback",s),b.success("操作成功"),z().clearCategory()}catch(s){b.error(s.message)}finally{m("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{k()}}),(s,e)=>{const r=u("el-form-item"),d=u("TigInput"),f=u("el-radio"),T=u("el-radio-group"),O=u("el-button"),R=u("el-form"),F=u("a-spin");return _(),P("div",W,[y("div",X,[y("div",Y,[i.value?V("",!0):(_(),U(R,{key:0,ref_key:"formRef",ref:I,model:t.value,"label-width":"auto"},{default:l(()=>[o(r,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"categoryName"},{default:l(()=>[o(Q,{modelValue:t.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.categoryName=a),placeholder:"请输入分类名称",dataType:3,dataId:g.value},null,8,["modelValue","dataId"])]),_:1}),o(r,{label:"分类短名",prop:"shortName"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.shortName,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.shortName=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"上级分类",prop:"parentId"},{default:l(()=>[i.value?V("",!0):(_(),U(N(G),{key:0,categoryId:t.value.parentId,"onUpdate:categoryId":e[2]||(e[2]=a=>t.value.parentId=a),multiple:!1},null,8,["categoryId"]))]),_:1}),o(r,{label:"分类图片",prop:"categoryPic"},{default:l(()=>[o(N(A),{photo:t.value.categoryPic,"onUpdate:photo":e[3]||(e[3]=a=>t.value.categoryPic=a)},null,8,["photo"]),e[12]||(e[12]=y("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1,__:[12]}),o(r,{label:"数量单位",prop:"measureUnit"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.measureUnit,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.measureUnit=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"SEO标题",prop:"seoTitle"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.seoTitle,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.seoTitle=a)},null,8,["modelValue"]),e[13]||(e[13]=y("div",{class:"extra"},"如果不填，则该分类页的标题则为默认标题；如果该项不为空，则该分类页的标题显示此项的内容。",-1))]),_:1,__:[13]}),V("",!0),o(r,{label:"关键字",prop:"keywords"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.keywords,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.keywords=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"分类描述",prop:"categoryDesc"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.categoryDesc,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.categoryDesc=a),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),o(r,{label:"排序",prop:"sortOrder"},{default:l(()=>[o(d,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.sortOrder=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"是否热门",prop:"isHot"},{default:l(()=>[o(T,{modelValue:t.value.isHot,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.isHot=a)},{default:l(()=>[o(f,{value:1},{default:l(()=>e[14]||(e[14]=[p("是",-1)])),_:1,__:[14]}),o(f,{value:0},{default:l(()=>e[15]||(e[15]=[p("否",-1)])),_:1,__:[15]})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"是否显示",prop:"isShow"},{default:l(()=>[o(T,{modelValue:t.value.isShow,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.isShow=a)},{default:l(()=>[o(f,{value:1},{default:l(()=>e[16]||(e[16]=[p("是",-1)])),_:1,__:[16]}),o(f,{value:0},{default:l(()=>e[17]||(e[17]=[p("否",-1)])),_:1,__:[17]})]),_:1},8,["modelValue"])]),_:1}),$(o(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:l(()=>e[18]||(e[18]=[p("提交 ",-1)])),_:1,__:[18]},512)]),_:1},512),[[j,!n.isDialog]])]),_:1},8,["model"])),o(F,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ye as default};
