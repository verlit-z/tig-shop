import{d as E,a as I,v as G,r as N,o as H,e as i,f as d,g as l,h as o,y as s,l as n,i as e,a0 as J,K as u,k as c,t as g,j as _,z as U,n as Q,_ as W}from"./index-BGgofOm4.js";/* empty css             */import"./index-BdoKLCH8.js";import{D as X}from"./DeleteRecord-C3QKVgd9.js";/* empty css                                                                    */import{P as Y}from"./Pagination-Nz0PhK3s.js";import{i as Z}from"./format-CpNC4fsQ.js";import{h as ee,i as te,j as ae}from"./adminUser-CQS10PSg.js";import{r as oe}from"./avatar-D6FT3s3w.js";import{M as se}from"./MobileCard-BC3dXj5F.js";import"./Verify.vue_vue_type_style_index_0_lang-BlxcdrWa.js";import"./zh-cn-CbKWuMQl.js";import{T as ne}from"./Tag-Cb4hewVe.js";import{u as le}from"./useListRequest-DIT8yyoo.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-BTf40oxg.js";import"./index-BS7Hjr9I.js";const ie={class:"container"},re={class:"content_wrapper"},de={class:"lyecs-table-list-warp"},pe={class:"list-table-tool lyecs-search-warp"},ce={class:"list-table-tool-row"},me={class:"simple-form-warp"},ue={class:"simple-form-field"},_e={class:"form-group"},fe={class:"control-container"},ge={class:"simple-form-field"},ve={class:"form-group"},ye={class:"simple-form-field"},be={class:"form-group"},he={key:0},ke={class:"table-container"},Ce={class:"avatar-username"},Se={key:0},ze={key:1,class:"gray"},De={class:"empty-warp"},we={key:0,class:"empty-bg"},xe={key:0,class:"pagination-con"},Ie=E({__name:"ShopList",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(B){I();const V=G(),{listData:q,loading:v,total:y,selectedIds:b,filterParams:r,loadData:m,onSearchSubmit:h,onSortChange:K,onSelectChange:O,onBatchAction:T}=le({apiFunction:ae,idKey:"id",defaultParams:{page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}}),F=async w=>{await T(w,te)},f=B,D=I().currentRoute.value.query,k=N(f.isDialog?f.act:String(D.act)),C=N(f.isDialog?f.id:Number(D.id));return H(()=>{k.value&&(r.suppliersId=C.value),m()}),(w,a)=>{const S=i("el-button"),L=i("TigInput"),P=i("el-popconfirm"),R=i("el-space"),p=i("el-table-column"),z=i("el-avatar"),M=i("el-divider"),j=i("el-table"),$=i("a-spin");return l(),d("div",ie,[o("div",re,[o("div",de,[o("div",pe,[o("div",ce,[o("div",me,[o("div",ue,[o("div",_e,[o("div",fe,[s(L,{modelValue:e(r).keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>e(r).keyword=t),name:"keyword",placeholder:"输入员工名称",onKeyup:J(e(h),["enter"]),clearable:"",onClear:e(h)},{append:n(()=>[s(S,{onClick:e(h)},{default:n(()=>a[4]||(a[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[4]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),o("div",ge,[o("div",ve,[s(e(A),{params:{act:"add",type:k.value?k.value:"",suppliersId:C.value?C.value:0},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"添加员工",width:"800px",onOkCallback:e(m)},{default:n(()=>[s(S,{type:"primary"},{default:n(()=>a[5]||(a[5]=[u("添加员工",-1)])),_:1,__:[5]})]),_:1},8,["params","onOkCallback"])])]),o("div",ye,[o("div",be,[s(R,null,{default:n(()=>[s(P,{title:"您确认要批量删除所选数据吗？",onConfirm:a[1]||(a[1]=t=>F("del"))},{reference:n(()=>[s(S,{disabled:e(b).length===0},{default:n(()=>a[6]||(a[6]=[u("批量删除",-1)])),_:1,__:[6]},8,["disabled"])]),_:1}),e(b).length>0?(l(),d("span",he,[a[7]||(a[7]=u(" 已选择：",-1)),o("b",null,g(e(b).length),1),a[8]||(a[8]=u(" 项 ",-1))])):c("",!0)]),_:1})])])])])]),o("div",ke,[s($,{spinning:e(v)},{default:n(()=>[s(j,{data:e(q),loading:e(v),total:e(y),"row-key":"id",onSelectionChange:e(O),onSortChange:e(K)},{empty:n(()=>[o("div",De,[e(v)?c("",!0):(l(),d("div",we,"暂无数据"))])]),default:n(()=>[s(p,{type:"selection",width:"32"}),s(p,{width:"200",label:"员工名称",prop:"username"},{default:n(({row:t})=>[o("div",Ce,[e(U)(String(t.avatar))=="one"?(l(),_(z,{key:0,size:30,src:e(Z)(t.avatar)},null,8,["src"])):e(U)(String(t.avatar))=="def"?(l(),_(z,{key:1,size:30,src:e(oe)(t.avatar)},null,8,["src"])):(l(),_(z,{key:2,size:30,src:""})),o("div",null,[o("div",null,g(t.username||"-"),1),t.isAdmin==1?(l(),d("div",Se,[s(e(ne),{transparent:!0,text:"店铺管理员"})])):c("",!0)])])]),_:1}),s(p,{label:"权限组",prop:"roleName"},{default:n(({row:t})=>[t.role?(l(),d("span",{key:0,class:Q(t.role.roleName?"green":"gray")},g(t.role.roleName||"-"),3)):(l(),d("span",ze,"自定义权限"))]),_:1}),s(p,{label:"邮箱",prop:"email"},{default:n(({row:t})=>[o("span",null,g(t.email||"-"),1)]),_:1}),s(p,{label:"手机号",prop:"mobile"},{default:n(({row:t})=>{var x;return[o("span",null,[s(se,{mobile:(x=t.adminUser)==null?void 0:x.mobile},null,8,["mobile"])])]}),_:1}),s(p,{width:150,fixed:"right",label:"操作"},{default:n(({row:t})=>[s(e(A),{params:{act:"detail",id:t.id},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"编辑员工",width:"800px",onOkCallback:e(m)},{default:n(()=>a[9]||(a[9]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[9]},1032,["params","onOkCallback"]),t.adminId!=1?(l(),_(M,{key:0,direction:"vertical"})):c("",!0),t.adminId!=1?(l(),_(e(X),{key:1,params:{id:t.id},requestApi:e(ee),onAfterDelete:e(m)},{default:n(()=>a[10]||(a[10]=[u("删除 ",-1)])),_:2,__:[10]},1032,["params","requestApi","onAfterDelete"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(y)>0?(l(),d("div",xe,[s(e(Y),{page:e(r).page,"onUpdate:page":a[2]||(a[2]=t=>e(r).page=t),size:e(r).size,"onUpdate:size":a[3]||(a[3]=t=>e(r).size=t),total:e(y),onCallback:e(m)},null,8,["page","size","total","onCallback"])])):c("",!0)])])])])}}}),Ee=W(Ie,[["__scopeId","data-v-ab9dc35e"]]);export{Ee as default};
