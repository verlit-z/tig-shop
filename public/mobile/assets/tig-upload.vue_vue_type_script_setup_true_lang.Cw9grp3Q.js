import{d as e,K as a,r as t,c as s,o as u,w as l,aB as i,i as n,by as o,Q as r,a9 as c,bz as d,bA as p,L as m,aa as h,bB as f}from"./index-DE5OqlOG.js";const g=e({__name:"tig-upload",props:{count:{type:Number,default:1},modelValue:{type:String,default:""},requestUrl:{type:String,default:"user/user/uploadImg"}},emits:["update:modelValue","change"],setup(e,{emit:g}){const{t:y}=a(),b=e,S=t([]),_=g,V=()=>{o({count:b.count,success:async e=>{c({title:y("上传中...")}),e.tempFilePaths.map(e=>{d({url:f+"/api/"+b.requestUrl,filePath:e,name:"file",header:{Authorization:m("token"),Secret:p()},success:e=>{b.count>1?(S.value.push(JSON.parse(e.data).data),_("update:modelValue",S.value),h()):(r({title:y("图片上传成功")}),_("change"),h())},fail:e=>{h(),r({title:y("图片上传失败"),icon:"none"})}})})},fail:e=>{r({title:y("图片选择失败"),icon:"none"})}})};return(e,a)=>{const t=n;return u(),s(t,{style:{height:"inherit",width:"inherit"},onClick:V},{default:l(()=>[i(e.$slots,"default")]),_:3})}}});export{g as _};
