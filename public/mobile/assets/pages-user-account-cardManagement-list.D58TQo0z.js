import{d as a,K as t,r as e,U as s,l,ak as c,m as u,al as n,c as i,w as o,a9 as d,aa as f,B as r,E as _,o as m,g as p,i as y,a as g,I as v,J as x,O as k,V as b,f as h,t as T,h as $,F as w,bJ as C,n as j,ac as I,Q as N,_ as D}from"./index-DE5OqlOG.js";import{_ as J}from"./uni-icons.BITEJ68A.js";import{_ as M,a as z}from"./uni-swipe-action.BWIh5ZTG.js";import{_ as B}from"./tig-layout.fowSnIDi.js";import{c as E,e as F}from"./account.2c1rkbIz.js";const K=D(a({__name:"list",setup(a){const{t:D}=t(),K=[{title:"银行卡",accountType:1},{title:"支付宝",accountType:2},{title:"微信",accountType:3}],L=e(1),O=e(!1),Q=s({page:1,accountType:1}),U=e([]),V=async()=>{Q.page>1?O.value=!0:d({title:D("加载中")});try{const a=await E({...Q});U.value=a.records}catch(a){console.error(a.message)}finally{f(),O.value=!1}},q=()=>{j({url:"/pages/user/account/cardManagement/edit"})},A=async(a,t)=>{try{const e=await F({...a});U.value.splice(t,1),e.message&&N({title:D("操作成功"),icon:"success"})}catch(e){N({title:e.message,icon:"none",duration:1e3})}};return l(()=>{V(),c("refreshData",a=>{L.value=null==a?void 0:a.type,Q.accountType=null==a?void 0:a.type,V()})}),u(()=>{n("refreshData")}),(a,t)=>{const e=y,s=$,l=r(_("uni-icons"),J),c=r(_("uni-swipe-action-item"),M),u=r(_("uni-swipe-action"),z),n=r(_("tig-layout"),B);return m(),i(n,{title:"卡管理"},{default:o(()=>[p(e,{class:"card-main"},{default:o(()=>[p(e,{class:"head-tabs-box"},{default:o(()=>[p(e,{class:"tabs flex align-center justify-between"},{default:o(()=>[p(e,{class:"flex align-end"},{default:o(()=>[(m(),v(x,null,k(K,(t,s)=>p(e,{key:s,class:b(["tab",{active:L.value===t.accountType}]),onClick:a=>(async a=>{a!==L.value&&(L.value=a,Q.page=1,Q.accountType=a,V())})(t.accountType)},{default:o(()=>[h(T(a.$t(t.title)),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),p(e,{class:"clear-unread flex align-end",onClick:q},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("添加账号")),1)]),_:1}),p(l,{type:"auth",size:"20",color:"#999"})]),_:1})]),_:1})]),_:1}),U.value.length>0?(m(),i(e,{key:0,class:"card-list"},{default:o(()=>[p(u,null,{default:o(()=>[(m(!0),v(x,null,k(U.value,(t,l)=>(m(),i(e,{key:l,class:"move-item"},{default:o(()=>[p(c,{threshold:0,"auto-close":""},{right:o(()=>[p(e,{class:"card-move-box"},{default:o(()=>[p(e,{class:"btn-edit",onClick:a=>{return e=t.accountId,console.log(e),void j({url:`/pages/user/account/cardManagement/edit?id=${e}`});var e}},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("编辑")),1)]),_:1})]),_:2},1032,["onClick"]),p(e,{class:"btn-del",onClick:a=>((a,t)=>{I({title:D("提示"),content:D("确定删除这个账户吗？"),success:async e=>{e.confirm&&A(a,t)}})})(t,l)},{default:o(()=>[p(s,null,{default:o(()=>[h(T(a.$t("删除")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[p(e,{class:"mitem"},{default:o(()=>[p(e,{class:"card"},{default:o(()=>[p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("真实姓名")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(t.accountName),1)]),_:2},1024)]),_:2},1024),p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("身份证号码")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(w(C)(t.identity)),1)]),_:2},1024)]),_:2},1024),p(e,{class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("账户号码")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(w(C)(t.accountNo)),1)]),_:2},1024)]),_:2},1024),1===Q.accountType?(m(),i(e,{key:0,class:"txt-item"},{default:o(()=>[p(e,{class:"tit"},{default:o(()=>[h(T(a.$t("银行卡详情")),1)]),_:1}),p(e,{class:"txt"},{default:o(()=>[h(T(t.bankName),1)]),_:2},1024)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-134f49bf"]]);export{K as default};
