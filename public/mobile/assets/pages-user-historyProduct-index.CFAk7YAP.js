import{a0 as e,d as a,K as t,r as l,c as s,w as o,a9 as c,aa as u,B as r,E as d,bk as i,bK as n,o as f,g as p,a as m,i as _,I as v,J as h,O as g,W as y,f as b,t as k,N as x,X as C,b as $,F as I,G as j,h as w,Q as z,$ as S,_ as V}from"./index-DE5OqlOG.js";import{_ as F}from"./tig-image.h_tgFjnN.js";import{_ as K}from"./format-price.Cc34639m.js";import{_ as N,e as P,d as U}from"./tig-layout.fowSnIDi.js";import{_ as B}from"./tig-fixed-placeholder.OF5rBWLr.js";const E=V(a({__name:"index",setup(a){const{t:V}=t(),E=l(!0),G=l([]),H=l([]),J=l(!1),O=l(!1),Q=e=>{e.length==G.value.length?O.value=!0:O.value=!1},T=()=>{O.value?H.value=G.value.map(e=>e.productId):H.value=[]},W=async()=>{try{await(a=H.value,e({url:"user/user/delHistoryProduct",method:"post",data:{ids:a}})),z({title:V("删除成功"),icon:"none"}),X()}catch(t){console.error(t)}var a},X=async()=>{c({title:V("加载中")});try{const a=await e({url:"user/user/historyProduct",method:"get"});if(G.value=a,O.value)return void(H.value=G.value.map(e=>e.productId))}catch(a){console.error(a)}finally{u(),E.value=!1}};X();return(e,a)=>{const t=r(d("tig-image"),F),l=_,c=r(d("format-price"),K),u=r(d("up-checkbox"),i),z=r(d("up-checkbox-group"),n),V=$,X=w,q=r(d("tig-button"),P),A=r(d("tig-checkbox"),U),D=r(d("tig-fixed-placeholder"),B),L=r(d("tig-layout"),N);return f(),s(L,{title:"浏览记录"},{default:o(()=>[p(z,{modelValue:H.value,"onUpdate:modelValue":a[1]||(a[1]=e=>H.value=e),"active-color":"var(--general)",placement:"column",onChange:Q},{default:o(()=>[G.value.length>0?(f(),s(l,{key:0,class:"history-product"},{default:o(()=>[(f(!0),v(h,null,g(G.value,e=>(f(),s(l,{key:e.productId,class:"history-product-item",onClick:a=>{return t=e.productId,void S({url:"/pages/product/index?id="+t});var t}},{default:o(()=>[p(l,{class:"history-product-item-top"},{default:o(()=>[p(l,{class:"img-box"},{default:o(()=>[p(t,{src:e.picThumb,mode:"widthFix"},null,8,["src"])]),_:2},1024)]),_:2},1024),p(l,{class:"history-product-item-bottom"},{default:o(()=>[p(l,{class:"detail line2"},{default:o(()=>[b(k(e.productName),1)]),_:2},1024),p(l,{class:"price"},{default:o(()=>[p(c,{"font-style":{fontSize:"32rpx"},"currency-style":{fontSize:"22rpx"},"decimals-style":{fontSize:"25rpx"},"price-data":e.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024),y(p(l,{class:"item-btn",onClick:a[0]||(a[0]=x(()=>{},["stop"]))},{default:o(()=>[p(l,{class:"btn-box"},{default:o(()=>[p(u,{"custom-style":{border:"none"},size:"20",shape:"circle",name:e.productId},null,8,["name"])]),_:2},1024)]),_:2},1536),[[C,J.value]])]),_:2},1032,["onClick"]))),128))]),_:1})):m("",!0)]),_:1},8,["modelValue"]),E.value||0!=G.value.length?m("",!0):(f(),s(l,{key:0,class:"empty-box"},{default:o(()=>[p(l,{class:"pictrue"},{default:o(()=>[p(V,{src:I(j)("common/data_empty.png")},null,8,["src"])]),_:1}),p(l,{class:"txt"},{default:o(()=>[b(k(e.$t("暂无浏览记录！")),1)]),_:1})]),_:1})),p(D,{"background-color":"#fff"},{default:o(()=>[p(l,{class:"footer-box"},{default:o(()=>[J.value?(f(),s(l,{key:1,class:"footer-edit"},{default:o(()=>[p(l,{class:"all-check"},{default:o(()=>[p(A,{checked:O.value,"onUpdate:checked":a[3]||(a[3]=e=>O.value=e),"checked-text":e.$t("全选"),onChange:T},null,8,["checked","checked-text"])]),_:1}),p(l,{class:"edit-btn"},{default:o(()=>[p(q,{class:"btn",plain:"",onClick:a[4]||(a[4]=e=>J.value=!1)},{default:o(()=>[b(k(e.$t("取消")),1)]),_:1}),p(q,{class:"btn",disabled:!H.value.length,onClick:W},{default:o(()=>[b(k(e.$t("删除")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):(f(),s(l,{key:0,class:"footer-text"},{default:o(()=>[p(l,{class:"footer-num"},{default:o(()=>[b(k(e.$t("共")),1),p(X,{class:"num"},{default:o(()=>[b(k(G.value.length),1)]),_:1}),b(k(e.$t("件商品")),1)]),_:1}),p(l,{class:"footer-text-btn"},{default:o(()=>[p(q,{class:"btn",onClick:a[2]||(a[2]=e=>J.value=!0)},{default:o(()=>[b(k(e.$t("管理")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-3c13f6a6"]]);export{E as default};
