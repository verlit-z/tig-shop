import{d as e,r as a,l,k as t,c as s,w as i,B as u,E as o,o as n,g as d,i as r,I as c,f,t as p,J as v,F as m,Q as _,S as b,_ as y}from"./index-DE5OqlOG.js";import{_ as k}from"./uni-easyinput.Cpml7ZWU.js";import{_ as h,e as g}from"./tig-layout.fowSnIDi.js";import{V as $}from"./index.CrA6UYZE.js";import{s as x,a as j,m as U,b as q}from"./security.CquDD74n.js";import"./uni-icons.BITEJ68A.js";const C=y(e({__name:"phone",setup(e){const y=e=>{w.value=e},C=e=>{I.value=e},w=a(""),I=a(""),E=a(""),D=a(!0),M=a(!1);l(e=>{e.mobile?(M.value=!0,I.value=e.mobile):M.value=!1});const T=t(()=>!w.value||!E.value),B=e=>{_({title:e,duration:1500,icon:"none"})},F=async()=>{try{let e={mobile:I.value,code:w.value};M.value?(await U({...e}),b({url:"/pages/user/security/newPhone"})):(await q({...e}),_({title:"绑定成功",icon:"none"}),b({url:"/pages/user/index"}))}catch(e){_({title:e.message,icon:"none"})}};return(e,a)=>{const l=r,t=u(o("uni-easyinput"),k),_=u(o("tig-button"),g),b=u(o("tig-layout"),h);return n(),s(b,{title:"账户安全"},{default:i(()=>[d(l,{class:"profile-edit-main"},{default:i(()=>[d(l,{class:"profile-edit-content"},{default:i(()=>[M.value?(n(),s(l,{key:0,class:"item"},{default:i(()=>[d(l,{class:"title"},{default:i(()=>[d(l,null,{default:i(()=>[f(p(e.$t("请输入")),1)]),_:1}),d(l,{class:"info"},{default:i(()=>[f(p(I.value.replace(/(\d{2})\d*(\d{4})$/,"$1*****$2")),1)]),_:1}),d(l,null,{default:i(()=>[f(p(e.$t("收到的短信验证码")),1)]),_:1})]),_:1})]),_:1})):(n(),c(v,{key:1},[d(l,{class:"item"},{default:i(()=>[d(l,{class:"title"},{default:i(()=>[d(l,null,{default:i(()=>[f(p(e.$t("您还未绑定手机号，请输入手机号绑定")),1)]),_:1})]),_:1})]),_:1}),d(l,{class:"item special-item line"},{default:i(()=>[d(t,{"input-border":!1,value:I.value,focus:!M.value,class:"uni-input item-input",placeholder:e.$t("请输入手机号"),"primary-color":"rgb(192, 196, 204)",onInput:C},null,8,["value","focus","placeholder"])]),_:1})],64)),d(l,{class:"flex align-center"},{default:i(()=>[d(l,{class:"item line"},{default:i(()=>[d(t,{"input-border":!1,value:w.value,focus:M.value,class:"",placeholder:e.$t("手机短信验证码"),"primary-color":"rgb(192, 196, 204)",onInput:y},null,8,["value","focus","placeholder"])]),_:1}),M.value?(n(),s($,{key:0,"is-checked":D.value,"onUpdate:isChecked":a[0]||(a[0]=e=>D.value=e),mobile:I.value,"onUpdate:mobile":a[1]||(a[1]=e=>I.value=e),"verify-token-data":E.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>E.value=e),style:{height:"65rpx"},"request-api":m(x),onMobileErrorCallback:B},null,8,["is-checked","mobile","verify-token-data","request-api"])):(n(),s($,{key:1,"is-checked":D.value,"onUpdate:isChecked":a[3]||(a[3]=e=>D.value=e),mobile:I.value,"onUpdate:mobile":a[4]||(a[4]=e=>I.value=e),"verify-token-data":E.value,"onUpdate:verifyTokenData":a[5]||(a[5]=e=>E.value=e),style:{height:"65rpx"},"request-api":m(j),onMobileErrorCallback:B},null,8,["is-checked","mobile","verify-token-data","request-api"]))]),_:1}),d(l,{class:"item",style:{height:"60rpx"}},{default:i(()=>[d(_,{disabled:T.value,class:"next",onClick:F},{default:i(()=>[f(p(e.$t("下一步")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),d(l,{class:"profile-edit-content"},{default:i(()=>[d(l,{class:"btn-item"},{default:i(()=>[d(l,{class:"title"},{default:i(()=>[d(l,{class:"big-title"},{default:i(()=>[f(p(e.$t("为什么要进行身份验证"))+"？",1)]),_:1})]),_:1}),d(l,{class:"info"},{default:i(()=>[f("1. "+p(e.$t("为保障您的账户信息安全，在变更账户中的重要信息时需要进行身份验证，感谢您的理解和支持"))+"。",1)]),_:1}),d(l,{class:"info"},{default:i(()=>[f("2. "+p(e.$t("验证身份遇到问题？您可以通知我们的客服，我们将尽快联系您"))+"。",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-7bb0d7ed"]]);export{C as default};
