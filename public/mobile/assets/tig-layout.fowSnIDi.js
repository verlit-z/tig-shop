import{d as e,c as t,w as a,g as o,i as l,aB as s,a as n,H as c,V as i,o as r,f as u,t as d,_ as p,a8 as f,I as g,O as b,F as y,J as h,a6 as m,W as k,b as _,ab as v,X as S,S as x,u as B,B as w,E as C,bj as T,aV as $,k as I,bk as z,bl as L,bm as A,K as N,aw as D,j as V,r as H,s as P,L as j,h as U,n as M,Q as O,bn as X,bo as q,P as R,U as W,aM as E,bp as F,C as J,bq as G}from"./index-DE5OqlOG.js";const K=p(e({__name:"tig-navbar",props:{title:{type:String,default:""},background:{type:String,default:"#fff"},showLeft:{type:Boolean,default:!0},customBack:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},color:{type:String,default:"#000"}},emits:["back"],setup(e,{emit:p}){const f=e,g=p,b=()=>{f.customBack?g("back"):history.back()};return(p,f)=>{const g=l;return r(),t(g,{class:"tig-navbar"},{default:a(()=>[o(g,{class:i(["navbar-box",{"border-bottom":e.borderBottom}]),style:c(`background: ${e.background};`)},{default:a(()=>[o(g,{class:"navbar"},{default:a(()=>[o(g,{class:"navbar-content"},{default:a(()=>[o(g,{class:"left"},{default:a(()=>[e.showLeft?s(p.$slots,"left",{key:0},()=>[o(g,{class:"iconfont icon-houtui",onClick:b})],!0):n("",!0)]),_:3}),o(g,{class:"middle"},{default:a(()=>[s(p.$slots,"title",{},()=>[o(g,{class:"title line1",style:c(`color: ${e.color};`)},{default:a(()=>[u(d(p.$t(e.title)),1)]),_:1},8,["style"])],!0)]),_:3}),o(g,{class:"right"},{default:a(()=>[s(p.$slots,"right",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3},8,["class","style"]),o(g,{class:"placeholder"})]),_:3})}}}),[["__scopeId","data-v-f6e30575"]]),Q=p(e({__name:"tig-tabbar",props:{backgroundColor:{type:String,default:"#fff"},color:{type:String,default:"#000"},activeColor:{type:String,default:"#ea3c2d"}},setup(e){m(e=>({"3b31d980":n.backgroundColor,bba074e4:n.color,c0958430:n.activeColor}));const s=f(),n=e;return(e,n)=>{const c=_,p=l;return r(),t(p,{class:"tabbar-box"},{default:a(()=>[o(p,{class:"tabbar-container"},{default:a(()=>[o(p,{class:"tabbar"},{default:a(()=>[(r(!0),g(h,null,b(y(s).tabbarList,(l,n)=>(r(),t(p,{key:n,class:"tabbar-item",onClick:e=>((e,t)=>{s.currentActiveValue!==t&&e.link&&x({url:B(e.link)})})(l,n)},{default:a(()=>[o(p,{class:"tabbar-icon"},{default:a(()=>[k(o(c,{class:"tabbar-icon-img",src:y(v)(l.activeImage)},null,8,["src"]),[[S,y(s).currentActiveValue===n]]),k(o(c,{class:"tabbar-icon-img",src:y(v)(l.image)},null,8,["src"]),[[S,y(s).currentActiveValue!==n]])]),_:2},1024),o(p,{class:i(["tabbar-text",{active:y(s).currentActiveValue===n}])},{default:a(()=>[u(d(e.$t(l.text)),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),o(p,{class:"placeholder"})]),_:1})}}}),[["__scopeId","data-v-8377a2c8"]]),Y=p(e({__name:"tig-button",props:{shape:{type:String,default:"circle"},type:{type:String,default:"primary"},color:{type:String,default:"var(--main-bg)"},text:{type:String,default:"确定"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},plain:{type:Boolean,default:!1},loadingText:{type:String,default:""},size:{type:String,default:"normal"},customStyle:{type:Object,default:()=>({})},openType:{type:String,default:""}},emits:["click","getPhoneNumber"],setup(e,{emit:o}){const l=o,n=e=>{l("click",e)},c=e=>{l("getPhoneNumber",e)};return(o,l)=>{const i=w(C("up-button"),T);return r(),t(i,{"custom-style":e.customStyle,type:e.type,size:e.size,plain:e.plain,color:e.color,shape:e.shape,disabled:e.disabled,text:e.text,loading:e.loading,"loading-text":e.loadingText,"open-type":e.openType,onClick:n,onGetphonenumber:c},{default:a(()=>[s(o.$slots,"default",{},void 0,!0)]),_:3},8,["custom-style","type","size","plain","color","shape","disabled","text","loading","loading-text","open-type"])}}}),[["__scopeId","data-v-a9a5879c"]]),Z=p(e({__name:"tig-checkbox",props:{checkedText:{type:String,default:""},checkedSize:{type:Number,default:.8},checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},shape:{type:String,default:"circle"},size:{type:String,default:"15"}},emits:["update:checked","change"],setup(e,{emit:l}){const s=e,n=$(),c=I(()=>n.themeStyle["--general"]||"#ee0a24"),i=l,p=()=>{s.disabled||(i("update:checked",!s.checked),i("change"))};return(l,s)=>{const n=w(C("up-checkbox"),z),i=L;return r(),t(i,{class:"check",onClick:p},{default:a(()=>[o(n,{shape:e.shape,"used-alone":!0,disabled:e.disabled,"active-color":c.value,checked:e.checked,size:e.size,onChange:p},null,8,["shape","disabled","active-color","checked","size"]),u(" "+d(e.checkedText),1)]),_:1})}}}),[["__scopeId","data-v-faa6bfc6"]]),ee=p(e({__name:"tig-popup",props:{show:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},position:{type:String,default:"bottom"},round:{type:[String,Number],default:10},backgroundColor:{type:String,default:"#fff"},customStyle:{type:Object,default:()=>({})},maskClick:{type:Boolean,default:!0},zIndex:{type:Number,default:201},height:{type:String,default:"50vh"}},emits:["update:show","change","handleShade","close"],setup(e,{emit:o}){const l=e,n=o,c=I({get:()=>l.show,set(e){n("update:show",e)}}),i=()=>{n("close"),n("update:show",!1)};return(o,l)=>{const n=w(C("up-popup"),A);return r(),t(n,{show:c.value,"onUpdate:show":l[0]||(l[0]=e=>c.value=e),"close-on-click-overlay":e.maskClick,overlay:e.overlay,mode:e.position,round:e.round,"bg-color":e.backgroundColor,"custom-style":{...e.customStyle},"z-index":e.zIndex,"safe-area-inset-top":!1,"safe-area-inset-bottom":!1,closeable:e.showClose,onClose:i},{default:a(()=>[s(o.$slots,"default",{},void 0,!0)]),_:3},8,["show","close-on-click-overlay","overlay","mode","round","bg-color","custom-style","z-index","closeable"])}}}),[["__scopeId","data-v-780a5652"]]),te=p(e({__name:"tig-wechart-login",emits:["loginSuccess"],setup(e,{emit:s}){const{t:c}=N(),i=s,p=D(),f=V(),g=I({get:()=>!!p.authType,set(e){p.setAuthType("")}}),b=H(!1),y=H(!1),h=()=>{M({url:"/pages/login/mallAgreement"})},m=()=>{if(!b.value)return O({title:c("请先同意用户协议"),duration:1500,icon:"none"})},k=async()=>{const e=await X({url:location.origin+location.pathname});window.location.href=e.url},_=e=>{p.setAuthType(""),M({url:`/pages/login/index?loginType=${e}`})},v=()=>{p.setAuthType("")};return P(()=>{if("wechat"===f.XClientType&&!j("token")){const e=(e=>{const t={},a=e.split("?")[1];return a&&a.split("&").forEach(e=>{const[a,o]=e.split("=");t[a]=o}),t})(location.href);e.code&&e.code.length>12&&(async e=>{const t=await q({code:e});1==t.type&&(p.setToken(t.token),await p.getUserInfo(),i("loginSuccess"),p.setAuthType("")),2==t.type&&1===f.wechatRegisterBindPhone&&(R("openData",t.openData),M({url:"/pages/user/bindMobilePhone/index"}))})(e.code)}}),(e,s)=>{const c=w(C("tig-button"),Y),i=w(C("tig-checkbox"),Z),p=U,f=l,S=w(C("tig-popup"),ee);return r(),t(S,{show:g.value,"onUpdate:show":s[4]||(s[4]=e=>g.value=e),"z-index":1e3,onClose:v},{default:a(()=>[g.value?(r(),t(f,{key:0,class:"wechart-login-content"},{default:a(()=>[o(f,{class:"wechart-login-box"},{default:a(()=>[b.value?(r(),t(c,{key:0,"custom-style":{"border-radius":"20rpx",height:"95rpx"},shape:"square",loading:y.value,onClick:k},{default:a(()=>[u(d(e.$t("微信授权")),1)]),_:1},8,["loading"])):(r(),t(c,{key:1,"custom-style":{"border-radius":"20rpx",height:"95rpx"},shape:"square",onClick:m},{default:a(()=>[u(d(e.$t("微信授权")),1)]),_:1})),o(f,{class:"rule-text"},{default:a(()=>[o(i,{checked:b.value,"onUpdate:checked":s[0]||(s[0]=e=>b.value=e)},null,8,["checked"]),o(f,{class:"rule-xieyi"},{default:a(()=>[o(p,{onClick:s[1]||(s[1]=e=>b.value=!b.value)},{default:a(()=>[u(d(e.$t("登录即为同意")),1)]),_:1}),o(p,{class:"special-color",onClick:h},{default:a(()=>[u(d(e.$t("《商城用户服务协议》")),1)]),_:1})]),_:1})]),_:1}),o(f,{class:"other-login"},{default:a(()=>[o(f,{class:"mobile-login",onClick:s[2]||(s[2]=e=>_("mobile"))},{default:a(()=>[u(d(e.$t("手机登录")),1)]),_:1}),o(f,{class:"account-login",onClick:s[3]||(s[3]=e=>_("password"))},{default:a(()=>[u(d(e.$t("账号登录")),1)]),_:1})]),_:1})]),_:1})]),_:1})):n("",!0)]),_:1},8,["show"])}}}),[["__scopeId","data-v-a38e11af"]]),ae=e({__name:"tig-statistic-log",props:{productId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0}},setup(e,{expose:t}){const a=e,o=W({}),l=async()=>{a.productId&&(o.productId=a.productId);try{await F(o)}catch(e){console.error(e)}},s=I(()=>{const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`});return(()=>{const e=j("lastDate");!e||((e,t)=>{const a=new Date(e),o=new Date(t);return Math.abs(a.getTime()-o.getTime())>=864e5})(s.value,e)?(o.isNew=1,R("untranslatedCache",JSON.stringify([]))):o.click=1,R("lastDate",s.value)})(),E(()=>{a.immediateLog&&l()}),t({__commonLog:l}),(e,t)=>(r(),g("div"))}});function oe(e){const t=H(0);return e&&"function"==typeof e?e(e=>{t.value=e.scrollTop}):J(e=>{t.value=e.scrollTop}),{scrollTop:t}}function le(){const e=V(),{top:t,bottom:a}=G(e.safeAreaInsets);return{saveTop:t,safeBottom:a}}function se(e=0){const t=H(e),a=H("100%"),o=H(0),{saveTop:l}=le();return function(){const e=V(),{left:t,right:a,top:o,height:l}=G(e.menuButtonInfo)}(),o.value=l.value+t.value,{height:o,contentHeight:t,contentWidth:a,statusBarHeight:l}}const ne=p(e({__name:"tig-layout",props:{needSafeTop:{type:Boolean,default:!1},needSafeBottom:{type:Boolean,default:!0},safeTopBgColor:{type:String,default:"#fff"},productId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0},title:{type:String,default:""},customBack:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},background:{type:String,default:"#fff"},color:{type:String,default:"#000"}},emits:["loginSuccess","back"],setup(e,{expose:i,emit:u}){m(e=>({"1facfc4b":d.safeTopBgColor}));const d=e,p=u,g=f(),b=V(),h=$();b.setH5Title();const{safeBottom:_}=le(),{height:v}=se(),x=I(()=>({...h.themeStyle,"--tabbar-height":g.tabbarHeight,"--safe-bottom":`${_.value}px`,"--safe-top":`${v.value}px`,"--nav-height":`${b.navHeight}rpx`})),B=H();return i({handleLog:()=>{var e;null==(e=B.value)||e.__commonLog()}}),(i,u)=>{const d=l,f=w(C("tig-navbar"),K),h=w(C("tig-tabbar"),Q),m=w(C("tig-wechart-login"),te),_=w(C("tig-statistic-log"),ae);return r(),t(d,{class:"layout",style:c({...x.value})},{default:a(()=>[e.needSafeTop?(r(),t(d,{key:0,class:"safe-top-box"})):n("",!0),e.title?(r(),t(f,{key:1,title:e.title,"border-bottom":e.borderBottom,background:e.background,color:e.color,"custom-back":e.customBack,onBack:u[0]||(u[0]=e=>p("back"))},null,8,["title","border-bottom","background","color","custom-back"])):n("",!0),s(i.$slots,"default",{},void 0,!0),-1===y(g).currentActiveValue&&e.needSafeBottom?(r(),t(d,{key:2,class:"layout-safe-bottom"})):n("",!0),k(o(d,null,{default:a(()=>[o(h)]),_:1},512),[[S,y(g).currentActiveValue>-1]]),"miniProgram"!==y(b).XClientType&&"wechat"!==y(b).XClientType||1!==y(b).openWechatRegister?n("",!0):(r(),t(m,{key:3,onLoginSuccess:u[1]||(u[1]=e=>i.$emit("loginSuccess"))})),o(_,{ref_key:"statisticLogRef",ref:B,"immediate-log":e.immediateLog,"product-id":e.productId},null,8,["immediate-log","product-id"])]),_:3},8,["style"])}}}),[["__scopeId","data-v-79a64a74"]]);export{ne as _,le as a,ee as b,K as c,Z as d,Y as e,oe as u};
