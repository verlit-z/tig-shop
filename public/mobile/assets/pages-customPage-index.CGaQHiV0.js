import{d as a,j as e,r as s,l as t,p as l,q as o,s as u,v as r,y as i,z as n,c,w as p,A as m,B as d,E as v,D as _,o as y,g as f,i as g,b as j,F as x,G as b,I as h,a as w,J as k,_ as I}from"./index-DE5OqlOG.js";import{_ as T}from"./tig-back-top.vue_vue_type_script_setup_true_lang.Dshf9tCI.js";import{u as L,_ as z}from"./tig-layout.fowSnIDi.js";import{g as F,a as G}from"./home.BpN6fEIn.js";import{u as q,m as A}from"./index.BX1bLnkO.js";import{m as B}from"./masonry.CqYTyCF5.js";import"./tig-image.h_tgFjnN.js";import"./format-price.Cc34639m.js";import"./tig-countdown.vue_vue_type_script_setup_true_lang.Bay3baQr.js";import"./specification.BJJ9B7ka.js";import"./uni-icons.BITEJ68A.js";import"./uni-number-box.JWQxtRhY.js";import"./product.xxdbZFp6.js";import"./activityCard.mdMMZqu3.js";const C=I(a({__name:"index",setup(a){const{scrollTop:I}=L(),C=e(),D=s(0),E=s(!1),J=s([]),$=s(0),H=s(1),K=s(!1),M=s(!0),N=s([]),O=a=>{$.value=a,0!==$.value&&(H.value=1,K.value=!1,N.value=[],P())},P=async()=>{M.value=!0;try{const a=await F({categoryId:$.value,page:H.value});a.records&&a.records.length>0?(N.value=[...N.value,...a.records],K.value=!1):K.value=!0}catch(a){console.error(a)}finally{M.value=!1}},Q=async a=>{E.value=!0;try{const e=await G(a);J.value=e.moduleList,D.value=1,m()}catch(e){console.error(e)}finally{E.value=!1}};t(a=>{a&&a.id&&Q(a.id),R.reset()});const R=q();return l(()=>{$.value=0,R.reset(),Q()}),o(()=>{$.value>0&&!E.value&&!K.value&&(H.value++,P())}),u(()=>{I.value>0&&setTimeout(()=>{r({scrollTop:I.value,duration:0})},50)}),i(a=>({title:C.baseInfo.shopTitle})),n(()=>({title:C.baseInfo.shopTitle})),(a,e)=>{const s=j,t=g,l=d(v("up-empty"),_),o=d(v("tig-back-top"),T),u=d(v("tig-layout"),z);return y(),c(u,null,{default:p(()=>[f(t,null,{default:p(()=>[E.value?(y(),c(t,{key:0,class:"index_empty"},{default:p(()=>[f(s,{"lazy-load":"",src:x(b)("common/index_empty.png"),mode:"widthFix"},null,8,["src"])]),_:1})):(y(),c(t,{key:1,class:"index"},{default:p(()=>[f(t,{class:"decorate-page-window"},{default:p(()=>[f(A,{modules:J.value,"scroll-top":x(I),onLoadGoodsList:O},null,8,["modules","scroll-top"]),$.value>0&&N.value.length>0?(y(),h(k,{key:0},[f(B,{"commodity-list":N.value},null,8,["commodity-list"]),M.value||0!==N.value.length?w("",!0):(y(),c(t,{key:0,class:"empty-box"},{default:p(()=>[f(l,{icon:x(b)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))],64)):w("",!0)]),_:1})]),_:1})),f(o,{"scroll-top":x(I)},null,8,["scroll-top"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-e63d53e8"]]);export{C as default};
