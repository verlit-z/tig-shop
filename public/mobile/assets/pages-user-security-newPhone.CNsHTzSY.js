import{d as e,K as a,r as t,k as l,c as s,w as i,B as o,E as n,o as u,g as r,i as c,F as d,f as p,t as m,Q as f,$ as v,_}from"./index-DE5OqlOG.js";import{_ as b}from"./uni-easyinput.Cpml7ZWU.js";import{_ as y,e as h}from"./tig-layout.fowSnIDi.js";import{V as g}from"./index.CrA6UYZE.js";import{a as k,b as x}from"./security.CquDD74n.js";import"./uni-icons.BITEJ68A.js";const j=_(e({__name:"newPhone",setup(e){const{t:_}=a(),j=e=>{q.value=e},$=e=>{w.value=e},q=t(""),w=t(""),C=t(""),I=t(!0),U=l(()=>!w.value||!q.value),E=e=>{f({title:e,duration:1500,icon:"none"})},K=async()=>{try{let e={mobile:w.value,code:q.value};await x({...e}),f({title:_("修改成功"),icon:"none"}),setTimeout(()=>{v({url:"/pages/user/profile/index"})},1e3)}catch(e){e.message&&f({title:e.message,icon:"none"})}};return(e,a)=>{const t=o(n("uni-easyinput"),b),l=c,f=o(n("tig-button"),h),v=o(n("tig-layout"),y);return u(),s(v,{title:"账户安全"},{default:i(()=>[r(l,{class:"profile-edit-main"},{default:i(()=>[r(l,{class:"profile-edit-content"},{default:i(()=>[r(l,{class:"item input"},{default:i(()=>[r(t,{"input-border":!1,value:w.value,class:"uni-input item-input",placeholder:e.$t("请输入新手机号"),"primary-color":"rgb(192, 196, 204)",onInput:$},null,8,["value","placeholder"])]),_:1}),r(l,{class:"flex align-center"},{default:i(()=>[r(l,{class:"item line"},{default:i(()=>[r(t,{"input-border":!1,value:q.value,class:"uni-input item-input",focus:"",placeholder:e.$t("新手机短信验证码"),"primary-color":"rgb(192, 196, 204)",onInput:j},null,8,["value","placeholder"])]),_:1}),r(g,{"is-checked":I.value,"onUpdate:isChecked":a[0]||(a[0]=e=>I.value=e),mobile:w.value,"onUpdate:mobile":a[1]||(a[1]=e=>w.value=e),"verify-token-data":C.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>C.value=e),style:{height:"65rpx"},"request-api":d(k),onMobileErrorCallback:E},null,8,["is-checked","mobile","verify-token-data","request-api"])]),_:1}),r(l,{class:"item",style:{height:"60rpx"}},{default:i(()=>[r(f,{disabled:U.value,class:"next",onClick:K},{default:i(()=>[p(m(e.$t("提交")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-29c28162"]]);export{j as default};
