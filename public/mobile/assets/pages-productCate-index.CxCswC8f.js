import{c as e,_ as a,b as t}from"./tig-layout.fowSnIDi.js";import{a0 as l,d as c,a1 as s,r as o,B as u,E as r,c as n,o as d,i,w as p,g as m,a as y,N as f,h as g,f as _,t as v,I as h,V as I,O as k,J as b,a2 as w,n as C,_ as x,a3 as S,a4 as N,Z as j,K as $,k as L,a5 as M,a6 as U,U as z,D as B,F as P,G as T,S as V,a7 as D,j as K,a8 as R,l as A}from"./index-DE5OqlOG.js";import{_ as E}from"./tig-image.h_tgFjnN.js";import{m as F,_ as O}from"./masonry.CqYTyCF5.js";import{g as W}from"./home.BpN6fEIn.js";import{u as q}from"./useList.B4FtGhCx.js";import{_ as G}from"./format-price.Cc34639m.js";import{s as H}from"./specification.BJJ9B7ka.js";import"./activityCard.mdMMZqu3.js";import"./product.xxdbZFp6.js";import"./uni-icons.BITEJ68A.js";import"./uni-number-box.JWQxtRhY.js";const J=e=>l({url:"category/category/list?id="+e,method:"get",cancelPrevious:!0,requestKey:"categoryList"}),Z=x(c({__name:"styleOneCate",props:{catId:{type:Number,default:0},catIdModifiers:{}},emits:["update:catId"],setup(t){const c=s(t,"catId"),x=o([]),S=o([]),N=o([]),j=o(!1),$=o(!0),L=o(0),M=()=>{C({url:"/pages/search/index"})},U=(e,a)=>{c.value=e,a&&(S.value=a.children)};return(async()=>{j.value=!0;try{const e=await l({url:"category/category/all",method:"get"});x.value=e||[]}catch(e){console.error(e)}})(),(async()=>{try{const e=await l({url:"category/category/hot",method:"get"});N.value=e||[],$.value=!1}catch(e){console.error(e)}})(),(t,l)=>{const s=u(r("tig-navbar"),e),o=i,C=g,z=u(r("tig-image"),E),B=w,P=u(r("tig-layout"),a);return d(),n(o,null,{default:p(()=>[m(P,null,{default:p(()=>[m(s,{"show-left":!1,title:"产品分类"}),$.value||!j.value?(d(),n(o,{key:0,class:"page-loading"},{default:p(()=>[m(o,{class:"ico"})]),_:1})):y("",!0),j.value?(d(),n(o,{key:1,class:"pageMain"},{default:p(()=>[0==L.value?(d(),n(o,{key:0,class:"productSort"},{default:p(()=>[m(o,{class:"header acea-row row-center-wrapper"},{default:p(()=>[m(o,{class:"acea-row row-between-wrapper input",onClick:f(M,["stop"])},{default:p(()=>[m(C,{class:"iconfont-h5 icon-sousuo"}),m(o,{class:"txt"},{default:p(()=>[_(v(t.$t("点击搜索商品信息")),1)]),_:1})]),_:1})]),_:1}),m(o,{class:"aside"},{default:p(()=>[m(o,{class:I("item acea-row row-center-wrapper "+(0==c.value?"on":"")),onClick:l[0]||(l[0]=e=>U(0))},{default:p(()=>[m(C,null,{default:p(()=>[_(v(t.$t("推荐")),1)]),_:1})]),_:1},8,["class"]),(d(!0),h(b,null,k(x.value,(e,a)=>(d(),n(o,{key:a,class:I("item acea-row row-center-wrapper "+(c.value==e.categoryId?"on":"")),"data-cat_id":e.categoryId,onClick:a=>U(e.categoryId,e)},{default:p(()=>[e.catShortName?(d(),n(C,{key:0},{default:p(()=>[_(v(e.catShortName),1)]),_:2},1024)):(d(),n(C,{key:1},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024))]),_:2},1032,["class","data-cat_id","onClick"]))),128))]),_:1}),m(o,{class:"conter"},{default:p(()=>[$.value?y("",!0):(d(),h(b,{key:0},[0==c.value?(d(),n(o,{key:0,class:"listw"},{default:p(()=>[m(o,{class:"title acea-row row-center-wrapper"},{default:p(()=>[m(o,{class:"name"},{default:p(()=>[_(v(t.$t("热门分类")),1)]),_:1})]),_:1}),m(o,{class:"list acea-row"},{default:p(()=>[(d(!0),h(b,null,k(N.value,(e,a)=>(d(),n(B,{key:a,"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p(()=>[m(o,{class:"picture"},{default:p(()=>[m(z,{src:e.categoryPic,mode:"aspectFill"},null,8,["src"])]),_:2},1024),m(o,{class:"name line1"},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024)]),_:2},1032,["url"]))),128))]),_:1})]),_:1})):y("",!0),c.value>0?(d(!0),h(b,{key:1},k(S.value,(e,a)=>(d(),n(o,{id:"b"+a,key:a,class:"listw"},{default:p(()=>[m(o,{class:"title acea-row row-center-wrapper"},{default:p(()=>[m(B,{"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p(()=>[m(o,{class:"name"},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024)]),_:2},1032,["url"])]),_:2},1024),m(o,{class:"list acea-row"},{default:p(()=>[(d(!0),h(b,null,k(e.children,(e,a)=>(d(),n(B,{key:a,"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p(()=>[e.categoryPic?(d(),n(o,{key:0,class:"picture"},{default:p(()=>[m(z,{src:e.categoryPic},null,8,["src"])]),_:2},1024)):y("",!0),m(o,{class:"name line1"},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1024)]),_:2},1032,["url"]))),128))]),_:2},1024)]),_:2},1032,["id"]))),128)):y("",!0)],64))]),_:1})]),_:1})):y("",!0)]),_:1})):y("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-2f8e92c6"]]),Q=x(c({__name:"search",props:{placeholder:{type:String,default:"搜索商品"},needMenu:{type:Boolean,default:!1}},emits:["menu","search"],setup:(e,{emit:a})=>(a,t)=>{const l=g,c=i;return d(),n(c,{class:"search-box"},{default:p(()=>[e.needMenu?(d(),n(c,{key:0,class:"btn-box",onClick:t[0]||(t[0]=e=>a.$emit("menu"))},{default:p(()=>[m(l,{class:"iconfont-h5 icon-shouye"})]),_:1})):y("",!0),m(c,{class:"search-content",onClick:t[1]||(t[1]=e=>a.$emit("search"))},{default:p(()=>[m(l,{class:"iconfont-h5 icon-sousuo1"}),m(l,{class:"placeholder-text"},{default:p(()=>[_(v(a.$t(e.placeholder)),1)]),_:1})]),_:1})]),_:1})}}),[["__scopeId","data-v-28caa3a7"]]),X=x(c({__name:"menu",props:{currentCateId:{},currentCateIdModifiers:{}},emits:S(["change"],["update:currentCateId"]),setup(e,{emit:a}){const t=s(e,"currentCateId"),l=a,c=N([]);(async()=>{try{const e=await J(0);c.value=e,t.value=e[0].categoryId}catch(e){console.error(e)}})();return(e,a)=>{const s=i,o=j;return d(),n(s,{class:"menu-content"},{default:p(()=>[m(o,{"scroll-y":"true",class:"menu-scroll"},{default:p(()=>[(d(!0),h(b,null,k(c.value,(e,a)=>(d(),n(s,{key:e.categoryId,class:I(["menu-item",{active:t.value===e.categoryId}]),onClick:a=>{var c;(c=e.categoryId)!==t.value&&(t.value=c,l("change",c))}},{default:p(()=>[_(v(e.categoryName),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})}}}),[["__scopeId","data-v-b316dbf5"]]),Y=x(c({__name:"selectCate",props:S({currentCateId:{type:Number},type:{type:String,default:""}},{subCurrentCateId:{default:0},subCurrentCateIdModifiers:{},menuList:{default:[]},menuListModifiers:{}}),emits:S(["change"],["update:subCurrentCateId","update:menuList"]),setup(e,{emit:a}){const{t:l}=$(),c=e,f=a,w=s(e,"subCurrentCateId"),C=o(0),x=s(e,"menuList"),S=e=>{e!==w.value&&(w.value=e,f("change"))},N=e=>{C.value=e.detail.scrollLeft},U=()=>{x.value.length&&(B.value=!0)},z=L(()=>{var e;return null==(e=x.value.find(e=>e.categoryId===w.value))?void 0:e.categoryName});M(()=>c.currentCateId,async e=>{e&&e>0&&await(async e=>{try{const a=await J(e);x.value=[{categoryId:0,categoryName:l("全部商品")},...a],f("change"),C.value=0}catch(a){console.error(a)}})(e)});const B=o(!1);return(a,l)=>{const c=i,s=j,o=g,f=u(r("tig-popup"),t);return d(),n(c,{class:I(["cate-box",{main:"main"===e.type}])},{default:p(()=>[m(s,{"scroll-x":!0,class:"cate-scroll","scroll-with-animation":!0,"scroll-left":C.value,onScroll:N},{default:p(()=>[(d(!0),h(b,null,k(x.value,a=>(d(),h(b,{key:a.categoryId},[a.categoryName?(d(),n(c,{key:0,class:"cate-item",onClick:e=>S(a.categoryId)},{default:p(()=>[m(c,{class:I(["item-text",{active:a.categoryId===w.value,main:"main"===e.type}])},{default:p(()=>[_(v(a.categoryName),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"])):y("",!0)],64))),128))]),_:1},8,["scroll-left"]),m(c,{class:"cate-btn",onClick:U},{default:p(()=>[m(o,{class:I(["iconfont-h5 icon-xiajiantou",{"icon-xiajiantou1-copy":"main"===e.type}])},null,8,["class"])]),_:1}),m(f,{show:B.value,"onUpdate:show":l[1]||(l[1]=e=>B.value=e),position:"top","z-index":999,"show-close":!1,"background-color":"#fff"},{default:p(()=>[m(c,{class:"cate-popup"},{default:p(()=>[m(c,{class:"cate-popup-title"},{default:p(()=>[_(v(z.value),1)]),_:1}),m(c,{class:"cate-popup-list-box"},{default:p(()=>[m(c,{class:"cate-popup-list"},{default:p(()=>[(d(!0),h(b,null,k(x.value,a=>(d(),n(c,{key:a.categoryId,class:"list-item popup-item",onClick:e=>S(a.categoryId)},{default:p(()=>[m(c,{class:I(["item-text popup-text line1",{active:a.categoryId===w.value,main:"main"===e.type}])},{default:p(()=>[_(v(a.categoryName),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),m(c,{class:"cate-popup-close",onClick:l[0]||(l[0]=e=>B.value=!1)},{default:p(()=>[_(v(a.$t("点击收起")),1),m(o,{class:"iconfont-h5 icon-xiajiantou1-copy"})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1},8,["class"])}}}),[["__scopeId","data-v-876f74d1"]]),ee=x(c({__name:"styleTwoCate",props:{height:{type:[Number,String],default:0}},setup(a){U(e=>({eee353dc:x.value}));const t=o(0),l=o(0),c=o([]),s=a,f=z({categoryId:0,page:1,size:10}),{data:g,getList:_,reachBottom:v,isLoading:h,total:I}=q(W,{params:f,path:{dataKey:"records"},needReachBottom:!1}),k=()=>{g.value=[],f.page=1,0===l.value?f.categoryId=t.value:f.categoryId=l.value,_()},b=()=>{l.value=0,g.value=[],c.value=[],f.page=1},w=()=>{V({url:"/pages/index/index",success:function(){}})},C=()=>{V({url:"/pages/search/index"})},x=L(()=>`calc(${s.height} - 90rpx)`);return(a,s)=>{const o=u(r("tig-navbar"),e),f=i,_=j,x=u(r("up-empty"),B);return d(),n(f,null,{default:p(()=>[m(o,{title:"产品分类","show-left":!1}),m(Q,{needMenu:!0,onMenu:w,onSearch:C}),m(f,{class:"scroll-box"},{default:p(()=>[m(f,{class:"content-box"},{default:p(()=>[m(f,{class:"side"},{default:p(()=>[m(X,{"current-cate-id":t.value,"onUpdate:currentCateId":s[0]||(s[0]=e=>t.value=e),onChange:b},null,8,["current-cate-id"])]),_:1}),m(f,{class:"list-box"},{default:p(()=>[m(Y,{"menu-list":c.value,"onUpdate:menuList":s[1]||(s[1]=e=>c.value=e),"sub-current-cate-id":l.value,"onUpdate:subCurrentCateId":s[2]||(s[2]=e=>l.value=e),"current-cate-id":t.value,onChange:k},null,8,["menu-list","sub-current-cate-id","current-cate-id"]),m(f,{class:"list-content"},{default:p(()=>[!P(h)&&P(I)>0?(d(),n(_,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:P(v)},{default:p(()=>[m(F,{"commodity-list":P(g)},null,8,["commodity-list"])]),_:1},8,["onScrolltolower"])):y("",!0),P(h)||0!==P(I)?y("",!0):(d(),n(f,{key:1,class:"empty-box"},{default:p(()=>[m(x,{icon:P(T)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5eb97ebb"]]),ae=x(c({__name:"styleThreeCate",props:{height:{type:[Number,String],default:0}},setup(a){U(e=>({"189e264c":ee.value}));const t=o(0),l=o(0),c=o([]),s=a,f=z({categoryId:0,page:1,size:10}),{data:I,getList:w,reachBottom:C,isLoading:x,total:S}=q(W,{params:f,path:{dataKey:"records"},needReachBottom:!1}),N=()=>{I.value=[],f.page=1,0===l.value?f.categoryId=t.value:f.categoryId=l.value,w()},$=()=>{l.value=0,I.value=[],c.value=[],f.page=1},M=()=>{V({url:"/pages/index/index"})},K=()=>{V({url:"/pages/search/index"})},R=e=>{V({url:`/pages/product/index?id=${e}`})},A=o(0),E=o(),F=o({}),J=()=>{E.value.handleShowPopup(),F.value.isCheck=!1},Z=()=>{A.value=0},ee=L(()=>`calc(${s.height} - 90rpx)`);return(a,s)=>{const o=u(r("tig-navbar"),e),f=i,w=u(r("tig-lazy-image"),O),L=u(r("format-price"),G),U=u(r("up-loading-icon"),D),z=g,V=j,W=u(r("up-empty"),B);return d(),n(f,null,{default:p(()=>[m(o,{title:"产品分类","show-left":!1}),m(Q,{needMenu:!0,onMenu:M,onSearch:K}),m(f,{class:"scroll-box"},{default:p(()=>[m(f,{class:"content-box"},{default:p(()=>[m(f,{class:"side"},{default:p(()=>[m(X,{"current-cate-id":t.value,"onUpdate:currentCateId":s[0]||(s[0]=e=>t.value=e),onChange:$},null,8,["current-cate-id"])]),_:1}),m(f,{class:"list-box"},{default:p(()=>[m(Y,{"menu-list":c.value,"onUpdate:menuList":s[1]||(s[1]=e=>c.value=e),"sub-current-cate-id":l.value,"onUpdate:subCurrentCateId":s[2]||(s[2]=e=>l.value=e),type:"main","current-cate-id":t.value,onChange:N},null,8,["menu-list","sub-current-cate-id","current-cate-id"]),m(f,{class:"list-content"},{default:p(()=>[!P(x)&&P(S)>0?(d(),n(V,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:P(C)},{default:p(()=>[m(f,{class:"product-list"},{default:p(()=>[(d(!0),h(b,null,k(P(I),e=>(d(),n(f,{key:e.productId,class:"product-item"},{default:p(()=>[m(f,{class:"item-left",onClick:a=>R(e.productId)},{default:p(()=>[m(w,{src:e.picThumb},null,8,["src"]),0==e.productStock||0==e.productStatus?(d(),n(f,{key:0,class:"product-status-box"},{default:p(()=>[m(f,{class:"outsale"},{default:p(()=>[_(v(a.$t(0==e.productStock?"已售罄":"已下架")),1)]),_:2},1024)]),_:2},1024)):y("",!0)]),_:2},1032,["onClick"]),m(f,{class:"item-right"},{default:p(()=>[m(f,{class:"item-right-title line2",onClick:a=>R(e.productId)},{default:p(()=>[_(v(e.productName),1)]),_:2},1032,["onClick"]),m(f,{class:"item-right-price"},{default:p(()=>[m(L,{"decimals-style":{fontSize:"24rpx",fontWeight:"bold"},"currency-style":{fontSize:"23rpx",fontWeight:"bold"},"font-style":{fontSize:"32rpx"},"price-data":e.productPrice},null,8,["price-data"])]),_:2},1024),m(f,{class:"buy_icon"},{default:p(()=>[m(f,{class:"buy_btn",onClick:a=>(e=>{e.isCheck||(A.value=e.productId,e.isCheck=!0,F.value=e)})(e)},{default:p(()=>[e.isCheck?(d(),n(U,{key:0,mode:"circle"})):(d(),n(z,{key:1,class:"iconfont-h5 icon-gouwuche3 buy_btn_icon"}))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["onScrolltolower"])):y("",!0),P(x)||0!==P(S)?y("",!0):(d(),n(f,{key:1,class:"empty-box"},{default:p(()=>[m(W,{icon:P(T)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),m(H,{ref_key:"specificationRef",ref:E,modelValue:A.value,"onUpdate:modelValue":s[3]||(s[3]=e=>A.value=e),onAddCardSucceed:s[4]||(s[4]=()=>{}),onLoadEnd:J,onClose:Z},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-18329a6e"]]),te=x(c({__name:"index",setup(e){const t=K(),l=R(),c=o(0);A(e=>{e&&e.categoryId&&(c.value=e.categoryId)});const s=L(()=>`calc(${t.windowInfo.screenHeight}px - var(${l.currentActiveValue>-1?"--tabbar-height":"--safe-bottom"}) - var(--nav-height))`);return(e,l)=>{const o=u(r("tig-layout"),a);return d(),n(o,null,{default:p(()=>[1===P(t).categoryDecorateType?(d(),n(Z,{key:0,"cat-id":c.value,"onUpdate:catId":l[0]||(l[0]=e=>c.value=e)},null,8,["cat-id"])):y("",!0),2===P(t).categoryDecorateType?(d(),n(ee,{key:1,height:s.value},null,8,["height"])):y("",!0),3===P(t).categoryDecorateType?(d(),n(ae,{key:2,height:s.value},null,8,["height"])):y("",!0)]),_:1})}}}),[["__scopeId","data-v-47cfc7ed"]]);export{te as default};
