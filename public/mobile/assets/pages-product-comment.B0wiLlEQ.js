import{d as a,K as l,r as e,l as s,q as t,m as u,b3 as n,c as o,w as c,a9 as i,Q as r,aa as d,B as f,E as m,o as v,g as _,a as g,i as p,I as y,J as b,O as k,b as x,F as h,ab as j,h as w,f as T,t as z,G as C,aT as F,_ as I}from"./index-DE5OqlOG.js";import{_ as q}from"./uni-rate.BV8u_wWd.js";import{_ as B}from"./tig-layout.fowSnIDi.js";import{b as E}from"./product.xxdbZFp6.js";import"./uni-icons.BITEJ68A.js";const G=I(a({__name:"comment",setup(a){const{t:I}=l(),G=e(!1),J=e([]),K=e(1),L=e(10),M=e(0),O=e(!1),P=async()=>{K.value>1&&(O.value=!0),i({title:I("加载中")});try{const a=await E(Q.value,{type:1,size:L.value,page:K.value});J.value=[...J.value,...a.records],M.value=a.total}catch(a){r({title:a.message,icon:"none"})}finally{O.value=!1,d()}},Q=e("");return s(a=>{if(a){const{id:l}=a;l&&(Q.value=l,P())}}),t(()=>{K.value<Math.ceil(M.value/L.value)&&(K.value++,P())}),u(()=>{n()}),(a,l)=>{const e=x,s=p,t=w,u=f(m("uni-rate"),q),n=f(m("tig-layout"),B);return v(),o(n,{title:"商品评价"},{default:c(()=>[_(s,{class:"product-comment-card"},{default:c(()=>[(v(!0),y(b,null,k(J.value,(a,l)=>(v(),o(s,{key:l,class:"comment-item"},{default:c(()=>[_(s,{class:"user-info flex justify-between align-center"},{default:c(()=>[_(s,{class:"user-name flex align-center"},{default:c(()=>[_(s,{class:"head_logo"},{default:c(()=>[_(e,{src:h(j)((null==a?void 0:a.avatar)||"")},null,8,["src"])]),_:2},1024),_(s,null,{default:c(()=>[_(t,null,{default:c(()=>[T(z(a.username),1)]),_:2},1024),_(u,{value:a.commentRank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])]),_:2},1024)]),_:2},1024),_(s,{class:"time"},{default:c(()=>[T(z(a.addTime),1)]),_:2},1024)]),_:2},1024),_(s,{class:"tags flex-wrap"},{default:c(()=>[(v(!0),y(b,null,k(a.commentTag,(a,l)=>(v(),o(s,{key:l,class:"tag"},{default:c(()=>[T(z(a),1)]),_:2},1024))),128))]),_:2},1024),_(s,{class:"user-content"},{default:c(()=>[T(z(a.content),1)]),_:2},1024),_(s,{class:"user-imgs flex-wrap align-center"},{default:c(()=>[(v(!0),y(b,null,k(a.showPics,(a,l)=>(v(),o(e,{key:l,mode:"aspectFit",src:h(j)(a.picThumb),onClick:l=>{return e=h(j)((null==a?void 0:a.picUrl)||""),void F({urls:[e]});var e}},null,8,["src","onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1}),K.value>1?(v(),o(s,{key:0,class:"loading-box"},{default:c(()=>[G.value?(v(),o(s,{key:0,class:"bottomLoading"},{default:c(()=>[_(e,{"lazy-load":"",class:"loading",src:h(C)("common/loading.gif")},null,8,["src"])]),_:1})):g("",!0)]),_:1})):g("",!0),_(s,{class:"loading-box"},{default:c(()=>[J.value.length<1?(v(),o(s,{key:0},{default:c(()=>[T(z(a.$t("暂无评价")),1)]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-23fd9c50"]]);export{G as default};
