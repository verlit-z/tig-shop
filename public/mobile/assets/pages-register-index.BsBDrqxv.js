import{a0 as e,d as a,j as l,r as o,K as t,k as s,a4 as i,s as r,L as d,ae as u,af as n,c as p,w as c,B as m,E as b,o as f,g as h,i as v,f as g,t as y,a as _,F as k,I as x,J as C,ag as V,ah as $,h as w,N as U,Q as z,$ as j,n as T,_ as q}from"./index-DE5OqlOG.js";import{_ as M}from"./uni-easyinput.Cpml7ZWU.js";import{_ as A,a as R}from"./uni-forms.DRg_j8ip.js";import{_ as S}from"./tig-mobile-areacode.j2KAvlq4.js";import{_ as E,d as F,e as I}from"./tig-layout.fowSnIDi.js";import{V as D}from"./index.CrA6UYZE.js";import{u as O}from"./useResetState.e7s7g8HP.js";import"./uni-icons.BITEJ68A.js";const Z=q(a({__name:"index",setup(a){const q=l(),Z=o("86"),[B,J]=O({mobile:"",mobileCode:"",password:"",registType:"",email:"",emailCode:""}),{t:K}=t(),L=o(!1),N=o(""),Q=o(!1),W=s(()=>"email"===B.value.registType?!(B.value.email&&B.value.emailCode&&B.value.password&&N.value):!(B.value.mobile&&B.value.mobileCode&&B.value.password&&N.value)),G={mobile:{rules:[{required:!0,errorMessage:K("请输入手机号")},{validateFunction:(e,a,l,o)=>a?/^(?=.*\D).+$/.test(a)?o(K("格式错误，请输入正确的手机号码")):void o():o(K("手机号不能为空"))}]},mobileCode:{rules:[{required:!0,errorMessage:K("请输入验证码")},{validateFunction:(e,a,l,o)=>a?6!=a.length?o(K("请输入6位验证码")):void o():o(K("验证码不能为空"))}]},password:{rules:[{required:!0,errorMessage:K("请输入密码")},{validateFunction:(e,a,l,o)=>a?a.length>20||a.length<6?o(K("密码应为6-20位字符")):/\s/.test(a)?o(K("密码中不允许有空格")):/^\d+$/.test(a)?o(K("密码不能全为数字")):/^(?=.*[\d\W]).+$/.test(a)?/^(?=.*[a-zA-Z0-9]).+$/.test(a)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(a)?void o():o(K("密码不能全为相同字符或数字")):o(K("密码不能全为符号")):o(K("密码不能全为字母")):o(K("密码不能为空"))}]}},H=i(),P=async()=>{H.value.validate().then(async()=>{try{Q.value=!0;const a=d("bindSalesmanId"),l={...B.value};a&&(l.salesmanId=a),B.value.mobile&&(l.mobile=q.isOpenMobileAreaCode?Z.value+B.value.mobile:B.value.mobile),await(a=>e({url:"user/regist/registAct",method:"post",data:a}))(l),z({title:K("注册成功"),duration:1500,icon:"none"}),setTimeout(()=>{j({url:"/pages/login/index"})},1e3)}catch(a){B.value.emailCode="",B.value.mobileCode="",z({title:a.message,duration:1500,icon:"none"})}finally{Q.value=!1}}).catch(e=>{console.error("表单错误信息：",e)})};r(()=>{d("token")&&u({url:"/pages/index/index"}),n(()=>{H.value.setRules(G)})});const X=e=>{z({title:e,duration:1500,icon:"none"})},Y=e=>{T({url:e})};return(e,a)=>{const l=v,o=m(b("uni-easyinput"),M),t=m(b("uni-forms-item"),A),s=m(b("tig-mobile-areacode"),S),i=m(b("tig-checkbox"),F),r=w,d=m(b("uni-forms"),R),u=m(b("tig-button"),I),n=m(b("tig-layout"),E);return f(),p(n,{title:"注册"},{default:c(()=>[h(l,{class:"register-container"},{default:c(()=>[h(l,{class:"register-warp"},{default:c(()=>[h(l,{class:"h1_tit"},{default:c(()=>[g(y(e.$t("会员注册")),1)]),_:1})]),_:1}),h(l,{class:"profile-edit-content"},{default:c(()=>[h(d,{ref_key:"formRef",ref:H,"model-value":k(B),rules:G,"label-align":"right"},{default:c(()=>["email"===k(B).registType?(f(),x(C,{key:0},[h(t,{label:"",name:"email"},{default:c(()=>[h(l,{class:"input mobileareacode-box"},{default:c(()=>[h(o,{modelValue:k(B).email,"onUpdate:modelValue":a[0]||(a[0]=e=>k(B).email=e),"input-border":!1,focus:"",class:"uni-input item-input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入邮箱"),"primary-color":"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),h(t,{label:"",name:"emailCode"},{default:c(()=>[h(l,{class:"item-one"},{default:c(()=>[h(o,{modelValue:k(B).emailCode,"onUpdate:modelValue":a[1]||(a[1]=e=>k(B).emailCode=e),"input-border":!1,class:"uni-input item-input input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("邮箱验证码"),"primary-color":"rgb(192, 196, 204)",style:{width:"400rpx"}},null,8,["modelValue","placeholder"]),h(D,{"is-checked":L.value,"onUpdate:isChecked":a[2]||(a[2]=e=>L.value=e),"verify-token-data":N.value,"onUpdate:verifyTokenData":a[3]||(a[3]=e=>N.value=e),style:{height:"65rpx"},email:k(B).email,"request-api":k(V),onMobileErrorCallback:X},null,8,["is-checked","verify-token-data","email","request-api"])]),_:1})]),_:1})],64)):(f(),x(C,{key:1},[h(t,{label:"",name:"mobile"},{default:c(()=>[h(l,{class:"input mobileareacode-box"},{default:c(()=>[k(q).isOpenMobileAreaCode?(f(),p(s,{key:0,modelValue:Z.value,"onUpdate:modelValue":a[4]||(a[4]=e=>Z.value=e),"label-style":{fontSize:"28rpx"},"name-style":{fontSize:"24rpx",padding:"0 2rpx 0 10rpx"},"box-style":{paddingRight:"0"},"icon-style":{fontSize:"22rpx"}},null,8,["modelValue"])):_("",!0),h(o,{modelValue:k(B).mobile,"onUpdate:modelValue":a[5]||(a[5]=e=>k(B).mobile=e),"input-border":!1,class:"uni-input item-input",focus:"","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入手机号"),"primary-color":"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),h(t,{label:"",name:"mobileCode"},{default:c(()=>[h(l,{class:"item-one"},{default:c(()=>[h(o,{modelValue:k(B).mobileCode,"onUpdate:modelValue":a[6]||(a[6]=e=>k(B).mobileCode=e),"input-border":!1,class:"uni-input item-input input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("手机验证码"),"primary-color":"rgb(192, 196, 204)",style:{width:"400rpx"}},null,8,["modelValue","placeholder"]),h(D,{"is-checked":L.value,"onUpdate:isChecked":a[7]||(a[7]=e=>L.value=e),"verify-token-data":N.value,"onUpdate:verifyTokenData":a[8]||(a[8]=e=>N.value=e),style:{height:"65rpx"},mobile:k(q).isOpenMobileAreaCode?Z.value+k(B).mobile:k(B).mobile,"request-api":k($),onMobileErrorCallback:X},null,8,["is-checked","verify-token-data","mobile","request-api"])]),_:1})]),_:1})],64)),h(t,{label:"",name:"password"},{default:c(()=>[h(l,{class:"input"},{default:c(()=>[h(o,{modelValue:k(B).password,"onUpdate:modelValue":a[9]||(a[9]=e=>k(B).password=e),clearable:!1,"input-border":!1,trim:!0,type:"password",class:"uni-input item-input","placeholder-style":"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入密码"),"primary-color":"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),h(t,{label:"",name:""},{default:c(()=>[h(l,{class:"btn"},{default:c(()=>[h(l,{class:"agreement-btn"},{default:c(()=>[h(i,{checked:L.value,"onUpdate:checked":a[10]||(a[10]=e=>L.value=e)},null,8,["checked"]),h(r,{class:"agreement-text special-color",onClick:a[11]||(a[11]=U(e=>Y("/pages/register/agreement"),["stop"]))},{default:c(()=>[g(y(e.$t("《注册协议》")),1)]),_:1})]),_:1}),h(l,{class:"lf-input",onClick:a[12]||(a[12]=U(e=>Y("/pages/login/index"),["stop"]))},{default:c(()=>[h(l,null,{default:c(()=>[g(y(e.$t("已有账号？")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),h(l,{class:"form-con"},{default:c(()=>[h(u,{disabled:W.value,loading:Q.value,class:"btn2-css3",onClick:P},{default:c(()=>[g(y(e.$t("注 册")),1)]),_:1},8,["disabled","loading"])]),_:1}),1===k(q).openEmailRegister?(f(),p(l,{key:0,class:"change-btn",onClick:a[13]||(a[13]=e=>{return a="email"===k(B).registType?"mobile":"email",J(),void(B.value.registType=a);var a})},{default:c(()=>[g(y("email"===k(B).registType?e.$t("切换为手机号注册"):e.$t("切换为邮箱注册")),1)]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-742fee16"]]);export{Z as default};
