import{d as a,K as e,U as s,l as t,aj as l,P as o,R as d,ak as n,r as i,m as r,al as u,c,w as m,B as g,E as p,am as f,an as _,o as h,g as v,a as y,i as k,I as b,J as j,O as x,F as V,f as I,t as w,ao as C,Y as D,h as L,ac as U,Q as R,n as $,a9 as z,ap as K,aa as B,_ as E}from"./index-DE5OqlOG.js";import{_ as F,a as J}from"./uni-swipe-action.BWIh5ZTG.js";import{_ as M}from"./empty-box.vue_vue_type_script_setup_true_lang.tb7lKy_c.js";import{_ as N}from"./loading-box.Cxf-hKGE.js";import{_ as O,e as P}from"./tig-layout.fowSnIDi.js";import{_ as Q}from"./tig-fixed-placeholder.OF5rBWLr.js";import{_ as S}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.ClZKVkre.js";import{g as Y,d as q,s as A}from"./address.Dw0Z0wUY.js";import{u as G}from"./useList.B4FtGhCx.js";import"./product.xxdbZFp6.js";const H=E(a({__name:"list",setup(a){const{t:E}=e(),H=s({page:1,size:10}),{getList:T,data:W,isLoadMore:X,isLoading:Z}=G(Y,{params:H,path:{dataKey:"records"},immediate:!0,manageData:a=>{var e;sa.value=null==(e=a.find(a=>1===a.isSelected))?void 0:e.addressId}});t(()=>{const a=l();"pages/order/check"===(a.length>1?a[a.length-2].route:"")?o("link",!0):d("link"),n("refreshData",()=>{H.page=1,W.value=[],T()})});const aa=async a=>{try{await q({id:a}),R({title:E("删除成功"),icon:"none"}),H.page=1,W.value=[],T()}catch(e){console.error(e)}},ea=()=>{$({url:"/pages/address/editRegion"})},sa=i(),ta=a=>{la()},la=async()=>{z({title:E("切换中")});const a=l();try{if(await A({id:sa.value}),H.page=1,W.value=[],a.length>1){if("pages/order/check"===a[a.length-2].route)return K()}T()}catch(e){console.error(e),R({title:e.message,icon:"none"})}finally{B()}};return r(()=>{u("refreshData")}),(a,e)=>{const s=g(p("up-radio"),f),t=k,l=g(p("uni-swipe-action-item"),F),o=g(p("uni-swipe-action"),J),d=g(p("up-radio-group"),_),n=g(p("empty-box"),M),i=g(p("loading-box"),N),r=L,u=g(p("tig-button"),P),R=g(p("tig-fixed-placeholder"),Q),z=g(p("tig-loadingpage"),S),K=g(p("tig-layout"),O);return h(),c(K,{title:"收货地址"},{default:m(()=>[v(t,{class:"address-list"},{default:m(()=>[v(d,{modelValue:sa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>sa.value=a),placement:"column",onChange:ta},{default:m(()=>[v(o,null,{default:m(()=>[(h(!0),b(j,null,x(V(W),e=>(h(),c(t,{key:e.addressId,class:"address-item"},{default:m(()=>[v(l,{threshold:0},{right:m(()=>[v(t,{class:"address-del",onClick:a=>{return s=e.addressId,console.log("handleDel",s),void U({title:E("提示"),content:E("确定删除吗？"),success:async a=>{a.confirm&&aa(s)}});var s}},{default:m(()=>[I(w(a.$t("删除")),1)]),_:2},1032,["onClick"])]),default:m(()=>[v(t,{class:"address-item-content"},{default:m(()=>[v(t,{class:"address-item-left flex-center"},{default:m(()=>[v(s,{"active-color":"var(--general)",name:e.addressId},null,8,["name"])]),_:2},1024),v(t,{class:"address-item-middle"},{default:m(()=>[v(t,{class:"user-info"},{default:m(()=>[v(t,{class:"name"},{default:m(()=>[I(w(e.consignee),1)]),_:2},1024),v(t,{class:"phone"},{default:m(()=>[I(w(V(C)(e.mobile))+" ",1),1===e.isDefault?(h(),c(t,{key:0,class:"tag"},{default:m(()=>[I(w(a.$t("默认")),1)]),_:1})):y("",!0)]),_:2},1024)]),_:2},1024),v(t,{class:"address line1"},{default:m(()=>[I(w(e.regionName)+" "+w(e.address),1)]),_:2},1024)]),_:2},1024),v(t,{class:"address-item-right flex-center",onClick:a=>{return s=e.addressId,void $({url:"/pages/address/editRegion?id="+s});var s}},{default:m(()=>[v(t,{class:"iconfont icon-bianji"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),V(X)||V(Z)||0!==V(W).length?y("",!0):(h(),c(n,{key:0,background:"transparent",mode:"list",text:"暂无地址！"})),v(i,{modelValue:V(X),"onUpdate:modelValue":e[1]||(e[1]=a=>D(X)?X.value=a:null),page:H.page,length:V(W).length},null,8,["modelValue","page","length"]),v(R,{"background-color":"#fff"},{default:m(()=>[v(t,{class:"btn-box"},{default:m(()=>[v(u,{class:"btn",onClick:ea},{default:m(()=>[v(r,{class:"iconfont icon-dizhi"}),I(" "+w(a.$t("添加新地址")),1)]),_:1})]),_:1})]),_:1}),v(z,{modelValue:V(Z),"onUpdate:modelValue":e[2]||(e[2]=a=>D(Z)?Z.value=a:null)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-d901b49a"]]);export{H as default};
