import{d as e,j as a,r as t,aw as l,K as s,l as u,a9 as r,aa as c,k as i,c as o,w as d,B as n,E as f,bL as p,bM as m,o as v,g as _,i as y,I as h,a as k,J as b,h as g,f as x,t as $,V as I,O as A,ai as w,F as C,ac as S,Q as j,n as D,a$ as N,_ as T}from"./index-DE5OqlOG.js";import{_ as F}from"./uni-steps.KhQe9GfR.js";import{_ as P}from"./uni-icons.BITEJ68A.js";import{_ as O,e as q}from"./tig-layout.fowSnIDi.js";import{_ as z}from"./tig-image.h_tgFjnN.js";import{_ as R}from"./format-price.Cc34639m.js";import{_ as G}from"./tig-fixed-placeholder.OF5rBWLr.js";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang.CvdmARV9.js";import{e as W,f as B,c as E,b as J}from"./order.Yb7sr44P.js";const K=T(e({__name:"info",setup(e){const T=a(),K=t(null),L=()=>{K.value&&K.value.handleClick()},M=l(),{t:Q}=s(),H=t({0:Q("您的订单已提交成功，请尽快完成付款哦！"),1:Q("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:Q("您的订单已经发货，请注意查收，祝您购物愉快！"),3:Q('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:Q('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:Q("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),U=t({}),X=t(!1),Y=t();u(e=>{if(e&&e.id){Y.value=e.id;try{r({title:Q("加载中")}),Promise.all([Z(),te()])}catch(a){console.error(a)}}});const Z=async()=>{try{const e=await W({id:Y.value});U.value=e}catch(e){console.error(e)}},ee=t([]),ae=t(""),te=async()=>{try{const e=await B({id:Y.value});e&&(Array.isArray(e)?ee.value=e:ee.value=e.traces??[])}catch(e){console.error(e)}finally{c()}},le=e=>{D(e?{url:`/pages/user/afterSale/edit?itemId=${e}&orderId=${U.value.orderId}`}:{url:`/pages/user/afterSale/edit?orderId=${U.value.orderId}`})},se=e=>{D({url:`/pages/product/index?id=${e}`})},ue=e=>{N(e,()=>{j({title:Q("复制成功"),icon:"none"})})},re=i(()=>U.value.shop&&Object.keys(U.value.shop).length>0?!!(U.value.shop.kefuInlet&&U.value.shop.kefuInlet.length>0&&U.value.shop.kefuInlet.includes(2)):M.serviceConfig.show);return(e,a)=>{const t=n(f("uni-steps"),F),l=y,s=g,u=n(f("up-steps-item"),p),r=n(f("up-steps"),m),c=n(f("uni-icons"),P),i=n(f("tig-button"),q),N=n(f("tig-image"),z),W=n(f("format-price"),R),B=w,M=n(f("tig-fixed-placeholder"),G),Y=n(f("tig-layout"),O);return v(),o(Y,{title:"我的订单"},{default:d(()=>[_(l,{class:"order-info"},{default:d(()=>[Object.keys(U.value).length?(v(),h(b,{key:0},[_(l,{class:"order-info-steps"},{default:d(()=>[_(t,{"active-color":"var(--general)",options:U.value.stepStatus.steps,active:U.value.stepStatus.current},null,8,["options","active"])]),_:1}),_(l,{class:"order-info-content"},{default:d(()=>[_(l,{class:"order-card card-space"},{default:d(()=>[_(l,{class:"order-card-item flex justify-between"},{default:d(()=>[_(l,{class:"item-left"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单编号"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.orderSn),1)]),_:1})]),_:1}),_(l,{class:"item-right"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单状态"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.orderStatusName),1)]),_:1})]),_:1})]),_:1}),_(l,{class:"order-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("下单时间"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.addTime),1)]),_:1})]),_:1}),U.value.autoDeliveryDays?(v(),o(l,{key:0,class:"order-card-item"},{default:d(()=>[x("订单将在"+$(U.value.autoDeliveryDays)+"天后自动收货",1)]),_:1})):(v(),o(l,{key:1,class:"order-card-item"},{default:d(()=>[x($(H.value[U.value.orderStatus]),1)]),_:1}))]),_:1}),!U.value.orderId||2!==U.value.orderStatus&&5!==U.value.orderStatus?k("",!0):(v(),o(l,{key:0,class:"expressage-card card-space"},{default:d(()=>[0===ee.value.length?(v(),o(l,{key:0,class:"shippingInfo-title"},{default:d(()=>[x($(e.$t("物流信息")),1)]),_:1})):k("",!0),_(l,{class:"expressage-box"},{default:d(()=>[_(l,{class:"expressage-info"},{default:d(()=>[_(l,{class:""},{default:d(()=>[x($(U.value.logisticsName),1)]),_:1}),_(l,{class:""},{default:d(()=>[x($(U.value.trackingNo),1)]),_:1})]),_:1}),_(l,{class:"copy-btn",onClick:a[0]||(a[0]=e=>ue(U.value.trackingNo))},{default:d(()=>[x($(e.$t("复制")),1)]),_:1})]),_:1}),ee.value.length>0?(v(),o(l,{key:1,class:"shippingInfo-box"},{default:d(()=>[_(l,{class:I(["shippingInfo-box-content",{dim:!X.value,"more-height":X.value}])},{default:d(()=>[_(r,{current:0,dot:"","active-color":"var(--general)",direction:"column"},{default:d(()=>[(v(!0),h(b,null,A(ee.value,(e,a)=>(v(),o(u,{key:a,title:e.acceptStation,desc:e.acceptTime},null,8,["title","desc"]))),128))]),_:1})]),_:1},8,["class"]),_(l,{class:"shippingInfo-btn",onClick:a[1]||(a[1]=e=>X.value=!X.value)},{default:d(()=>[x($(X.value?e.$t("收起"):e.$t("展开")),1),_(c,{class:I(["btn-icon",{rotate:X.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])]),_:1})]),_:1})):(v(),o(l,{key:2,class:"emptyText"},{default:d(()=>[x($(ae.value),1)]),_:1}))]),_:1})),_(l,{class:"pay-card card-space"},{default:d(()=>[_(l,{class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("收货信息"))+"：",1)]),_:1}),_(s,{class:"address-text"},{default:d(()=>[x($(U.value.userAddress+" "+U.value.consignee+" "+U.value.mobile),1)]),_:1})]),_:1}),U.value.shippingTypeName?(v(),o(l,{key:0,class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("配送方式"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.shippingTypeName),1)]),_:1})]),_:1})):k("",!0),_(l,{class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("支付方式"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(1===U.value.payTypeId?e.$t("在线支付"):2===U.value.payTypeId?e.$t("货到付款"):e.$t("线下支付")),1)]),_:1})]),_:1}),re.value?(v(),o(l,{key:1,class:"pay-card-item im-btn"},{default:d(()=>[_(V,{ref_key:"serviceRef",ref:K,phone:U.value.shop&&U.value.shop.kefuPhone?U.value.shop.kefuPhone:"","order-id":U.value.orderId,"shop-id":U.value.shopId},{default:d(()=>[_(i,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:L},{default:d(()=>[x($(e.$t("联系客服")),1)]),_:1})]),_:1},8,["phone","order-id","shop-id"])]),_:1})):k("",!0)]),_:1}),_(l,{class:"product-card card-space"},{default:d(()=>[(v(!0),h(b,null,A(U.value.items,a=>(v(),o(l,{key:a.productId,class:"item-box"},{default:d(()=>[U.value.shop?(v(),o(l,{key:0,class:"shop-info"},{default:d(()=>[_(s,{class:"text"},{default:d(()=>{var e;return[x($(null==(e=U.value.shop)?void 0:e.shopTitle),1)]}),_:1}),_(s,{class:"iconfont icon-xiangyou"})]),_:1})):k("",!0),_(l,{class:"product-card-item"},{default:d(()=>[_(l,{class:"product-card-item-left",onClick:e=>se(a.productId)},{default:d(()=>[_(l,{class:"left-img"},{default:d(()=>[_(N,{src:a.picThumb},null,8,["src"]),1===a.isGift?(v(),o(l,{key:0,class:"gift-text"},{default:d(()=>[x($(e.$t("赠品")),1)]),_:1})):k("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),_(l,{class:"product-card-item-right",onClick:e=>se(a.productId)},{default:d(()=>[_(l,{class:"right-title line2"},{default:d(()=>[_(s,null,{default:d(()=>[x($(a.productName),1)]),_:2},1024)]),_:2},1024),_(l,{class:I(["sku-card",{nodata:!a.skuData||0===a.skuData.length}])},{default:d(()=>[a.skuData&&a.skuData.length>0?(v(!0),h(b,{key:0},A(a.skuData,(e,a)=>(v(),o(l,{key:a,class:"sku-item line1"},{default:d(()=>[x($(e.value),1)]),_:2},1024))),128)):k("",!0)]),_:2},1032,["class"]),a.extraSkuData&&a.extraSkuData.length?(v(),o(l,{key:0,class:"extraskudata-box"},{default:d(()=>[_(l,{class:"extraskudata"},{default:d(()=>[(v(!0),h(b,null,A(a.extraSkuData,e=>(v(),o(l,{key:e,class:"extraskudata-item"},{default:d(()=>[_(l,{class:"title"},{default:d(()=>[x($(e.attrName),1)]),_:2},1024),_(l,{class:"line-box"},{default:d(()=>[_(l,{class:"line"})]),_:1}),_(l,{class:"content"},{default:d(()=>[_(s,{class:"line1 content-text"},{default:d(()=>[x($(e.attrValue),1)]),_:2},1024),_(W,{"show-text":!1,class:"price","price-data":e.attrPrice},null,8,["price-data"]),_(l,{class:"num"},{default:d(()=>[x("x"+$(a.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):k("",!0),_(l,{class:"right-price"},{default:d(()=>[_(W,{"show-text":!1,class:"right-price-pricenum","decimals-style":{fontSize:"23rpx",fontWeight:"bold"},"currency-style":{fontSize:"21rpx",fontWeight:"bold"},"price-data":a.price},null,8,["price-data"]),_(l,{class:"right-price-quantity"},{default:d(()=>[x("x "+$(a.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),2===U.value.payStatus&&0===a.isGift?(v(),o(l,{key:0,class:"item-btn"},{default:d(()=>[a.aftersalesItem?(v(),o(i,{key:0,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>{return t=a.aftersalesItem.aftersaleId,void D({url:`/pages/user/afterSale/info?id=${t}`});var t}},{default:d(()=>[x($(e.$t("售后详情")),1)]),_:2},1032,["onClick"])):U.value.availableActions.toAftersales?(v(),o(i,{key:1,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>le(a.itemId)},{default:d(()=>[x($(e.$t("申请售后")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)):k("",!0)]),_:2},1024),8===U.value.orderType&&a.eCard.length>0?(v(),o(l,{key:1,class:"virtualsample-box"},{default:d(()=>[(v(!0),h(b,null,A(a.eCard,a=>(v(),o(l,{key:a},{default:d(()=>[_(l,{class:"virtualsample-item"},{default:d(()=>[_(l,{class:"virtualsample-item-con"},{default:d(()=>[_(l,{class:"label"},{default:d(()=>[x($(e.$t("卡号"))+"：",1)]),_:1}),_(l,{class:"value"},{default:d(()=>[x($(a.cardNumber),1)]),_:2},1024)]),_:2},1024),_(l,{class:"virtualsample-item-con"},{default:d(()=>[_(l,{class:"label"},{default:d(()=>[x($(e.$t("卡密"))+"：",1)]),_:1}),_(l,{class:"value"},{default:d(()=>[x($(a.cardPwd),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),_(l,{class:"virtualsample-btn"},{default:d(()=>[_(l,null,{default:d(()=>[_(i,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>ue(`卡号：${a.cardNumber}  卡密：${a.cardPwd}`)},{default:d(()=>[x($(e.$t("复制")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):k("",!0)]),_:2},1024))),128))]),_:1}),6===U.value.orderType&&U.value.items[0].virtualSample?(v(),o(l,{key:1,class:"virtualsample card-space"},{default:d(()=>[_(l,{class:"virtualsample-label"},{default:d(()=>[x($(e.$t("虚拟内容"))+"：",1)]),_:1}),_(l,{class:"virtualsample-value"},{default:d(()=>[_(B,{class:"desc-text-item",nodes:U.value.items[0].virtualSample},null,8,["nodes"])]),_:1})]),_:1})):k("",!0),_(l,{class:"money-card card-space"},{default:d(()=>[_(l,{class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("商品总价"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.productAmount},null,8,["price-data"])]),_:1}),U.value.serviceFee&&U.value.serviceFee>0?(v(),o(l,{key:0,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("附加费用"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.serviceFee},null,8,["price-data"])]),_:1})):k("",!0),U.value.shippingFee&&U.value.shippingFee>0?(v(),o(l,{key:1,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("运费"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.shippingFee},null,8,["price-data"])]),_:1})):k("",!0),U.value.balance&&U.value.balance>0?(v(),o(l,{key:2,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("使用余额"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.balance},null,8,["price-data"])]),_:1})):k("",!0),U.value.pointsAmount&&U.value.pointsAmount>0?(v(),o(l,{key:3,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t(`使用${C(T).integralName}`))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.pointsAmount},null,8,["price-data"])]),_:1})):k("",!0),U.value.couponAmount&&U.value.couponAmount>0?(v(),o(l,{key:4,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("优惠券"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.couponAmount},null,8,["price-data"])]),_:1})):k("",!0),U.value.discountAmount&&U.value.discountAmount>0?(v(),o(l,{key:5,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("其他优惠"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.discountAmount},null,8,["price-data"])]),_:1})):k("",!0),U.value.unpaidAmount&&U.value.unpaidAmount>0?(v(),o(l,{key:6,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("待支付金额"))+"：",1)]),_:1}),_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.unpaidAmount},null,8,["price-data"])]),_:1})):k("",!0),2==U.value.payStatus?(v(),o(l,{key:7,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("实付款"))+"：",1)]),_:1}),_(l,{class:"order-item-price"},{default:d(()=>[_(W,{"show-text":!1,"is-bottom":!1,"price-data":U.value.totalAmount},null,8,["price-data"])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1}),U.value.availableActions.cancelOrder||U.value.availableActions.toPay||U.value.availableActions.confirmReceipt||U.value.availableActions.toAftersales?(v(),o(M,{key:0,height:"100rpx","background-color":"#fff"},{default:d(()=>[_(l,{class:"order-info-btn"},{default:d(()=>[_(l,{class:"order-info-btn-box"},{default:d(()=>[U.value.availableActions.cancelOrder?(v(),o(i,{key:0,class:"btn",color:"#333",plain:!0,onClick:a[2]||(a[2]=e=>{return a=U.value.orderId,void S({title:Q("提示"),content:Q("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await E({id:a}),Z()}catch(t){j({title:t.message,icon:"none"})}}});var a})},{default:d(()=>[x($(e.$t("取消订单")),1)]),_:1})):k("",!0),U.value.availableActions.toPay?(v(),o(i,{key:1,class:"btn",color:"#333",plain:!0,onClick:a[3]||(a[3]=e=>{return a=U.value.orderId,void D({url:`/pages/order/pay?orderId=${a}`});var a})},{default:d(()=>[x($(e.$t("去付款")),1)]),_:1})):k("",!0),U.value.availableActions.confirmReceipt?(v(),o(i,{key:2,color:"#333",class:"btn",plain:!0,onClick:a[4]||(a[4]=e=>{return a=U.value.orderId,void S({title:Q("提示"),content:Q("确认收货吗？"),success:async e=>{if(e.confirm)try{await J({id:a}),Z()}catch(t){j({title:t.message,icon:"none"})}}});var a})},{default:d(()=>[x($(e.$t("确认已收货")),1)]),_:1})):k("",!0),U.value.availableActions.toAftersales?(v(),o(i,{key:3,color:"#333",class:"btn",plain:!0,onClick:a[5]||(a[5]=e=>le(null))},{default:d(()=>[x($(e.$t("整单售后")),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)],64)):k("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-cd634266"]]);export{K as default};
