import{d as a,K as t,U as e,r as l,l as s,c as i,w as o,B as r,E as n,aQ as c,o as u,g as d,i as p,a as m,I as y,J as f,O as g,F as _,h as v,f as k,t as h,a2 as x,V as b,Y as w,ac as C,Q as S,S as $,n as I,$ as D,_ as j}from"./index-DE5OqlOG.js";import{_ as A}from"./tig-image.h_tgFjnN.js";import{_ as V}from"./format-price.Cc34639m.js";import{_ as T,e as L}from"./tig-layout.fowSnIDi.js";import{_ as N}from"./loading-box.Cxf-hKGE.js";import{_ as P}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.ClZKVkre.js";import{_ as U}from"./empty-box.vue_vue_type_script_setup_true_lang.tb7lKy_c.js";import{a as q,c as z,d as O,o as R,b as F}from"./order.Yb7sr44P.js";import{u as K}from"./useList.B4FtGhCx.js";import"./product.xxdbZFp6.js";const Q=j(a({__name:"list",setup(a){const{t:j}=t(),Q=e([{type:"all",value:j("全部订单"),badge:{value:0}},{type:"awaitPay",value:j("待支付"),badge:{value:0}},{type:"awaitShipping",value:j("待发货"),badge:{value:0}},{type:"awaitReceived",value:j("待收货"),badge:{value:0}},{type:"awaitComment",value:j("待评价"),badge:{value:0}}]),B=l("all"),E=e({page:1,size:10,orderStatus:-1,commentStatus:-1}),G=l(0),J=a=>{B.value!==a.type&&(B.value=a.type,E.page=1,Y.value=[],"awaitComment"===a.type?(E.commentStatus=0,E.orderStatus=-1):(E.orderStatus=Z(a.type),E.commentStatus=-1),M())},{getList:M,data:Y,isLoadMore:H,isLoading:W,total:X}=K(q,{params:E,path:{dataKey:"records"}}),Z=a=>{switch(a){case"all":default:return-1;case"awaitPay":return 0;case"awaitShipping":return 1;case"awaitReceived":return 2}};return s(a=>{a&&a.type&&(G.value=Q.findIndex(t=>t.type===a.type),"awaitComment"===a.type?E.commentStatus=0:E.orderStatus=Z(a.type),B.value=a.type),M()}),(a,t)=>{const e=r(n("up-tabs"),c),l=p,s=v,q=r(n("tig-image"),A),K=r(n("format-price"),V),B=x,Z=r(n("tig-button"),L),aa=r(n("loading-box"),N),ta=r(n("tig-loadingpage"),P),ea=r(n("tig-layout"),T);return u(),i(ea,{title:"我的订单"},{default:o(()=>[d(l,{class:"order"},{default:o(()=>[d(l,{class:"order-menu badgecolor"},{default:o(()=>[d(e,{current:G.value,"onUpdate:current":t[0]||(t[0]=a=>G.value=a),"line-color":"var(--general)",list:Q,"active-style":{padding:"0 10rpx"},"inactive-style":{padding:"0 10rpx"},scrollable:!0,"key-name":"value",onChange:J},null,8,["current","list"])]),_:1}),d(l,{class:"placeholder"}),d(l,{class:"order-list"},{default:o(()=>[(u(!0),y(f,null,g(_(Y),t=>(u(),i(l,{key:t.orderId,class:"order-list-item"},{default:o(()=>[d(l,{class:"order-list-item-header"},{default:o(()=>[t.shop?(u(),i(s,{key:0,class:"special-text"},{default:o(()=>{var a;return[d(s,{class:"iconfont icon-dianpu"}),k(" "+h(null==(a=t.shop)?void 0:a.shopTitle)+" ",1),d(s,{class:"iconfont icon-xiangyou"})]}),_:2},1024)):(u(),i(s,{key:1,class:"order-special-text"},{default:o(()=>[k(h(a.$t("订单编号"))+"：",1),d(s,{class:"special-color"},{default:o(()=>[k(h(t.orderSn),1)]),_:2},1024)]),_:2},1024)),d(s,null,{default:o(()=>[k(h(t.orderStatusName),1)]),_:2},1024)]),_:2},1024),d(l,{class:"order-list-item-content"},{default:o(()=>[d(l,{class:"item-content-text"},{default:o(()=>[d(l,null,{default:o(()=>[k(h(a.$t("收件人"))+"："+h(t.consignee),1)]),_:2},1024),d(l,{class:"special-color"},{default:o(()=>[k(h(t.addTime),1)]),_:2},1024)]),_:2},1024),d(l,{class:"item-content-product"},{default:o(()=>[(u(!0),y(f,null,g(t.items,t=>(u(),i(B,{key:t.itemId,url:"/pages/user/order/info?id="+t.orderId,"hover-class":"navigator-hover"},{default:o(()=>[d(l,{class:"item-content-product-item"},{default:o(()=>[d(l,{class:"item-content-product-img"},{default:o(()=>[d(q,{src:t.picThumb},null,8,["src"]),1===t.isGift?(u(),i(l,{key:0,class:"gift-text"},{default:o(()=>[k(h(a.$t("赠品")),1)]),_:1})):m("",!0)]),_:2},1024),d(l,{class:"item-content-product-info"},{default:o(()=>[d(l,{class:"product-item-title"},{default:o(()=>[k(h(t.productName),1)]),_:2},1024),d(l,{class:b(["sku-card",{nodata:!t.skuData||0===t.skuData.length}])},{default:o(()=>[t.skuData&&t.skuData.length>0?(u(!0),y(f,{key:0},g(t.skuData,(a,t)=>(u(),i(l,{key:t,class:"sku-item line1"},{default:o(()=>[k(h(a.value),1)]),_:2},1024))),128)):m("",!0)]),_:2},1032,["class"]),t.extraSkuData&&t.extraSkuData.length?(u(),i(l,{key:0,class:"extraskudata-box"},{default:o(()=>[d(l,{class:"extraskudata"},{default:o(()=>[(u(!0),y(f,null,g(t.extraSkuData,a=>(u(),i(l,{key:a,class:"extraskudata-item"},{default:o(()=>[d(l,{class:"title"},{default:o(()=>[k(h(a.attrName),1)]),_:2},1024),d(l,{class:"line-box"},{default:o(()=>[d(l,{class:"line"})]),_:1}),d(l,{class:"content"},{default:o(()=>[d(s,{class:"line1 content-text"},{default:o(()=>[k(h(a.attrValue),1)]),_:2},1024),d(K,{"show-text":!1,class:"price","price-data":a.attrPrice},null,8,["price-data"]),d(l,{class:"num"},{default:o(()=>[k("x"+h(t.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):m("",!0),d(l,{class:"product-item-price"},{default:o(()=>[d(K,{"show-text":!1,class:"product-item-pricenum","decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":t.price},null,8,["price-data"]),d(l,{class:"product-item-quantity"},{default:o(()=>[k("x "+h(t.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["url"]))),128))]),_:2},1024),d(l,{class:"item-content-pay"},{default:o(()=>[d(l,{class:"item-content-pay-box"},{default:o(()=>[d(l,{class:"pay-item pay-type"},{default:o(()=>[k(h(1===t.payTypeId?a.$t("在线支付"):2===t.payTypeId?a.$t("货到付款"):_(j)("线下支付")),1)]),_:2},1024),d(l,{class:"pay-item total-money"},{default:o(()=>[k(h(a.$t("总额"))+"：",1),d(K,{"show-text":!1,"is-bottom":!1,"price-data":t.totalAmount},null,8,["price-data"])]),_:2},1024),0===t.orderStatus&&Number(t.unpaidAmount)>0?(u(),i(l,{key:0,class:"pay-item"},{default:o(()=>[k(h(a.$t("应付"))+"：",1),d(K,{"show-text":!1,"is-bottom":!1,"price-data":t.unpaidAmount},null,8,["price-data"])]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(l,{class:"order-list-item-btn"},{default:o(()=>[d(l,{class:"autodeliverydays"},{default:o(()=>[t.autoDeliveryDays?(u(),i(l,{key:0,class:"autodeliverydays-text line1"},{default:o(()=>[k("订单将在"+h(t.autoDeliveryDays)+"天后自动收货",1)]),_:2},1024)):m("",!0)]),_:2},1024),d(l,{class:"item-btn-box"},{default:o(()=>[d(Z,{class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,"plain-main-color":!0,onClick:a=>{return e=t.orderId,void I({url:`/pages/user/order/info?id=${e}`});var e}},{default:o(()=>[k(h(a.$t("订单详情")),1)]),_:2},1032,["onClick"]),t.availableActions.toPay?(u(),i(Z,{key:0,class:"btn-margin",color:"#333","custom-style":{height:"55rpx"},plain:!0,onClick:a=>{return e=t.orderId,void I({url:`/pages/order/pay?orderId=${e}`});var e}},{default:o(()=>[k(h(a.$t("去付款")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.cancelOrder?(u(),i(Z,{key:1,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>(async a=>{C({title:j("提示"),content:j("确认要取消该订单吗？"),success:async t=>{if(t.confirm)try{await z({id:a}),E.page=1,Y.value=[],M()}catch(e){S({title:e.message,icon:"none"})}}})})(t.orderId)},{default:o(()=>[k(h(a.$t("取消订单")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.delOrder?(u(),i(Z,{key:2,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>(async a=>{C({title:j("提示"),content:j("确认要删除该订单吗？"),success:async t=>{if(t.confirm)try{await O({id:a}),E.page=1,Y.value=[],M()}catch(e){S({title:e.message,icon:"none"})}}})})(t.orderId)},{default:o(()=>[k(h(a.$t("删除订单")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.rebuy?(u(),i(Z,{key:3,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>(async a=>{try{await R({id:a}),$({url:"/pages/cart/index"})}catch(t){S({title:t.message,icon:"none"})}})(t.orderId)},{default:o(()=>[k(h(a.$t("再次购买")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.toComment?(u(),i(Z,{key:4,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>{return e=t.orderId,void I({url:`/pages/user/comment/info?id=${e}`});var e}},{default:o(()=>[k(h(a.$t("去评价")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.confirmReceipt?(u(),i(Z,{key:5,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>{return e=t.orderId,void C({title:j("提示"),content:j("确认收货吗？"),success:async a=>{if(a.confirm)try{await F({id:e}),D({url:"/pages/user/order/list?type=awaitComment"})}catch(t){S({title:t.message,icon:"none"})}}});var e}},{default:o(()=>[k(h(a.$t("确认收货")),1)]),_:2},1032,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),d(aa,{modelValue:_(H),"onUpdate:modelValue":t[1]||(t[1]=a=>w(H)?H.value=a:null),page:E.page,length:_(Y).length},null,8,["modelValue","page","length"]),_(W)||0!==_(X)?m("",!0):(u(),i(U,{key:0,mode:"list",background:"#f5f5f5",text:a.$t("暂无订单")},null,8,["text"]))]),_:1}),d(ta,{modelValue:_(W),"onUpdate:modelValue":t[2]||(t[2]=a=>w(W)?W.value=a:null)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-30ff0146"]]);export{Q as default};
