import{a0 as a,d as e,K as t,U as l,r as s,l as c,q as o,c as u,w as i,a9 as r,aa as d,B as n,E as p,o as m,a as f,g,i as _,I as v,J as y,O as h,f as x,t as b,h as k,b as w,F as j,G as I,$ as z,ac as C,Q as V,_ as $}from"./index-DE5OqlOG.js";import{_ as P}from"./tig-image.h_tgFjnN.js";import{_ as S}from"./format-price.Cc34639m.js";import{_ as U,a as q}from"./uni-swipe-action.BWIh5ZTG.js";import{_ as B}from"./loading-box.Cxf-hKGE.js";import{_ as E}from"./tig-layout.fowSnIDi.js";const F=$(e({__name:"index",setup(e){const{t:$}=t(),F=l({page:1,size:10,keyword:""}),G=s(0),J=s(!1),K=s(!1),M=s([]),N=async()=>{F.page>1?J.value=!0:r({title:$("加载中")});try{const t=await(e={...F},a({url:"user/collectProduct/list",method:"get",params:e}));G.value=t.total,M.value=[...M.value,...t.records]}catch(t){console.error(t)}finally{d(),J.value=!1,K.value=!0}var e},O=async e=>{try{await(t={id:e},a({url:"user/collectProduct/cancel",method:"post",data:t})),V({title:$("取消收藏成功"),icon:"none"}),F.page=1,M.value=[],N()}catch(l){V({title:l.message,icon:"none",duration:1e3})}var t};return c(()=>{N()}),o(()=>{F.page<Math.ceil(G.value/F.size)&&(F.page++,N())}),(a,e)=>{const t=n(p("tig-image"),P),l=_,s=n(p("format-price"),S),c=k,o=n(p("uni-swipe-action-item"),U),r=n(p("uni-swipe-action"),q),d=w,V=n(p("loading-box"),B),G=n(p("tig-layout"),E);return m(),u(G,{title:"商品收藏"},{default:i(()=>[M.value.length>0?(m(),u(l,{key:0,class:"collect-product"},{default:i(()=>[g(r,null,{default:i(()=>[(m(!0),v(y,null,h(M.value,e=>(m(),u(l,{key:e.productId,class:"move-item"},{default:i(()=>[g(o,{threshold:0,"auto-close":""},{right:i(()=>[g(l,{class:"collect-move-box"},{default:i(()=>[g(l,{class:"btn-del",onClick:a=>{return t=e.productId,void C({title:$("提示"),content:$("确定取消收藏吗？"),success:async a=>{a.confirm&&O(t)}});var t}},{default:i(()=>[g(c,null,{default:i(()=>[x(b(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[g(l,{class:"collect-product-item",onClick:a=>{return t=e.productId,void z({url:"/pages/product/index?id="+t});var t}},{default:i(()=>[g(l,{class:"collect-product-item-left"},{default:i(()=>[g(l,{class:"img-box"},{default:i(()=>[g(t,{src:e.picThumb},null,8,["src"])]),_:2},1024)]),_:2},1024),g(l,{class:"collect-product-item-right"},{default:i(()=>[g(l,{class:"title"},{default:i(()=>[x(b(e.productName),1)]),_:2},1024),g(l,{class:"item-bottom"},{default:i(()=>[g(l,{class:"price"},{default:i(()=>[g(s,{"decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":e.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0===M.value.length&&!0===K.value?(m(),u(l,{key:1,class:"empty-box"},{default:i(()=>[g(l,{class:"pictrue"},{default:i(()=>[g(d,{src:j(I)("common/data_empty.png")},null,8,["src"])]),_:1}),g(l,{class:"txt"},{default:i(()=>[x(b(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})):f("",!0),g(V,{modelValue:J.value,"onUpdate:modelValue":e[0]||(e[0]=a=>J.value=a),page:F.page,length:M.value.length},null,8,["modelValue","page","length"])]),_:1})}}}),[["__scopeId","data-v-49fe7f26"]]);export{F as default};
